import{_ as s,c as a,a as p,o as t}from"./app-CD1YpnS1.js";const e={};function o(l,n){return t(),a("div",null,[...n[0]||(n[0]=[p(`<h2 id="_1-初始化项目" tabindex="-1"><a class="header-anchor" href="#_1-初始化项目"><span>1.初始化项目</span></a></h2><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">$ npm i egg-init -g</span>
<span class="line">$ egg-init cms-api --type=simple</span>
<span class="line">$ cd cms-api</span>
<span class="line">$ npm i</span>
<span class="line">$ npm run dev</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-数据库和模板" tabindex="-1"><a class="header-anchor" href="#_2-数据库和模板"><span>2.数据库和模板</span></a></h2><h3 id="_2-1-数据库脚本" tabindex="-1"><a class="header-anchor" href="#_2-1-数据库脚本"><span>2.1 数据库脚本</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">CREATE</span> <span class="token constant">TABLE</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">entity</span><span class="token template-punctuation string">\`</span></span> <span class="token punctuation">(</span></span>
<span class="line">  <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">id</span><span class="token template-punctuation string">\`</span></span> <span class="token function">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token constant">NOT</span> <span class="token constant">NULL</span> <span class="token constant">AUTO_INCREMENT</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">title</span><span class="token template-punctuation string">\`</span></span> <span class="token function">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token constant">DEFAULT</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">name</span><span class="token template-punctuation string">\`</span></span> <span class="token function">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token constant">DEFAULT</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">fields</span><span class="token template-punctuation string">\`</span></span> text <span class="token constant">DEFAULT</span> <span class="token constant">NULL</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">page</span><span class="token template-punctuation string">\`</span></span> text <span class="token constant">DEFAULT</span> <span class="token constant">NULL</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">record</span><span class="token template-punctuation string">\`</span></span> text <span class="token constant">DEFAULT</span> <span class="token constant">NULL</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">created</span><span class="token template-punctuation string">\`</span></span> datetime <span class="token constant">DEFAULT</span> <span class="token constant">NULL</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">updated</span><span class="token template-punctuation string">\`</span></span> datetime <span class="token constant">DEFAULT</span> <span class="token constant">NULL</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token constant">PRIMARY</span> <span class="token constant">KEY</span> <span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">id</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span> <span class="token constant">ENGINE</span><span class="token operator">=</span>InnoDB <span class="token constant">DEFAULT</span> <span class="token constant">CHARSET</span><span class="token operator">=</span>utf8mb4<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token constant">CREATE</span> <span class="token constant">TABLE</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">menu</span><span class="token template-punctuation string">\`</span></span> <span class="token punctuation">(</span></span>
<span class="line">  <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">id</span><span class="token template-punctuation string">\`</span></span> <span class="token function">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token constant">NOT</span> <span class="token constant">NULL</span> <span class="token constant">AUTO_INCREMENT</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">name</span><span class="token template-punctuation string">\`</span></span> <span class="token function">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token constant">DEFAULT</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">path</span><span class="token template-punctuation string">\`</span></span> <span class="token function">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token constant">DEFAULT</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">created</span><span class="token template-punctuation string">\`</span></span> datetime <span class="token constant">DEFAULT</span> <span class="token constant">NULL</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">updated</span><span class="token template-punctuation string">\`</span></span> datetime <span class="token constant">DEFAULT</span> <span class="token constant">NULL</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token constant">PRIMARY</span> <span class="token constant">KEY</span> <span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">id</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span> <span class="token constant">ENGINE</span><span class="token operator">=</span>InnoDB <span class="token constant">DEFAULT</span> <span class="token constant">CHARSET</span><span class="token operator">=</span>utf8mb4<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-2-mysql和模板" tabindex="-1"><a class="header-anchor" href="#_2-2-mysql和模板"><span>2.2 mysql和模板</span></a></h3><h3 id="_2-2-1-安装" tabindex="-1"><a class="header-anchor" href="#_2-2-1-安装"><span>2.2.1 安装</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">npm i egg-mysql -S</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_2-2-2-config-default-js" tabindex="-1"><a class="header-anchor" href="#_2-2-2-config-default-js"><span>2.2.2 config.default.js</span></a></h3><p>config/config.default.js</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token comment">/* eslint valid-jsdoc: &quot;off&quot; */</span></span>
<span class="line"></span>
<span class="line"><span class="token string">&#39;use strict&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token doc-comment comment">/**</span>
<span class="line"> * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Egg<span class="token punctuation">.</span>EggAppInfo<span class="token punctuation">}</span></span> <span class="token parameter">appInfo</span> app info</span>
<span class="line"> */</span></span>
<span class="line">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token parameter">appInfo</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token doc-comment comment">/**</span>
<span class="line">   * built-in config</span>
<span class="line">   * <span class="token keyword">@type</span> <span class="token class-name"><span class="token punctuation">{</span>Egg<span class="token punctuation">.</span>EggAppConfig<span class="token punctuation">}</span></span></span>
<span class="line">   **/</span></span>
<span class="line">  <span class="token keyword">const</span> config <span class="token operator">=</span> exports <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// use for cookie sign key, should change to your own and keep security</span></span>
<span class="line">  config<span class="token punctuation">.</span>keys <span class="token operator">=</span> appInfo<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&#39;_1656089923232_2926&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// add your middleware config here</span></span>
<span class="line">  config<span class="token punctuation">.</span>middleware <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  config<span class="token punctuation">.</span>security <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">csrf</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">  config<span class="token punctuation">.</span>mysql <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 单数据库信息配置</span></span>
<span class="line">    <span class="token literal-property property">client</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">// host</span></span>
<span class="line">      <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">&#39;localhost&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token comment">// 端口号</span></span>
<span class="line">      <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token string">&#39;3306&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token comment">// 用户名</span></span>
<span class="line">      <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token string">&#39;root&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token comment">// 密码</span></span>
<span class="line">      <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">&#39;pass&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token comment">// 数据库名</span></span>
<span class="line">      <span class="token literal-property property">database</span><span class="token operator">:</span> <span class="token string">&#39;antd&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">  config<span class="token punctuation">.</span>view <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">defaultExtension</span><span class="token operator">:</span> <span class="token string">&#39;.js&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">defaultViewEngine</span><span class="token operator">:</span> <span class="token string">&#39;nunjucks&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">mapping</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token string-property property">&#39;.js&#39;</span><span class="token operator">:</span> <span class="token string">&#39;nunjucks&#39;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token comment">// add your user config here</span></span>
<span class="line">  <span class="token keyword">const</span> userConfig <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// myAppName: &#39;egg&#39;,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token operator">...</span>config<span class="token punctuation">,</span></span>
<span class="line">    <span class="token operator">...</span>userConfig<span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-2-3-plugin-js" tabindex="-1"><a class="header-anchor" href="#_2-2-3-plugin-js"><span>2.2.3 plugin.js</span></a></h3><p>config/plugin.js</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token string">&#39;use strict&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">exports<span class="token punctuation">.</span>mysql <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">enable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token keyword">package</span><span class="token operator">:</span> <span class="token string">&#39;egg-mysql&#39;</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">exports<span class="token punctuation">.</span>nunjucks <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">enable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token keyword">package</span><span class="token operator">:</span> <span class="token string">&#39;egg-view-nunjucks&#39;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-实体管理" tabindex="-1"><a class="header-anchor" href="#_3-实体管理"><span>3. 实体管理</span></a></h2><ul><li>[restful-风格的-url-定义](https://eggjs.org/zh-cn/basics/router.html</li></ul><h3 id="_3-1-base-js" tabindex="-1"><a class="header-anchor" href="#_3-1-base-js"><span>3.1 base.js</span></a></h3><p>app\\controller\\base.js</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> Controller <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;egg&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> Controller <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">async</span> <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">message<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token literal-property property">success</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">            message<span class="token punctuation">,</span></span>
<span class="line">            data</span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">async</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">const</span> <span class="token punctuation">{</span> ctx<span class="token punctuation">,</span> service <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> service<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>entity<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">index</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>query<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">&#39;查询成功&#39;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">async</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">const</span> <span class="token punctuation">{</span> ctx<span class="token punctuation">,</span> service <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">const</span> id <span class="token operator">=</span> ctx<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">const</span> entity <span class="token operator">=</span> <span class="token keyword">await</span> service<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>entity<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">&#39;查询成功&#39;</span><span class="token punctuation">,</span> entity<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">async</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">const</span> <span class="token punctuation">{</span> ctx<span class="token punctuation">,</span> service <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">const</span> entity <span class="token operator">=</span> ctx<span class="token punctuation">.</span>request<span class="token punctuation">.</span>body<span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">await</span> service<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>entity<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">&#39;创建成功&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">async</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">const</span> <span class="token punctuation">{</span> ctx<span class="token punctuation">,</span> service <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">const</span> entity <span class="token operator">=</span> ctx<span class="token punctuation">.</span>request<span class="token punctuation">.</span>body<span class="token punctuation">;</span></span>
<span class="line">        entity<span class="token punctuation">.</span>id <span class="token operator">=</span> ctx<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">await</span> service<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>entity<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">&#39;更新成功&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">async</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">const</span> <span class="token punctuation">{</span> ctx<span class="token punctuation">,</span> service <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">const</span> id <span class="token operator">=</span> ctx<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">let</span> ids <span class="token operator">=</span> ctx<span class="token punctuation">.</span>request<span class="token punctuation">.</span>body<span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>ids<span class="token punctuation">)</span> <span class="token punctuation">{</span> ids <span class="token operator">=</span> <span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token punctuation">}</span></span>
<span class="line">        <span class="token keyword">await</span> service<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>entity<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>ids<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">&#39;删除成功&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-2-entity-js" tabindex="-1"><a class="header-anchor" href="#_3-2-entity-js"><span>3.2 entity.js</span></a></h3><p>app\\controller\\entity.js</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> baseController <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./base&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> baseController <span class="token punctuation">{</span></span>
<span class="line">    entity <span class="token operator">=</span> <span class="token string">&#39;entity&#39;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-3-home-js" tabindex="-1"><a class="header-anchor" href="#_3-3-home-js"><span>3.3 home.js</span></a></h3><p>app\\controller\\home.js</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token string">&#39;use strict&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> Controller <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;egg&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Controller<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">HomeController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">async</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> <span class="token punctuation">{</span> ctx <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span></span>
<span class="line">    ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token string">&#39;hi, egg&#39;</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> HomeController<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-4-menu-js" tabindex="-1"><a class="header-anchor" href="#_3-4-menu-js"><span>3.4 menu.js</span></a></h3><p>app\\controller\\menu.js</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> baseController <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./base&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> baseController <span class="token punctuation">{</span></span>
<span class="line">    entity <span class="token operator">=</span> <span class="token string">&#39;menu&#39;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-5-base-js" tabindex="-1"><a class="header-anchor" href="#_3-5-base-js"><span>3.5 base.js</span></a></h3><p>app\\service\\base.js</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> Service <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;egg&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> Service <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">async</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token parameter">query</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">const</span> <span class="token punctuation">{</span> app <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">let</span> <span class="token punctuation">{</span> current<span class="token punctuation">,</span> pageSize<span class="token punctuation">,</span> sort<span class="token punctuation">,</span> order<span class="token punctuation">,</span> created<span class="token punctuation">,</span> <span class="token operator">...</span>where <span class="token punctuation">}</span> <span class="token operator">=</span> query<span class="token punctuation">;</span></span>
<span class="line">        current <span class="token operator">=</span> <span class="token function">isNaN</span><span class="token punctuation">(</span>current<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token function">Number</span><span class="token punctuation">(</span>current<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        pageSize <span class="token operator">=</span> <span class="token function">isNaN</span><span class="token punctuation">(</span>pageSize<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">10</span> <span class="token operator">:</span> <span class="token function">Number</span><span class="token punctuation">(</span>pageSize<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">const</span> offset <span class="token operator">=</span> <span class="token punctuation">(</span>current <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> pageSize<span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">let</span> <span class="token punctuation">{</span> fields <span class="token operator">=</span> <span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> page <span class="token operator">=</span> <span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> record <span class="token operator">=</span> <span class="token string">&quot;{}&quot;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> app<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;entity&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>entity <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">        fields <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>fields<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        page <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        record <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>record<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>created<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">const</span> filterFields <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>where<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">=&#39;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&#39;</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">const</span> <span class="token punctuation">[</span>startTime<span class="token punctuation">,</span> endTime<span class="token punctuation">]</span> <span class="token operator">=</span> created<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;,&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            filterFields<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">created between &#39;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>startTime<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&#39; and &#39;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>endTime<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&#39;</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">let</span> filterSQL <span class="token operator">=</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">if</span> <span class="token punctuation">(</span>filterFields<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                filterSQL <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">where </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>filterFields<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39; and &#39;</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">            <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> total <span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> app<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">SELECT count(*) as total FROM </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token keyword">this</span><span class="token punctuation">.</span>entity<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>filterSQL<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">if</span> <span class="token punctuation">(</span>sort <span class="token operator">&amp;&amp;</span> order<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                filterSQL <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string"> order by </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>sort<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>order<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">            <span class="token keyword">if</span> <span class="token punctuation">(</span>current <span class="token operator">&amp;&amp;</span> pageSize<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                filterSQL <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string"> limit </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>offset<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>pageSize<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">            <span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token keyword">await</span> app<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">SELECT * FROM </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token keyword">this</span><span class="token punctuation">.</span>entity<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>filterSQL<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">return</span> <span class="token punctuation">{</span></span>
<span class="line">                list<span class="token punctuation">,</span></span>
<span class="line">                total<span class="token punctuation">,</span></span>
<span class="line">                current<span class="token punctuation">,</span></span>
<span class="line">                pageSize<span class="token punctuation">,</span></span>
<span class="line">                fields<span class="token punctuation">,</span></span>
<span class="line">                page<span class="token punctuation">,</span></span>
<span class="line">                record</span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span> where <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">if</span> <span class="token punctuation">(</span>pageSize<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                options<span class="token punctuation">.</span>offset <span class="token operator">=</span> offset<span class="token punctuation">;</span></span>
<span class="line">                options<span class="token punctuation">.</span>limit <span class="token operator">=</span> pageSize<span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">            <span class="token keyword">if</span> <span class="token punctuation">(</span>sort <span class="token operator">&amp;&amp;</span> order<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                options<span class="token punctuation">.</span>orders <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>sort<span class="token punctuation">,</span> order<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">            <span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token keyword">await</span> app<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>entity<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">const</span> total <span class="token operator">=</span> <span class="token keyword">await</span> app<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>entity<span class="token punctuation">,</span> where<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">return</span> <span class="token punctuation">{</span></span>
<span class="line">                list<span class="token punctuation">,</span></span>
<span class="line">                total<span class="token punctuation">,</span></span>
<span class="line">                current<span class="token punctuation">,</span></span>
<span class="line">                pageSize<span class="token punctuation">,</span></span>
<span class="line">                fields<span class="token punctuation">,</span></span>
<span class="line">                page<span class="token punctuation">,</span></span>
<span class="line">                record</span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">async</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token parameter">entity</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">const</span> <span class="token punctuation">{</span> app <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span></span>
<span class="line">        entity<span class="token punctuation">.</span>created <span class="token operator">=</span> app<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>literals<span class="token punctuation">.</span>now</span>
<span class="line">        entity<span class="token punctuation">.</span>updated <span class="token operator">=</span> app<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>literals<span class="token punctuation">.</span>now</span>
<span class="line">        <span class="token keyword">delete</span> entity<span class="token punctuation">.</span>id<span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>app<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>entity<span class="token punctuation">,</span> entity<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">async</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">let</span> entity <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>app<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>entity<span class="token punctuation">,</span> <span class="token punctuation">{</span> id <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">return</span> entity</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">async</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token parameter">entity</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>app<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>entity<span class="token punctuation">,</span> entity<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">async</span> <span class="token keyword">delete</span><span class="token punctuation">(</span>ids<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>app<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>entity<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> ids <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-6-entity-js" tabindex="-1"><a class="header-anchor" href="#_3-6-entity-js"><span>3.6 entity.js</span></a></h3><p>app\\service\\entity.js</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> BaseService <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./base&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs-extra&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> core <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;@babel/core&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> types <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;@babel/types&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">let</span> <span class="token function-variable function">routerPlugin</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">visitor</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">BlockStatement</span><span class="token punctuation">(</span><span class="token parameter">path</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">let</span> <span class="token punctuation">{</span> node <span class="token punctuation">}</span> <span class="token operator">=</span> path<span class="token punctuation">;</span></span>
<span class="line">            node<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">                <span class="token operator">...</span>node<span class="token punctuation">.</span>body<span class="token punctuation">,</span></span>
<span class="line">                types<span class="token punctuation">.</span><span class="token function">expressionStatement</span><span class="token punctuation">(</span></span>
<span class="line">                    types<span class="token punctuation">.</span><span class="token function">callExpression</span><span class="token punctuation">(</span></span>
<span class="line">                        types<span class="token punctuation">.</span><span class="token function">memberExpression</span><span class="token punctuation">(</span></span>
<span class="line">                            types<span class="token punctuation">.</span><span class="token function">identifier</span><span class="token punctuation">(</span><span class="token string">&#39;router&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">                            types<span class="token punctuation">.</span><span class="token function">identifier</span><span class="token punctuation">(</span><span class="token string">&#39;resources&#39;</span><span class="token punctuation">)</span></span>
<span class="line">                        <span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">                        <span class="token punctuation">[</span></span>
<span class="line">                            types<span class="token punctuation">.</span><span class="token function">stringLiteral</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">                            types<span class="token punctuation">.</span><span class="token function">stringLiteral</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">                            types<span class="token punctuation">.</span><span class="token function">memberExpression</span><span class="token punctuation">(</span></span>
<span class="line">                                types<span class="token punctuation">.</span><span class="token function">identifier</span><span class="token punctuation">(</span><span class="token string">&#39;controller&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">                                types<span class="token punctuation">.</span><span class="token function">identifier</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span></span>
<span class="line">                            <span class="token punctuation">)</span></span>
<span class="line">                        <span class="token punctuation">]</span></span>
<span class="line">                    <span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> BaseService <span class="token punctuation">{</span></span>
<span class="line">    entity <span class="token operator">=</span> <span class="token string">&#39;entity&#39;</span></span>
<span class="line">    <span class="token keyword">async</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token parameter">entity</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">const</span> <span class="token punctuation">{</span> app <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">const</span> fields <span class="token operator">=</span> entity<span class="token punctuation">.</span>fields<span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> entity<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">switch</span> <span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token keyword">case</span> <span class="token string">&#39;fields&#39;</span><span class="token operator">:</span></span>
<span class="line">                <span class="token keyword">case</span> <span class="token string">&#39;page&#39;</span><span class="token operator">:</span></span>
<span class="line">                <span class="token keyword">case</span> <span class="token string">&#39;record&#39;</span><span class="token operator">:</span></span>
<span class="line">                    entity<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>entity<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                    <span class="token keyword">break</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token keyword">default</span><span class="token operator">:</span></span>
<span class="line">                    <span class="token keyword">break</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        entity<span class="token punctuation">.</span>created <span class="token operator">=</span> app<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>literals<span class="token punctuation">.</span>now<span class="token punctuation">;</span></span>
<span class="line">        entity<span class="token punctuation">.</span>updated <span class="token operator">=</span> app<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>literals<span class="token punctuation">.</span>now<span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">const</span> insertResult <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>app<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>entity<span class="token punctuation">,</span> entity<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">let</span> existTables <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>app<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&#39;information_schema.tables&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">where</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token constant">TABLE_SCHEMA</span><span class="token operator">:</span> <span class="token string">&#39;antd&#39;</span><span class="token punctuation">,</span> <span class="token constant">TABLE_NAME</span><span class="token operator">:</span> entity<span class="token punctuation">.</span>name <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>existTables<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">const</span> columns <span class="token operator">=</span> fields<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>getColumn<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">const</span> sql <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">CREATE TABLE </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>entity<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">(</span>
<span class="line">                id int(11) NOT NULL AUTO_INCREMENT,</span>
<span class="line">                </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>columns<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;,&#39;</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span>
<span class="line">                created DATETIME,</span>
<span class="line">                updated DATETIME,</span>
<span class="line">                PRIMARY KEY(id)</span>
<span class="line">            ) ENGINE = InnoDB  DEFAULT CHARSET = utf8mb4;</span>
<span class="line">            </span><span class="token template-punctuation string">\`</span></span></span>
<span class="line">            <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>app<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token comment">//添加菜单</span></span>
<span class="line">        <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>app<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">&#39;menu&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token literal-property property">name</span><span class="token operator">:</span> entity<span class="token punctuation">.</span>title<span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">/entity/view?id=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>insertResult<span class="token punctuation">.</span>insertId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;name=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>entity<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">created</span><span class="token operator">:</span> app<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>literals<span class="token punctuation">.</span>now<span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">updated</span><span class="token operator">:</span> app<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>literals<span class="token punctuation">.</span>now</span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token comment">//生成代码</span></span>
<span class="line">        <span class="token keyword">const</span> controllerTemplate <span class="token operator">=</span> <span class="token keyword">await</span> fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;../view/controller.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#39;utf8&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">const</span> serviceTemplate <span class="token operator">=</span> <span class="token keyword">await</span> fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;../view/service.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#39;utf8&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">const</span> controller <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span><span class="token function">renderString</span><span class="token punctuation">(</span>controllerTemplate<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> entity<span class="token punctuation">.</span>name <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">const</span> service <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span><span class="token function">renderString</span><span class="token punctuation">(</span>serviceTemplate<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> entity<span class="token punctuation">.</span>name <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">await</span> fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">../controller/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>entity<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.js</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> controller<span class="token punctuation">,</span> <span class="token string">&#39;utf8&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">await</span> fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">../service/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>entity<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.js</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> service<span class="token punctuation">,</span> <span class="token string">&#39;utf8&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">const</span> routerSource <span class="token operator">=</span> <span class="token keyword">await</span> fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;../router.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#39;utf8&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">let</span> targetSource <span class="token operator">=</span> <span class="token keyword">await</span> core<span class="token punctuation">.</span><span class="token function">transformAsync</span><span class="token punctuation">(</span>routerSource<span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">routerPlugin</span><span class="token punctuation">(</span>entity<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">]</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">await</span> fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;../router.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> targetSource<span class="token punctuation">.</span>code<span class="token punctuation">,</span> <span class="token string">&#39;utf8&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">async</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">const</span> entity <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>app<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>entity<span class="token punctuation">,</span> <span class="token punctuation">{</span> id <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> entity<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">switch</span> <span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token keyword">case</span> <span class="token string">&#39;fields&#39;</span><span class="token operator">:</span></span>
<span class="line">                <span class="token keyword">case</span> <span class="token string">&#39;page&#39;</span><span class="token operator">:</span></span>
<span class="line">                <span class="token keyword">case</span> <span class="token string">&#39;record&#39;</span><span class="token operator">:</span></span>
<span class="line">                    entity<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>entity<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                    <span class="token keyword">break</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token keyword">default</span><span class="token operator">:</span></span>
<span class="line">                    <span class="token keyword">break</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token keyword">return</span> entity<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">async</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token parameter">entity</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">const</span> fields <span class="token operator">=</span> entity<span class="token punctuation">.</span>fields<span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> entity<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">switch</span> <span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token keyword">case</span> <span class="token string">&#39;fields&#39;</span><span class="token operator">:</span></span>
<span class="line">                <span class="token keyword">case</span> <span class="token string">&#39;page&#39;</span><span class="token operator">:</span></span>
<span class="line">                <span class="token keyword">case</span> <span class="token string">&#39;record&#39;</span><span class="token operator">:</span></span>
<span class="line">                    entity<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>entity<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                    <span class="token keyword">break</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token keyword">default</span><span class="token operator">:</span></span>
<span class="line">                    <span class="token keyword">break</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>app<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>entity<span class="token punctuation">,</span> entity<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">const</span> columns <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>app<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&#39;information_schema.COLUMNS&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">where</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token constant">TABLE_SCHEMA</span><span class="token operator">:</span> <span class="token string">&#39;antd&#39;</span><span class="token punctuation">,</span> <span class="token constant">TABLE_NAME</span><span class="token operator">:</span> entity<span class="token punctuation">.</span>name <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">const</span> newFields <span class="token operator">=</span> fields<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">field</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span>columns<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">column</span> <span class="token operator">=&gt;</span> column<span class="token punctuation">.</span><span class="token constant">COLUMN_NAME</span> <span class="token operator">===</span> field<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>newFields<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">const</span> newColumns <span class="token operator">=</span> newFields<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>getColumn<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">const</span> sql <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">ALTER TABLE </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>entity<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> ADD (</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>newColumns<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;,&#39;</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">);</span><span class="token template-punctuation string">\`</span></span></span>
<span class="line">            <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>app<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">getColumn</span><span class="token punctuation">(</span><span class="token parameter">field</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> dataType <span class="token operator">=</span> <span class="token string">&#39;varchar(255)&#39;</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">switch</span> <span class="token punctuation">(</span>field<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">case</span> <span class="token string">&#39;number&#39;</span><span class="token operator">:</span></span>
<span class="line">            dataType <span class="token operator">=</span> <span class="token string">&#39;int(11)&#39;</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">break</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">case</span> <span class="token string">&#39;select&#39;</span><span class="token operator">:</span></span>
<span class="line">            dataType <span class="token operator">=</span> <span class="token string">&#39;int(11)&#39;</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">break</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">case</span> <span class="token string">&#39;datetime&#39;</span><span class="token operator">:</span></span>
<span class="line">            dataType <span class="token operator">=</span> <span class="token string">&#39;datetime&#39;</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">break</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">case</span> <span class="token string">&#39;switch&#39;</span><span class="token operator">:</span></span>
<span class="line">            dataType <span class="token operator">=</span> <span class="token string">&#39;tinyint(1)&#39;</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">default</span><span class="token operator">:</span></span>
<span class="line">            <span class="token keyword">break</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>field<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>dataType<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-7-menu-js" tabindex="-1"><a class="header-anchor" href="#_3-7-menu-js"><span>3.7 menu.js</span></a></h3><p>app\\service\\menu.js</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> BaseService <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./base&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> BaseService <span class="token punctuation">{</span></span>
<span class="line">    entity <span class="token operator">=</span> <span class="token string">&#39;menu&#39;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-8-controller-js" tabindex="-1"><a class="header-anchor" href="#_3-8-controller-js"><span>3.8 controller.js</span></a></h3><p>app\\view\\controller.js</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> baseController <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./base&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> baseController <span class="token punctuation">{</span></span>
<span class="line">    entity <span class="token operator">=</span> <span class="token string">&#39;{{name}}&#39;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-9-service-js" tabindex="-1"><a class="header-anchor" href="#_3-9-service-js"><span>3.9 service.js</span></a></h3><p>app\\view\\service.js</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> BaseService <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./base&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> BaseService <span class="token punctuation">{</span></span>
<span class="line">    entity <span class="token operator">=</span> <span class="token string">&#39;{{name}}&#39;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-10-app-router-js" tabindex="-1"><a class="header-anchor" href="#_3-10-app-router-js"><span>3.10 app\\router.js</span></a></h3><p>app\\router.js</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token parameter">app</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">{</span></span>
<span class="line">    router<span class="token punctuation">,</span></span>
<span class="line">    controller</span>
<span class="line">  <span class="token punctuation">}</span> <span class="token operator">=</span> app<span class="token punctuation">;</span></span>
<span class="line">  router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span> controller<span class="token punctuation">.</span>home<span class="token punctuation">.</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  router<span class="token punctuation">.</span><span class="token function">resources</span><span class="token punctuation">(</span><span class="token string">&#39;entity&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;/entity&#39;</span><span class="token punctuation">,</span> controller<span class="token punctuation">.</span>entity<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  router<span class="token punctuation">.</span><span class="token function">resources</span><span class="token punctuation">(</span><span class="token string">&#39;menu&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;/menu&#39;</span><span class="token punctuation">,</span> controller<span class="token punctuation">.</span>menu<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-11-config-default-js" tabindex="-1"><a class="header-anchor" href="#_3-11-config-default-js"><span>3.11 config.default.js</span></a></h3><p>config\\config.default.js</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token comment">/* eslint valid-jsdoc: &quot;off&quot; */</span></span>
<span class="line"></span>
<span class="line"><span class="token string">&#39;use strict&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token doc-comment comment">/**</span>
<span class="line"> * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Egg<span class="token punctuation">.</span>EggAppInfo<span class="token punctuation">}</span></span> <span class="token parameter">appInfo</span> app info</span>
<span class="line"> */</span></span>
<span class="line">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token parameter">appInfo</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token doc-comment comment">/**</span>
<span class="line">   * built-in config</span>
<span class="line">   * <span class="token keyword">@type</span> <span class="token class-name"><span class="token punctuation">{</span>Egg<span class="token punctuation">.</span>EggAppConfig<span class="token punctuation">}</span></span></span>
<span class="line">   **/</span></span>
<span class="line">  <span class="token keyword">const</span> config <span class="token operator">=</span> exports <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// use for cookie sign key, should change to your own and keep security</span></span>
<span class="line">  config<span class="token punctuation">.</span>keys <span class="token operator">=</span> appInfo<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&#39;_1656089923232_2926&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// add your middleware config here</span></span>
<span class="line">  config<span class="token punctuation">.</span>middleware <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  config<span class="token punctuation">.</span>security <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">csrf</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">  config<span class="token punctuation">.</span>mysql <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 单数据库信息配置</span></span>
<span class="line">    <span class="token literal-property property">client</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">// host</span></span>
<span class="line">      <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">&#39;localhost&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token comment">// 端口号</span></span>
<span class="line">      <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token string">&#39;3306&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token comment">// 用户名</span></span>
<span class="line">      <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token string">&#39;root&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token comment">// 密码</span></span>
<span class="line">      <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">&#39;pass&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token comment">// 数据库名</span></span>
<span class="line">      <span class="token literal-property property">database</span><span class="token operator">:</span> <span class="token string">&#39;antd&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">  config<span class="token punctuation">.</span>view <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">defaultExtension</span><span class="token operator">:</span> <span class="token string">&#39;.js&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">defaultViewEngine</span><span class="token operator">:</span> <span class="token string">&#39;nunjucks&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">mapping</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token string-property property">&#39;.js&#39;</span><span class="token operator">:</span> <span class="token string">&#39;nunjucks&#39;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token comment">// add your user config here</span></span>
<span class="line">  <span class="token keyword">const</span> userConfig <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// myAppName: &#39;egg&#39;,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token operator">...</span>config<span class="token punctuation">,</span></span>
<span class="line">    <span class="token operator">...</span>userConfig<span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-12-config-plugin-js" tabindex="-1"><a class="header-anchor" href="#_3-12-config-plugin-js"><span>3.12 config\\plugin.js</span></a></h3><p>config\\plugin.js</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token string">&#39;use strict&#39;</span><span class="token punctuation">;</span></span>
<span class="line">exports<span class="token punctuation">.</span>mysql <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">enable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token keyword">package</span><span class="token operator">:</span> <span class="token string">&#39;egg-mysql&#39;</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">exports<span class="token punctuation">.</span>nunjucks <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">enable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token keyword">package</span><span class="token operator">:</span> <span class="token string">&#39;egg-view-nunjucks&#39;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_1-umi4-formily2" tabindex="-1"><a class="header-anchor" href="#_1-umi4-formily2"><span>1.UMi4+Formily2</span></a></h2><ul><li><a href="https://umijs.org/" target="_blank" rel="noopener noreferrer">Umi4</a>是一个企业级开发框架</li><li><a href="https://formilyjs.org/" target="_blank" rel="noopener noreferrer">formilyjs</a>是阿里巴巴统一前端表单解决方案</li></ul><h2 id="_2-创建项目" tabindex="-1"><a class="header-anchor" href="#_2-创建项目"><span>2.创建项目</span></a></h2><ul><li><a href="https://www.pnpm.cn" target="_blank" rel="noopener noreferrer">pnpm dlx</a>从源中获取包而不将其安装为依赖项，热加载，并运行它公开的任何默认命令二进制文件</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">mkdir cms-front &amp;&amp; cd cms-front </span>
<span class="line">pnpm dlx create-umi@latest</span>
<span class="line">cnpm i ahooks query-string @formily/core @formily/react @formily/antd --save</span>
<span class="line">pnpm dev</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-配置项目" tabindex="-1"><a class="header-anchor" href="#_3-配置项目"><span>3.配置项目</span></a></h2><h3 id="_3-1-umirc-ts" tabindex="-1"><a class="header-anchor" href="#_3-1-umirc-ts"><span>3.1 .umirc.ts</span></a></h3><p>.umirc.ts</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">import { defineConfig } from &#39;@umijs/max&#39;;</span>
<span class="line">export default defineConfig({</span>
<span class="line">  antd: {},</span>
<span class="line">  access: {},</span>
<span class="line">  model: {},</span>
<span class="line">  initialState: {},</span>
<span class="line">+ request: { dataField: &#39;data&#39; },</span>
<span class="line">  layout: {</span>
<span class="line">+   title: &#39;CMS&#39;,</span>
<span class="line">  },</span>
<span class="line">  routes: [</span>
<span class="line">    {</span>
<span class="line">      path: &#39;/&#39;,</span>
<span class="line">      redirect: &#39;/home&#39;,</span>
<span class="line">    },</span>
<span class="line">    {</span>
<span class="line">      name: &#39;首页&#39;,</span>
<span class="line">      path: &#39;/home&#39;,</span>
<span class="line">      component: &#39;./Home&#39;,</span>
<span class="line">    },</span>
<span class="line">+   {</span>
<span class="line">+     name: &#39;实体管理&#39;,</span>
<span class="line">+     path: &#39;/entity&#39;,</span>
<span class="line">+     component: &#39;./Table&#39;,</span>
<span class="line">+   }</span>
<span class="line">  ],</span>
<span class="line">  npmClient: &#39;cnpm&#39;,</span>
<span class="line">+ proxy: {</span>
<span class="line">+   &#39;/api&#39;: {</span>
<span class="line">+     target: &#39;http://localhost:7001&#39;,</span>
<span class="line">+     pathRewrite: {</span>
<span class="line">+       &quot;^/api&quot;: &quot;&quot;</span>
<span class="line">+     },</span>
<span class="line">+     changeOrigin: true</span>
<span class="line">+   }</span>
<span class="line">+ }</span>
<span class="line">});</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-2-src-app-ts" tabindex="-1"><a class="header-anchor" href="#_3-2-src-app-ts"><span>3.2 src\\app.ts</span></a></h3><p>src\\app.ts</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">+import { request } from &#39;umi&#39;;</span>
<span class="line">export async function getInitialState(): Promise&lt;{ name: string }&gt; {</span>
<span class="line">+  return { name: &#39;CMS&#39; };</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">export const layout = () =&gt; {</span>
<span class="line">  return {</span>
<span class="line">    logo: &#39;https://img.alicdn.com/tfs/TB1YHEpwUT1gK0jSZFhXXaAtVXa-28-27.svg&#39;,</span>
<span class="line">    menu: {</span>
<span class="line">      locale: false,</span>
<span class="line">+     request: () =&gt; request(&#39;/api/menu&#39;).then(res =&gt; res.data.list)</span>
<span class="line">    },</span>
<span class="line">  };</span>
<span class="line">};</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-3-tsconfig-json" tabindex="-1"><a class="header-anchor" href="#_3-3-tsconfig-json"><span>3.3 tsconfig.json</span></a></h3><p>tsconfig.json</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">{</span>
<span class="line">  &quot;extends&quot;: &quot;./src/.umi/tsconfig.json&quot;,</span>
<span class="line">+  &quot;compilerOptions&quot;: {</span>
<span class="line">+    &quot;strict&quot;: false,</span>
<span class="line">+    &quot;noImplicitAny&quot;: false</span>
<span class="line">+  }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-查询删除实体" tabindex="-1"><a class="header-anchor" href="#_4-查询删除实体"><span>4.查询删除实体</span></a></h2><h3 id="_4-1-umirc-ts" tabindex="-1"><a class="header-anchor" href="#_4-1-umirc-ts"><span>4.1 .umirc.ts</span></a></h3><p>.umirc.ts</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">    {</span>
<span class="line">      name: &#39;实体管理&#39;,</span>
<span class="line">      path: &#39;/entity&#39;,</span>
<span class="line">+     component: &#39;./Entity&#39;,</span>
<span class="line">    }</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-2-src-pages-entity-index-tsx" tabindex="-1"><a class="header-anchor" href="#_4-2-src-pages-entity-index-tsx"><span>4.2 src\\pages\\Entity\\index.tsx</span></a></h3><p>src\\pages\\Entity\\index.tsx</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Table<span class="token punctuation">,</span> Card<span class="token punctuation">,</span> Row<span class="token punctuation">,</span> Col<span class="token punctuation">,</span> Pagination<span class="token punctuation">,</span> Space<span class="token punctuation">,</span> Modal<span class="token punctuation">,</span> List<span class="token punctuation">,</span> message<span class="token punctuation">,</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;antd&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> createForm <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@formily/core&#39;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> createSchemaField <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@formily/react&#39;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Form<span class="token punctuation">,</span> FormItem<span class="token punctuation">,</span> Input<span class="token punctuation">,</span> FormGrid<span class="token punctuation">,</span> Submit<span class="token punctuation">,</span> Reset<span class="token punctuation">,</span> DatePicker<span class="token punctuation">,</span> FormButtonGroup <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@formily/antd&#39;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> FooterToolbar<span class="token punctuation">,</span> PageContainer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@ant-design/pro-components&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> request<span class="token punctuation">,</span> useRequest<span class="token punctuation">,</span> history <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;umi&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> useToggle <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;ahooks&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> moment <span class="token keyword">from</span> <span class="token string">&#39;moment&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> ExclamationCircleOutlined<span class="token punctuation">,</span> SearchOutlined <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@ant-design/icons&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> Qs <span class="token keyword">from</span> <span class="token string">&#39;query-string&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> formToValues <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/utils/transformer/fieldValue&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> searchForm <span class="token operator">=</span> <span class="token function">createForm</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">validateFirst</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">const</span> SchemaField <span class="token operator">=</span> <span class="token function">createSchemaField</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    FormItem<span class="token punctuation">,</span></span>
<span class="line">    Input<span class="token punctuation">,</span></span>
<span class="line">    FormGrid<span class="token punctuation">,</span></span>
<span class="line">    DatePicker<span class="token punctuation">,</span></span>
<span class="line">    FormButtonGroup</span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token function-variable function">Entity</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> current<span class="token punctuation">,</span> pageSize <span class="token punctuation">}</span><span class="token punctuation">,</span> setPageConfig<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">current</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">pageSize</span><span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>sorter<span class="token punctuation">,</span> setSorter<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token operator">&lt;</span>any<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>searchVisible<span class="token punctuation">,</span> <span class="token punctuation">{</span> toggle <span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useToggle</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>selectedRowKeys<span class="token punctuation">,</span> setSelectedRowKeys<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>selectedRows<span class="token punctuation">,</span> setSelectedRows<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> loadQuery <span class="token operator">=</span> <span class="token function">useRequest</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">params <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span></span>
<span class="line">    <span class="token function">request</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">/api/entity</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        current<span class="token punctuation">,</span></span>
<span class="line">        pageSize<span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">sort</span><span class="token operator">:</span> sorter<span class="token operator">?.</span>field<span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">order</span><span class="token operator">:</span> sorter<span class="token operator">?.</span>order<span class="token operator">?.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token operator">...</span>params</span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token function">paramsSerializer</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> Qs<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>params<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">arrayFormat</span><span class="token operator">:</span> <span class="token string">&#39;comma&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">skipEmptyString</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">skipNull</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">refreshDeps</span><span class="token operator">:</span> <span class="token punctuation">[</span>current<span class="token punctuation">,</span> pageSize<span class="token punctuation">,</span> sorter<span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> deleteQuery <span class="token operator">=</span> <span class="token function">useRequest</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">ids</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span></span>
<span class="line">    <span class="token function">request</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">/api/entity/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>ids<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&#39;DELETE&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">data</span><span class="token operator">:</span> ids</span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">manual</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">onSuccess</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      loadQuery<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">formatResult</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">return</span> res<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token function-variable function">deleteRecords</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">records</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    Modal<span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;确定删除以下记录吗?&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token operator">&lt;</span>ExclamationCircleOutlined <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token operator">&lt;</span>List</span>
<span class="line">          bordered</span>
<span class="line">          dataSource<span class="token operator">=</span><span class="token punctuation">{</span>records<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">record</span> <span class="token operator">=&gt;</span> record<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">}</span></span>
<span class="line">          renderItem<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">item</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span></span>
<span class="line">            <span class="token operator">&lt;</span>List<span class="token punctuation">.</span>Item<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>List<span class="token punctuation">.</span>Item<span class="token operator">&gt;</span></span>
<span class="line">          <span class="token punctuation">)</span><span class="token punctuation">}</span></span>
<span class="line">        <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">      <span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">okText</span><span class="token operator">:</span> <span class="token string">&#39;是&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">cancelText</span><span class="token operator">:</span> <span class="token string">&#39;否&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">okType</span><span class="token operator">:</span> <span class="token string">&#39;danger&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token function">onOk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> deleteQuery<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>records<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">record</span> <span class="token operator">=&gt;</span> record<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">const</span> rowSelection <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    selectedRowKeys<span class="token punctuation">,</span></span>
<span class="line">    <span class="token function-variable function">onChange</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">selectedRowKeys<span class="token punctuation">,</span> selectedRows</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function">setSelectedRowKeys</span><span class="token punctuation">(</span>selectedRowKeys<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token function">setSelectedRows</span><span class="token punctuation">(</span>selectedRows<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token function-variable function">handleSubmit</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">values</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    loadQuery<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token function">formToValues</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">const</span> columns <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;ID&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">dataIndex</span><span class="token operator">:</span> <span class="token string">&#39;id&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">&#39;id&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">sorter</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;名称&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">dataIndex</span><span class="token operator">:</span> <span class="token string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">&#39;name&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;标题&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">dataIndex</span><span class="token operator">:</span> <span class="token string">&#39;title&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">&#39;title&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;操作&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">dataIndex</span><span class="token operator">:</span> <span class="token string">&#39;operations&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">&#39;operations&#39;</span><span class="token punctuation">,</span> <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> record</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token operator">&lt;</span>Space<span class="token operator">&gt;</span></span>
<span class="line">          <span class="token operator">&lt;</span>Button</span>
<span class="line">            type<span class="token operator">=</span><span class="token string">&quot;default&quot;</span></span>
<span class="line">            onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">/entity/edit?id=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>record<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
<span class="line">          <span class="token operator">&gt;</span>编辑<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span></span>
<span class="line">          <span class="token operator">&lt;</span>Button</span>
<span class="line">            type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span></span>
<span class="line">            onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">deleteRecords</span><span class="token punctuation">(</span><span class="token punctuation">[</span>record<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
<span class="line">          <span class="token operator">&gt;</span>删除<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span><span class="token operator">/</span>Space<span class="token operator">&gt;</span></span>
<span class="line">      <span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">]</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token operator">&lt;</span>PageContainer<span class="token operator">&gt;</span></span>
<span class="line">      <span class="token punctuation">{</span></span>
<span class="line">        searchVisible <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span></span>
<span class="line">          <span class="token operator">&lt;</span>Card key<span class="token operator">=</span><span class="token string">&quot;search&quot;</span><span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span>Form</span>
<span class="line">              layout<span class="token operator">=</span><span class="token string">&quot;inline&quot;</span></span>
<span class="line">              form<span class="token operator">=</span><span class="token punctuation">{</span>searchForm<span class="token punctuation">}</span></span>
<span class="line">              onAutoSubmit<span class="token operator">=</span><span class="token punctuation">{</span>handleSubmit<span class="token punctuation">}</span></span>
<span class="line">            <span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span>SchemaField<span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                  x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;FormGrid&quot;</span></span>
<span class="line">                  x<span class="token operator">-</span>component<span class="token operator">-</span>props<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span></span>
<span class="line">                    <span class="token literal-property property">maxColumns</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span></span>
<span class="line">                    <span class="token literal-property property">minColumns</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span></span>
<span class="line">                  <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">                <span class="token operator">&gt;</span></span>
<span class="line">                  <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>String</span>
<span class="line">                    name<span class="token operator">=</span><span class="token string">&quot;name&quot;</span></span>
<span class="line">                    title<span class="token operator">=</span><span class="token string">&quot;名称&quot;</span></span>
<span class="line">                    x<span class="token operator">-</span>decorator<span class="token operator">=</span><span class="token string">&quot;FormItem&quot;</span></span>
<span class="line">                    x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;Input&quot;</span></span>
<span class="line">                  <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">                  <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>String</span>
<span class="line">                    name<span class="token operator">=</span><span class="token string">&quot;title&quot;</span></span>
<span class="line">                    title<span class="token operator">=</span><span class="token string">&quot;标题&quot;</span></span>
<span class="line">                    x<span class="token operator">-</span>decorator<span class="token operator">=</span><span class="token string">&quot;FormItem&quot;</span></span>
<span class="line">                    x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;Input&quot;</span></span>
<span class="line">                  <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">                  <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>String</span>
<span class="line">                    name<span class="token operator">=</span><span class="token string">&quot;created&quot;</span></span>
<span class="line">                    title<span class="token operator">=</span><span class="token string">&quot;创建时间&quot;</span></span>
<span class="line">                    x<span class="token operator">-</span>decorator<span class="token operator">=</span><span class="token string">&quot;FormItem&quot;</span></span>
<span class="line">                    x<span class="token operator">-</span>decorator<span class="token operator">-</span>props<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">gridSpan</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">                    x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;DatePicker.RangePicker&quot;</span></span>
<span class="line">                    x<span class="token operator">-</span>component<span class="token operator">-</span>props<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span></span>
<span class="line">                      <span class="token literal-property property">showTime</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">ranges</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">                        <span class="token string-property property">&#39;今天&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">moment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">startOf</span><span class="token punctuation">(</span><span class="token string">&#39;day&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">moment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">                        <span class="token string-property property">&#39;本月&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">moment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">startOf</span><span class="token punctuation">(</span><span class="token string">&#39;month&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">moment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">endOf</span><span class="token punctuation">(</span><span class="token string">&#39;month&#39;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">                        <span class="token string-property property">&#39;上周&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">moment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subtract</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token string">&#39;days&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">moment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">                        <span class="token string-property property">&#39;上月&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">moment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subtract</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;months&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">startOf</span><span class="token punctuation">(</span><span class="token string">&#39;month&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">moment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subtract</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;months&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">endOf</span><span class="token punctuation">(</span><span class="token string">&#39;month&#39;</span><span class="token punctuation">)</span><span class="token punctuation">]</span></span>
<span class="line">                      <span class="token punctuation">}</span></span>
<span class="line">                    <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">                  <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Void<span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span>FormButtonGroup<span class="token punctuation">.</span>FormItem<span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>Submit<span class="token operator">&gt;</span></span>
<span class="line">                  查询</span>
<span class="line">                <span class="token operator">&lt;</span><span class="token operator">/</span>Submit<span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>Reset <span class="token operator">&gt;</span></span>
<span class="line">                  重置</span>
<span class="line">                <span class="token operator">&lt;</span><span class="token operator">/</span>Reset<span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span><span class="token operator">/</span>FormButtonGroup<span class="token punctuation">.</span>FormItem<span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span><span class="token operator">/</span>Form<span class="token operator">&gt;</span></span>
<span class="line">          <span class="token operator">&lt;</span><span class="token operator">/</span>Card<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">      <span class="token operator">&lt;</span>Card<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span>Row<span class="token operator">&gt;</span></span>
<span class="line">          <span class="token operator">&lt;</span>Col xs<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">24</span><span class="token punctuation">}</span> style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">textAlign</span><span class="token operator">:</span> <span class="token string">&#39;right&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token string">&#39;10px&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span>Space<span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span>Button</span>
<span class="line">                shape<span class="token operator">=</span><span class="token string">&#39;circle&#39;</span></span>
<span class="line">                icon<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>SearchOutlined <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span></span>
<span class="line">                onClick<span class="token operator">=</span><span class="token punctuation">{</span>toggle<span class="token punctuation">}</span></span>
<span class="line">                type<span class="token operator">=</span><span class="token punctuation">{</span>searchVisible <span class="token operator">?</span> <span class="token string">&#39;primary&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;default&#39;</span><span class="token punctuation">}</span></span>
<span class="line">              <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span>Button</span>
<span class="line">                type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span></span>
<span class="line">                onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#39;/entity/edit&#39;</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
<span class="line">              <span class="token operator">&gt;</span>添加<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span><span class="token operator">/</span>Space<span class="token operator">&gt;</span></span>
<span class="line">          <span class="token operator">&lt;</span><span class="token operator">/</span>Col<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span><span class="token operator">/</span>Row<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span>Table</span>
<span class="line">          dataSource<span class="token operator">=</span><span class="token punctuation">{</span>loadQuery<span class="token punctuation">.</span>data<span class="token operator">?.</span>list<span class="token punctuation">}</span></span>
<span class="line">          columns<span class="token operator">=</span><span class="token punctuation">{</span>columns<span class="token punctuation">}</span></span>
<span class="line">          loading<span class="token operator">=</span><span class="token punctuation">{</span>loadQuery<span class="token punctuation">.</span>loading<span class="token punctuation">}</span></span>
<span class="line">          rowKey<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">row</span> <span class="token operator">=&gt;</span> row<span class="token punctuation">.</span>id<span class="token punctuation">}</span></span>
<span class="line">          pagination<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span></span>
<span class="line">          onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> __<span class="token punctuation">,</span> sorter</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setSorter</span><span class="token punctuation">(</span>sorter<span class="token punctuation">)</span><span class="token punctuation">}</span></span>
<span class="line">          rowSelection<span class="token operator">=</span><span class="token punctuation">{</span>rowSelection<span class="token punctuation">}</span></span>
<span class="line">        <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span>Row<span class="token operator">&gt;</span></span>
<span class="line">          <span class="token operator">&lt;</span>Col xs<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">24</span><span class="token punctuation">}</span> style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">textAlign</span><span class="token operator">:</span> <span class="token string">&#39;right&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token string">&#39;10px&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span>Pagination</span>
<span class="line">              total<span class="token operator">=</span><span class="token punctuation">{</span>loadQuery<span class="token punctuation">.</span>data<span class="token operator">?.</span>total <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">}</span></span>
<span class="line">              current<span class="token operator">=</span><span class="token punctuation">{</span>loadQuery<span class="token punctuation">.</span>data<span class="token operator">?.</span>current <span class="token operator">||</span> <span class="token number">1</span><span class="token punctuation">}</span></span>
<span class="line">              pageSize<span class="token operator">=</span><span class="token punctuation">{</span>loadQuery<span class="token punctuation">.</span>data<span class="token operator">?.</span>pageSize <span class="token operator">||</span> <span class="token number">10</span><span class="token punctuation">}</span></span>
<span class="line">              showSizeChanger</span>
<span class="line">              showQuickJumper</span>
<span class="line">              showTotal<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">total</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">总计</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>total<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">条</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">}</span></span>
<span class="line">              onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">current<span class="token punctuation">,</span> pageSize</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setPageConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span> current<span class="token punctuation">,</span> pageSize <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
<span class="line">            <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">          <span class="token operator">&lt;</span><span class="token operator">/</span>Col<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span><span class="token operator">/</span>Row<span class="token operator">&gt;</span></span>
<span class="line">      <span class="token operator">&lt;</span><span class="token operator">/</span>Card<span class="token operator">&gt;</span></span>
<span class="line">      <span class="token punctuation">{</span></span>
<span class="line">        selectedRowKeys<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span></span>
<span class="line">          <span class="token operator">&lt;</span>FooterToolbar extra<span class="token operator">=</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token operator">&lt;</span>Space<span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span>Button</span>
<span class="line">                type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span></span>
<span class="line">                onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">deleteRecords</span><span class="token punctuation">(</span>selectedRows<span class="token punctuation">)</span><span class="token punctuation">}</span></span>
<span class="line">              <span class="token operator">&gt;</span>删除<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span><span class="token operator">/</span>Space<span class="token operator">&gt;</span></span>
<span class="line">          <span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">        <span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token operator">&lt;</span><span class="token operator">/</span>PageContainer<span class="token operator">&gt;</span></span>
<span class="line">  <span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> Entity</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-3-fieldvalue-tsx" tabindex="-1"><a class="header-anchor" href="#_4-3-fieldvalue-tsx"><span>4.3 fieldValue.tsx</span></a></h3><p>src\\utils\\transformer\\fieldValue.tsx</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> moment <span class="token keyword">from</span> <span class="token string">&#39;moment&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">formToValues</span><span class="token punctuation">(</span><span class="token parameter">values</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">let</span> result <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> values<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> value <span class="token operator">=</span> values<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">&#39;boolean&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      value <span class="token operator">=</span> value <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>moment<span class="token punctuation">.</span><span class="token function">isMoment</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      value <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      value <span class="token operator">=</span> <span class="token function">formToValues</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    result<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">return</span> result<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-添加修改实体" tabindex="-1"><a class="header-anchor" href="#_5-添加修改实体"><span>5.添加修改实体</span></a></h2><h3 id="_5-1-umirc-ts" tabindex="-1"><a class="header-anchor" href="#_5-1-umirc-ts"><span>5.1 .umirc.ts</span></a></h3><p>.umirc.ts</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">+   {</span>
<span class="line">+     name: &#39;实体编辑&#39;,</span>
<span class="line">+     path: &#39;/entity/edit&#39;,</span>
<span class="line">+     component: &#39;./EntityEdit&#39;,</span>
<span class="line">+   }</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-2-src-constants-enums-ts" tabindex="-1"><a class="header-anchor" href="#_5-2-src-constants-enums-ts"><span>5.2 src\\constants\\enums.ts</span></a></h3><p>src\\constants\\enums.ts</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token comment">//字段类型</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">enum</span> <span class="token constant">FIELD_TYPES</span> <span class="token punctuation">{</span></span>
<span class="line">    text <span class="token operator">=</span> <span class="token string">&#39;text&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    number <span class="token operator">=</span> <span class="token string">&#39;number&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    select <span class="token operator">=</span> <span class="token string">&#39;select&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    datetime <span class="token operator">=</span> <span class="token string">&#39;datetime&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token keyword">switch</span> <span class="token operator">=</span> <span class="token string">&#39;switch&#39;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//按钮操作类型</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">enum</span> <span class="token constant">BUTTON_ACTION_TYPES</span> <span class="token punctuation">{</span></span>
<span class="line">    add <span class="token operator">=</span> <span class="token string">&#39;add&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    update <span class="token operator">=</span> <span class="token string">&#39;update&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token keyword">delete</span> <span class="token operator">=</span> <span class="token string">&#39;delete&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    refresh <span class="token operator">=</span> <span class="token string">&#39;refresh&#39;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//按钮类型</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">enum</span> <span class="token constant">BUTTON_TYPES</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">default</span> <span class="token operator">=</span> <span class="token string">&#39;default&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    primary <span class="token operator">=</span> <span class="token string">&#39;primary&#39;</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//方法类型</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">enum</span> <span class="token constant">METHOD_TYPES</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token constant">DELETE</span> <span class="token operator">=</span> <span class="token string">&#39;DELETE&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token constant">POST</span> <span class="token operator">=</span> <span class="token string">&#39;POST&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token constant">PUT</span> <span class="token operator">=</span> <span class="token string">&#39;PUT&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token constant">GET</span> <span class="token operator">=</span> <span class="token string">&#39;GET&#39;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">FIELD</span> <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">{</span> <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&#39;文本&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token constant">FIELD_TYPES</span><span class="token punctuation">.</span>text <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span> <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&#39;数字&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token constant">FIELD_TYPES</span><span class="token punctuation">.</span>number <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span> <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&#39;下拉框&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token constant">FIELD_TYPES</span><span class="token punctuation">.</span>select <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span> <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&#39;日期时间&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token constant">FIELD_TYPES</span><span class="token punctuation">.</span>datetime <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span> <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&#39;开关&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token constant">FIELD_TYPES</span><span class="token punctuation">.</span>switch <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">BUTTON</span> <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">{</span> <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&#39;默认&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token constant">BUTTON_TYPES</span><span class="token punctuation">.</span>default <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span> <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&#39;主要&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token constant">BUTTON_TYPES</span><span class="token punctuation">.</span>primary <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">BUTTON_ACTION</span> <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">{</span> <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&#39;添加&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token constant">BUTTON_ACTION_TYPES</span><span class="token punctuation">.</span>add <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span> <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&#39;更新&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token constant">BUTTON_ACTION_TYPES</span><span class="token punctuation">.</span>update <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span> <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&#39;删除&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token constant">BUTTON_ACTION_TYPES</span><span class="token punctuation">.</span>delete <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span> <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&#39;刷新&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token constant">BUTTON_ACTION_TYPES</span><span class="token punctuation">.</span>refresh <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">METHOD</span> <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">{</span> <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&#39;DELETE&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token constant">METHOD_TYPES</span><span class="token punctuation">.</span><span class="token constant">DELETE</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span> <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&#39;POST&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token constant">METHOD_TYPES</span><span class="token punctuation">.</span><span class="token constant">POST</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span> <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&#39;PUT&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token constant">METHOD_TYPES</span><span class="token punctuation">.</span><span class="token constant">PUT</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span> <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token constant">METHOD_TYPES</span><span class="token punctuation">.</span><span class="token constant">GET</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">BOOLEAN</span> <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">{</span> <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&#39;是&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span> <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&#39;否&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-3-entityedit-index-tsx" tabindex="-1"><a class="header-anchor" href="#_5-3-entityedit-index-tsx"><span>5.3 EntityEdit\\index.tsx</span></a></h3><p>src\\pages\\EntityEdit\\index.tsx</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Card<span class="token punctuation">,</span> message<span class="token punctuation">,</span> List <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;antd&#39;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span></span>
<span class="line">  FormItem<span class="token punctuation">,</span> Input<span class="token punctuation">,</span> ArrayTable<span class="token punctuation">,</span> Editable<span class="token punctuation">,</span> FormButtonGroup<span class="token punctuation">,</span> Submit<span class="token punctuation">,</span> Select<span class="token punctuation">,</span> Checkbox<span class="token punctuation">,</span> Switch<span class="token punctuation">,</span></span>
<span class="line">  FormLayout<span class="token punctuation">,</span> FormGrid<span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@formily/antd&#39;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> createForm<span class="token punctuation">,</span> onFormValidateFailed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@formily/core&#39;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> FormProvider<span class="token punctuation">,</span> createSchemaField <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@formily/react&#39;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> onFieldValueChange<span class="token punctuation">,</span> FormPath <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@formily/core&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> PageContainer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@ant-design/pro-components&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> request<span class="token punctuation">,</span> useRequest<span class="token punctuation">,</span> history<span class="token punctuation">,</span> useLocation <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;umi&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> Qs <span class="token keyword">from</span> <span class="token string">&#39;query-string&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">FIELD</span><span class="token punctuation">,</span> <span class="token constant">BUTTON_ACTION</span><span class="token punctuation">,</span> <span class="token constant">BUTTON</span><span class="token punctuation">,</span> <span class="token constant">METHOD</span><span class="token punctuation">,</span> <span class="token constant">BUTTON_ACTION_TYPES</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/constants/enums&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> initialEntityValues <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./initialValues&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> useMount <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;ahooks&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> parse <span class="token punctuation">}</span> <span class="token operator">=</span> FormPath<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> SchemaField <span class="token operator">=</span> <span class="token function">createSchemaField</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    FormItem<span class="token punctuation">,</span></span>
<span class="line">    Editable<span class="token punctuation">,</span></span>
<span class="line">    Input<span class="token punctuation">,</span></span>
<span class="line">    ArrayTable<span class="token punctuation">,</span></span>
<span class="line">    Select<span class="token punctuation">,</span></span>
<span class="line">    Checkbox<span class="token punctuation">,</span></span>
<span class="line">    Switch<span class="token punctuation">,</span></span>
<span class="line">    FormLayout<span class="token punctuation">,</span></span>
<span class="line">    Card<span class="token punctuation">,</span></span>
<span class="line">    FormGrid</span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> form <span class="token operator">=</span> <span class="token function">createForm</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">effects</span><span class="token punctuation">(</span><span class="token parameter">form</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">onFieldValueChange</span><span class="token punctuation">(</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> value <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">      form<span class="token punctuation">.</span><span class="token function">setFieldState</span><span class="token punctuation">(</span><span class="token string">&#39;*(page.*.data,record.*.data)&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">state</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">let</span> dataValue <span class="token operator">=</span> form<span class="token punctuation">.</span><span class="token function">getValuesIn</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>address<span class="token punctuation">.</span>entire<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> item <span class="token keyword">of</span> dataValue<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">&#39;url&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">let</span> action <span class="token operator">=</span> form<span class="token punctuation">.</span><span class="token function">getValuesIn</span><span class="token punctuation">(</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">&#39;.action&#39;</span><span class="token punctuation">,</span> state<span class="token punctuation">.</span>address<span class="token punctuation">.</span>entire<span class="token punctuation">)</span><span class="token punctuation">.</span>entire<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            item<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token function">getUrl</span><span class="token punctuation">(</span>action<span class="token punctuation">,</span> value<span class="token punctuation">)</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token keyword">function</span> <span class="token function">getUrl</span><span class="token punctuation">(</span><span class="token parameter">action<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">case</span> <span class="token constant">BUTTON_ACTION_TYPES</span><span class="token punctuation">.</span>add<span class="token operator">:</span></span>
<span class="line">              <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">/api/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">case</span> <span class="token constant">BUTTON_ACTION_TYPES</span><span class="token punctuation">.</span>update<span class="token operator">:</span></span>
<span class="line">              <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">/api/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/:id</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">case</span> <span class="token constant">BUTTON_ACTION_TYPES</span><span class="token punctuation">.</span>delete<span class="token operator">:</span></span>
<span class="line">              <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">/api/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/:id</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">default</span><span class="token operator">:</span></span>
<span class="line">              <span class="token keyword">break</span><span class="token punctuation">;</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token function">onFormValidateFailed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">form</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">      message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>List</span>
<span class="line">        bordered</span>
<span class="line">        dataSource<span class="token operator">=</span><span class="token punctuation">{</span>form<span class="token punctuation">.</span>errors<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>error<span class="token punctuation">.</span>address<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>error<span class="token punctuation">.</span>messages<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;,&#39;</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
<span class="line">        renderItem<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">item</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span></span>
<span class="line">          <span class="token operator">&lt;</span>List<span class="token punctuation">.</span>Item<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>List<span class="token punctuation">.</span>Item<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token punctuation">)</span><span class="token punctuation">}</span></span>
<span class="line">      <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> location <span class="token operator">=</span> <span class="token function">useLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> query <span class="token operator">=</span> Qs<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>location<span class="token punctuation">.</span>search<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> loadQuery <span class="token operator">=</span> <span class="token function">useRequest</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span></span>
<span class="line">    <span class="token function">request</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">/api/entity/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&#39;GET&#39;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">manual</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">onSuccess</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">data</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      form<span class="token punctuation">.</span><span class="token function">setValues</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token function">useMount</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>query<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      loadQuery<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>query<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">      form<span class="token punctuation">.</span><span class="token function">setValues</span><span class="token punctuation">(</span>initialEntityValues<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> addQuery <span class="token operator">=</span> <span class="token function">useRequest</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">values</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span></span>
<span class="line">    <span class="token function">request</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">/api/entity</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&#39;POST&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">data</span><span class="token operator">:</span> values</span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">manual</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">onSuccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      history<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">formatResult</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">return</span> res<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> updateQuery <span class="token operator">=</span> <span class="token function">useRequest</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">id<span class="token punctuation">,</span> values</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span></span>
<span class="line">    <span class="token function">request</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">/api/entity/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&#39;PUT&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">data</span><span class="token operator">:</span> values</span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">manual</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">onSuccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      history<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">formatResult</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">return</span> res<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token function-variable function">handleSubmit</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">values</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;values&#39;</span><span class="token punctuation">,</span> values<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>query<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      updateQuery<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>query<span class="token punctuation">.</span>id<span class="token punctuation">,</span> values<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">      addQuery<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token operator">&lt;</span>PageContainer<span class="token operator">&gt;</span></span>
<span class="line">      <span class="token operator">&lt;</span>FormProvider form<span class="token operator">=</span><span class="token punctuation">{</span>form<span class="token punctuation">}</span><span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span>SchemaField<span class="token operator">&gt;</span></span>
<span class="line">          <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">            x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;FormGrid&quot;</span></span>
<span class="line">            x<span class="token operator">-</span>component<span class="token operator">-</span>props<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">maxColumns</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token literal-property property">minColumns</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">          <span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>String</span>
<span class="line">              name<span class="token operator">=</span><span class="token string">&quot;name&quot;</span></span>
<span class="line">              title<span class="token operator">=</span><span class="token string">&quot;名称&quot;</span></span>
<span class="line">              x<span class="token operator">-</span>decorator<span class="token operator">=</span><span class="token string">&quot;FormItem&quot;</span></span>
<span class="line">              required</span>
<span class="line">              x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;Input&quot;</span></span>
<span class="line">            <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>String</span>
<span class="line">              name<span class="token operator">=</span><span class="token string">&quot;title&quot;</span></span>
<span class="line">              title<span class="token operator">=</span><span class="token string">&quot;标题&quot;</span></span>
<span class="line">              x<span class="token operator">-</span>decorator<span class="token operator">=</span><span class="token string">&quot;FormItem&quot;</span></span>
<span class="line">              required</span>
<span class="line">              x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;Input&quot;</span></span>
<span class="line">            <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">          <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Void<span class="token operator">&gt;</span></span>
<span class="line">          <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Array</span>
<span class="line">            name<span class="token operator">=</span><span class="token string">&quot;fields&quot;</span></span>
<span class="line">            x<span class="token operator">-</span>decorator<span class="token operator">=</span><span class="token string">&quot;FormItem&quot;</span></span>
<span class="line">            x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable&quot;</span></span>
<span class="line">          <span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Object<span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Column&quot;</span></span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">-</span>props<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;排序&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">align</span><span class="token operator">:</span> <span class="token string">&#39;center&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">              <span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                  x<span class="token operator">-</span>decorator<span class="token operator">=</span><span class="token string">&quot;FormItem&quot;</span></span>
<span class="line">                  required</span>
<span class="line">                  x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.SortHandle&quot;</span></span>
<span class="line">                <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Void<span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Column&quot;</span></span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">-</span>props<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;索引&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">align</span><span class="token operator">:</span> <span class="token string">&#39;center&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">              <span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                  x<span class="token operator">-</span>decorator<span class="token operator">=</span><span class="token string">&quot;FormItem&quot;</span></span>
<span class="line">                  required</span>
<span class="line">                  x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Index&quot;</span></span>
<span class="line">                <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Void<span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Column&quot;</span></span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">-</span>props<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;名称&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">dataIndex</span><span class="token operator">:</span> <span class="token string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">200</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">              <span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>String</span>
<span class="line">                  name<span class="token operator">=</span><span class="token string">&quot;name&quot;</span></span>
<span class="line">                  x<span class="token operator">-</span>decorator<span class="token operator">=</span><span class="token string">&quot;FormItem&quot;</span></span>
<span class="line">                  required</span>
<span class="line">                  x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;Input&quot;</span></span>
<span class="line">                <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Void<span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Column&quot;</span></span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">-</span>props<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;标题&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">200</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">              <span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>String</span>
<span class="line">                  x<span class="token operator">-</span>decorator<span class="token operator">=</span><span class="token string">&quot;FormItem&quot;</span></span>
<span class="line">                  name<span class="token operator">=</span><span class="token string">&quot;title&quot;</span></span>
<span class="line">                  required</span>
<span class="line">                  x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;Input&quot;</span></span>
<span class="line">                <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Void<span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Column&quot;</span></span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">-</span>props<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;类型&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">200</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">              <span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>String</span>
<span class="line">                  x<span class="token operator">-</span>decorator<span class="token operator">=</span><span class="token string">&quot;FormItem&quot;</span></span>
<span class="line">                  name<span class="token operator">=</span><span class="token string">&quot;type&quot;</span></span>
<span class="line">                  required</span>
<span class="line">                  x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;Select&quot;</span></span>
<span class="line">                  <span class="token keyword">enum</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token constant">FIELD</span><span class="token punctuation">}</span></span>
<span class="line">                <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Void<span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Column&quot;</span></span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">-</span>props<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;数据&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">200</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">              <span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Array</span>
<span class="line">                  name<span class="token operator">=</span><span class="token string">&quot;data&quot;</span></span>
<span class="line">                  title<span class="token operator">=</span><span class="token string">&quot;配置字段数据&quot;</span></span>
<span class="line">                  x<span class="token operator">-</span>decorator<span class="token operator">=</span><span class="token string">&quot;Editable.Popover&quot;</span></span>
<span class="line">                  x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable&quot;</span></span>
<span class="line">                  x<span class="token operator">-</span>reactions<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">field</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token keyword">let</span> value <span class="token operator">=</span> field<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span></span>
<span class="line">                    <span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                      field<span class="token punctuation">.</span>title <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;,&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                    <span class="token punctuation">}</span></span>
<span class="line">                  <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">                <span class="token operator">&gt;</span></span>
<span class="line">                  <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Object<span class="token operator">&gt;</span></span>
<span class="line">                    <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                      x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Column&quot;</span></span>
<span class="line">                      x<span class="token operator">-</span>component<span class="token operator">-</span>props<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;标题&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">dataIndex</span><span class="token operator">:</span> <span class="token string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">200</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">                    <span class="token operator">&gt;</span></span>
<span class="line">                      <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>String</span>
<span class="line">                        name<span class="token operator">=</span><span class="token string">&quot;title&quot;</span></span>
<span class="line">                        x<span class="token operator">-</span>decorator<span class="token operator">=</span><span class="token string">&quot;FormItem&quot;</span></span>
<span class="line">                        required</span>
<span class="line">                        x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;Input&quot;</span></span>
<span class="line">                      <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">                    <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Void<span class="token operator">&gt;</span></span>
<span class="line">                    <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                      x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Column&quot;</span></span>
<span class="line">                      x<span class="token operator">-</span>component<span class="token operator">-</span>props<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;值&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">dataIndex</span><span class="token operator">:</span> <span class="token string">&#39;value&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">200</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">                    <span class="token operator">&gt;</span></span>
<span class="line">                      <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>String</span>
<span class="line">                        name<span class="token operator">=</span><span class="token string">&quot;value&quot;</span></span>
<span class="line">                        x<span class="token operator">-</span>decorator<span class="token operator">=</span><span class="token string">&quot;FormItem&quot;</span></span>
<span class="line">                        required</span>
<span class="line">                        x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;Input&quot;</span></span>
<span class="line">                      <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">                    <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Void<span class="token operator">&gt;</span></span>
<span class="line">                    <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                      x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Column&quot;</span></span>
<span class="line">                      x<span class="token operator">-</span>component<span class="token operator">-</span>props<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span></span>
<span class="line">                        <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;操作&#39;</span><span class="token punctuation">,</span></span>
<span class="line">                        <span class="token literal-property property">dataIndex</span><span class="token operator">:</span> <span class="token string">&#39;operations&#39;</span><span class="token punctuation">,</span></span>
<span class="line">                        <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span></span>
<span class="line">                        <span class="token literal-property property">fixed</span><span class="token operator">:</span> <span class="token string">&#39;right&#39;</span></span>
<span class="line">                      <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">                    <span class="token operator">&gt;</span></span>
<span class="line">                      <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;FormItem&quot;</span><span class="token operator">&gt;</span></span>
<span class="line">                        <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Remove&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">                        <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.MoveDown&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">                        <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.MoveUp&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">                      <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Void<span class="token operator">&gt;</span></span>
<span class="line">                    <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Void<span class="token operator">&gt;</span></span>
<span class="line">                  <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Object<span class="token operator">&gt;</span></span>
<span class="line">                  <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                    x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Addition&quot;</span></span>
<span class="line">                    title<span class="token operator">=</span><span class="token string">&quot;添加字段配置&quot;</span></span>
<span class="line">                  <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Array<span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Void<span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Column&quot;</span></span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">-</span>props<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;支持排序&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">200</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">              <span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>String</span>
<span class="line">                  x<span class="token operator">-</span>decorator<span class="token operator">=</span><span class="token string">&quot;FormItem&quot;</span></span>
<span class="line">                  name<span class="token operator">=</span><span class="token string">&quot;sorter&quot;</span></span>
<span class="line">                  x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;Switch&quot;</span></span>
<span class="line">                  x<span class="token operator">-</span>reactions<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span></span>
<span class="line">                    <span class="token string-property property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;.type&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">                    <span class="token literal-property property">when</span><span class="token operator">:</span> <span class="token string">&quot;{{$deps[0] === &#39;number&#39;}}&quot;</span><span class="token punctuation">,</span></span>
<span class="line">                    <span class="token literal-property property">fulfill</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">                      <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">                        <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token boolean">true</span></span>
<span class="line">                      <span class="token punctuation">}</span></span>
<span class="line">                    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">                    <span class="token literal-property property">otherwise</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">                      <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">                        <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token boolean">false</span></span>
<span class="line">                      <span class="token punctuation">}</span></span>
<span class="line">                    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">                  <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">                <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Void<span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Column&quot;</span></span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">-</span>props<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;列表隐藏&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">200</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">              <span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>String</span>
<span class="line">                  x<span class="token operator">-</span>decorator<span class="token operator">=</span><span class="token string">&quot;FormItem&quot;</span></span>
<span class="line">                  name<span class="token operator">=</span><span class="token string">&quot;hideInColumn&quot;</span></span>
<span class="line">                  x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;Switch&quot;</span></span>
<span class="line">                <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Void<span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Column&quot;</span></span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">-</span>props<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;不允许编辑&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">200</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">              <span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>String</span>
<span class="line">                  x<span class="token operator">-</span>decorator<span class="token operator">=</span><span class="token string">&quot;FormItem&quot;</span></span>
<span class="line">                  name<span class="token operator">=</span><span class="token string">&quot;disabled&quot;</span></span>
<span class="line">                  x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;Switch&quot;</span></span>
<span class="line">                <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Void<span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Column&quot;</span></span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">-</span>props<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span></span>
<span class="line">                  <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;操作&#39;</span><span class="token punctuation">,</span></span>
<span class="line">                  <span class="token literal-property property">dataIndex</span><span class="token operator">:</span> <span class="token string">&#39;operations&#39;</span><span class="token punctuation">,</span></span>
<span class="line">                  <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span></span>
<span class="line">                  <span class="token literal-property property">fixed</span><span class="token operator">:</span> <span class="token string">&#39;right&#39;</span></span>
<span class="line">                <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">              <span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;FormItem&quot;</span><span class="token operator">&gt;</span></span>
<span class="line">                  <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Remove&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">                  <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.MoveDown&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">                  <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.MoveUp&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Void<span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Void<span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Object<span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">              x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Addition&quot;</span></span>
<span class="line">              title<span class="token operator">=</span><span class="token string">&quot;添加字段&quot;</span></span>
<span class="line">            <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">          <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Array<span class="token operator">&gt;</span></span>
<span class="line">          <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Array</span>
<span class="line">            name<span class="token operator">=</span><span class="token string">&quot;page&quot;</span></span>
<span class="line">            x<span class="token operator">-</span>decorator<span class="token operator">=</span><span class="token string">&quot;FormItem&quot;</span></span>
<span class="line">            x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable&quot;</span></span>
<span class="line">          <span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Object<span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Column&quot;</span></span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">-</span>props<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;排序&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">align</span><span class="token operator">:</span> <span class="token string">&#39;center&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">              <span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                  x<span class="token operator">-</span>decorator<span class="token operator">=</span><span class="token string">&quot;FormItem&quot;</span></span>
<span class="line">                  required</span>
<span class="line">                  x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.SortHandle&quot;</span></span>
<span class="line">                <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Void<span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Column&quot;</span></span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">-</span>props<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;索引&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">align</span><span class="token operator">:</span> <span class="token string">&#39;center&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">              <span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                  x<span class="token operator">-</span>decorator<span class="token operator">=</span><span class="token string">&quot;FormItem&quot;</span></span>
<span class="line">                  required</span>
<span class="line">                  x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Index&quot;</span></span>
<span class="line">                <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Void<span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Column&quot;</span></span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">-</span>props<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;文本&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">dataIndex</span><span class="token operator">:</span> <span class="token string">&#39;title&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">200</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">              <span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>String</span>
<span class="line">                  name<span class="token operator">=</span><span class="token string">&quot;title&quot;</span></span>
<span class="line">                  x<span class="token operator">-</span>decorator<span class="token operator">=</span><span class="token string">&quot;Editable&quot;</span></span>
<span class="line">                  required</span>
<span class="line">                  x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;Input&quot;</span></span>
<span class="line">                <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Void<span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Column&quot;</span></span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">-</span>props<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;类型&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">200</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">              <span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>String</span>
<span class="line">                  x<span class="token operator">-</span>decorator<span class="token operator">=</span><span class="token string">&quot;FormItem&quot;</span></span>
<span class="line">                  name<span class="token operator">=</span><span class="token string">&quot;type&quot;</span></span>
<span class="line">                  required</span>
<span class="line">                  x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;Select&quot;</span></span>
<span class="line">                  <span class="token keyword">enum</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token constant">BUTTON</span><span class="token punctuation">}</span></span>
<span class="line">                <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Void<span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Column&quot;</span></span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">-</span>props<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;操作&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">200</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">              <span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>String</span>
<span class="line">                  x<span class="token operator">-</span>decorator<span class="token operator">=</span><span class="token string">&quot;FormItem&quot;</span></span>
<span class="line">                  name<span class="token operator">=</span><span class="token string">&quot;action&quot;</span></span>
<span class="line">                  required</span>
<span class="line">                  x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;Select&quot;</span></span>
<span class="line">                  <span class="token keyword">enum</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token constant">BUTTON_ACTION</span><span class="token punctuation">}</span></span>
<span class="line">                <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Void<span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Column&quot;</span></span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">-</span>props<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;地址&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">dataIndex</span><span class="token operator">:</span> <span class="token string">&#39;url&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">200</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">              <span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Array</span>
<span class="line">                  name<span class="token operator">=</span><span class="token string">&quot;data&quot;</span></span>
<span class="line">                  title<span class="token operator">=</span><span class="token string">&quot;配置按钮数据&quot;</span></span>
<span class="line">                  x<span class="token operator">-</span>decorator<span class="token operator">=</span><span class="token string">&quot;Editable.Popover&quot;</span></span>
<span class="line">                  x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable&quot;</span></span>
<span class="line">                  x<span class="token operator">-</span>reactions<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">field</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token keyword">let</span> value <span class="token operator">=</span> field<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span></span>
<span class="line">                    <span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                      field<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">&#39;{&#39;</span> <span class="token operator">+</span> value<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;,&#39;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&#39;}&#39;</span><span class="token punctuation">;</span></span>
<span class="line">                    <span class="token punctuation">}</span></span>
<span class="line">                  <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">                <span class="token operator">&gt;</span></span>
<span class="line">                  <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Object<span class="token operator">&gt;</span></span>
<span class="line">                    <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                      x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Column&quot;</span></span>
<span class="line">                      x<span class="token operator">-</span>component<span class="token operator">-</span>props<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;属性1&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">dataIndex</span><span class="token operator">:</span> <span class="token string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">200</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">                    <span class="token operator">&gt;</span></span>
<span class="line">                      <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>String</span>
<span class="line">                        name<span class="token operator">=</span><span class="token string">&quot;name&quot;</span></span>
<span class="line">                        x<span class="token operator">-</span>decorator<span class="token operator">=</span><span class="token string">&quot;FormItem&quot;</span></span>
<span class="line">                        required</span>
<span class="line">                        x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;Input&quot;</span></span>
<span class="line">                      <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">                    <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Void<span class="token operator">&gt;</span></span>
<span class="line">                    <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                      x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Column&quot;</span></span>
<span class="line">                      x<span class="token operator">-</span>component<span class="token operator">-</span>props<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;值&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">dataIndex</span><span class="token operator">:</span> <span class="token string">&#39;value&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">200</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">                    <span class="token operator">&gt;</span></span>
<span class="line">                      <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>String</span>
<span class="line">                        name<span class="token operator">=</span><span class="token string">&quot;value&quot;</span></span>
<span class="line">                        x<span class="token operator">-</span>decorator<span class="token operator">=</span><span class="token string">&quot;FormItem&quot;</span></span>
<span class="line">                        required</span>
<span class="line">                        x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;Input&quot;</span></span>
<span class="line">                        x<span class="token operator">-</span>reactions<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span></span>
<span class="line">                          <span class="token literal-property property">dependencies</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;.name&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">                          <span class="token literal-property property">when</span><span class="token operator">:</span> <span class="token string">&quot;{{$deps[0] === &#39;method&#39;}}&quot;</span><span class="token punctuation">,</span></span>
<span class="line">                          <span class="token literal-property property">fulfill</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">                            <span class="token literal-property property">schema</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">                              <span class="token string-property property">&#39;x-component&#39;</span><span class="token operator">:</span> <span class="token string">&quot;Select&quot;</span><span class="token punctuation">,</span></span>
<span class="line">                              <span class="token keyword">enum</span><span class="token operator">:</span> <span class="token constant">METHOD</span></span>
<span class="line">                            <span class="token punctuation">}</span></span>
<span class="line">                          <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">                          <span class="token literal-property property">otherwise</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">                            <span class="token literal-property property">schema</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">                              <span class="token string-property property">&#39;x-component&#39;</span><span class="token operator">:</span> <span class="token string">&quot;Input&quot;</span><span class="token punctuation">,</span></span>
<span class="line">                              <span class="token keyword">enum</span><span class="token operator">:</span> <span class="token keyword">null</span></span>
<span class="line">                            <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">                          <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">                        <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">                      <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">                    <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Void<span class="token operator">&gt;</span></span>
<span class="line">                    <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                      x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Column&quot;</span></span>
<span class="line">                      x<span class="token operator">-</span>component<span class="token operator">-</span>props<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span></span>
<span class="line">                        <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;操作&#39;</span><span class="token punctuation">,</span></span>
<span class="line">                        <span class="token literal-property property">dataIndex</span><span class="token operator">:</span> <span class="token string">&#39;operations&#39;</span><span class="token punctuation">,</span></span>
<span class="line">                        <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span></span>
<span class="line">                        <span class="token literal-property property">fixed</span><span class="token operator">:</span> <span class="token string">&#39;right&#39;</span></span>
<span class="line">                      <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">                    <span class="token operator">&gt;</span></span>
<span class="line">                      <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;FormItem&quot;</span><span class="token operator">&gt;</span></span>
<span class="line">                        <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Remove&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">                        <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.MoveDown&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">                        <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.MoveUp&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">                      <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Void<span class="token operator">&gt;</span></span>
<span class="line">                    <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Void<span class="token operator">&gt;</span></span>
<span class="line">                  <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Object<span class="token operator">&gt;</span></span>
<span class="line">                  <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                    x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Addition&quot;</span></span>
<span class="line">                    title<span class="token operator">=</span><span class="token string">&quot;添加配置&quot;</span></span>
<span class="line">                  <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Array<span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Void<span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Column&quot;</span></span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">-</span>props<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span></span>
<span class="line">                  <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;操作&#39;</span><span class="token punctuation">,</span></span>
<span class="line">                  <span class="token literal-property property">dataIndex</span><span class="token operator">:</span> <span class="token string">&#39;operations&#39;</span><span class="token punctuation">,</span></span>
<span class="line">                  <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span></span>
<span class="line">                  <span class="token literal-property property">fixed</span><span class="token operator">:</span> <span class="token string">&#39;right&#39;</span></span>
<span class="line">                <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">              <span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;FormItem&quot;</span><span class="token operator">&gt;</span></span>
<span class="line">                  <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Remove&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">                  <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.MoveDown&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">                  <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.MoveUp&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Void<span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Void<span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Object<span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">              x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Addition&quot;</span></span>
<span class="line">              title<span class="token operator">=</span><span class="token string">&quot;添加页面操作&quot;</span></span>
<span class="line">            <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">          <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Array<span class="token operator">&gt;</span></span>
<span class="line">          <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Array</span>
<span class="line">            name<span class="token operator">=</span><span class="token string">&quot;record&quot;</span></span>
<span class="line">            x<span class="token operator">-</span>decorator<span class="token operator">=</span><span class="token string">&quot;FormItem&quot;</span></span>
<span class="line">            x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable&quot;</span></span>
<span class="line">          <span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Object<span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Column&quot;</span></span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">-</span>props<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;排序&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">align</span><span class="token operator">:</span> <span class="token string">&#39;center&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">              <span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                  x<span class="token operator">-</span>decorator<span class="token operator">=</span><span class="token string">&quot;FormItem&quot;</span></span>
<span class="line">                  required</span>
<span class="line">                  x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.SortHandle&quot;</span></span>
<span class="line">                <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Void<span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Column&quot;</span></span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">-</span>props<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;索引&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">align</span><span class="token operator">:</span> <span class="token string">&#39;center&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">              <span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                  x<span class="token operator">-</span>decorator<span class="token operator">=</span><span class="token string">&quot;FormItem&quot;</span></span>
<span class="line">                  required</span>
<span class="line">                  x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Index&quot;</span></span>
<span class="line">                <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Void<span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Column&quot;</span></span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">-</span>props<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;文本&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">dataIndex</span><span class="token operator">:</span> <span class="token string">&#39;title&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">200</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">              <span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>String</span>
<span class="line">                  name<span class="token operator">=</span><span class="token string">&quot;title&quot;</span></span>
<span class="line">                  x<span class="token operator">-</span>decorator<span class="token operator">=</span><span class="token string">&quot;Editable&quot;</span></span>
<span class="line">                  required</span>
<span class="line">                  x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;Input&quot;</span></span>
<span class="line">                <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Void<span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Column&quot;</span></span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">-</span>props<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;类型&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">200</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">              <span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>String</span>
<span class="line">                  x<span class="token operator">-</span>decorator<span class="token operator">=</span><span class="token string">&quot;FormItem&quot;</span></span>
<span class="line">                  name<span class="token operator">=</span><span class="token string">&quot;type&quot;</span></span>
<span class="line">                  required</span>
<span class="line">                  x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;Select&quot;</span></span>
<span class="line">                  <span class="token keyword">enum</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token constant">BUTTON</span><span class="token punctuation">}</span></span>
<span class="line">                <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Void<span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Column&quot;</span></span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">-</span>props<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;操作&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">200</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">              <span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>String</span>
<span class="line">                  x<span class="token operator">-</span>decorator<span class="token operator">=</span><span class="token string">&quot;FormItem&quot;</span></span>
<span class="line">                  name<span class="token operator">=</span><span class="token string">&quot;action&quot;</span></span>
<span class="line">                  required</span>
<span class="line">                  x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;Select&quot;</span></span>
<span class="line">                  <span class="token keyword">enum</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token constant">BUTTON_ACTION</span><span class="token punctuation">}</span></span>
<span class="line">                <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Void<span class="token operator">&gt;</span></span>
<span class="line"></span>
<span class="line">              <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Column&quot;</span></span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">-</span>props<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;数据&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">dataIndex</span><span class="token operator">:</span> <span class="token string">&#39;data&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">200</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">              <span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Array</span>
<span class="line">                  name<span class="token operator">=</span><span class="token string">&quot;data&quot;</span></span>
<span class="line">                  title<span class="token operator">=</span><span class="token string">&quot;配置数据&quot;</span></span>
<span class="line">                  x<span class="token operator">-</span>decorator<span class="token operator">=</span><span class="token string">&quot;Editable.Popover&quot;</span></span>
<span class="line">                  x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable&quot;</span></span>
<span class="line">                  x<span class="token operator">-</span>reactions<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">field</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token keyword">let</span> value <span class="token operator">=</span> field<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span></span>
<span class="line">                    <span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                      field<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">&#39;{&#39;</span> <span class="token operator">+</span> value<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;,&#39;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&#39;}&#39;</span><span class="token punctuation">;</span></span>
<span class="line">                    <span class="token punctuation">}</span></span>
<span class="line">                  <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">                <span class="token operator">&gt;</span></span>
<span class="line">                  <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Object<span class="token operator">&gt;</span></span>
<span class="line">                    <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                      x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Column&quot;</span></span>
<span class="line">                      x<span class="token operator">-</span>component<span class="token operator">-</span>props<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;属性&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">dataIndex</span><span class="token operator">:</span> <span class="token string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">200</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">                    <span class="token operator">&gt;</span></span>
<span class="line">                      <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>String</span>
<span class="line">                        name<span class="token operator">=</span><span class="token string">&quot;name&quot;</span></span>
<span class="line">                        x<span class="token operator">-</span>decorator<span class="token operator">=</span><span class="token string">&quot;FormItem&quot;</span></span>
<span class="line">                        required</span>
<span class="line">                        x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;Input&quot;</span></span>
<span class="line">                      <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">                    <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Void<span class="token operator">&gt;</span></span>
<span class="line">                    <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                      x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Column&quot;</span></span>
<span class="line">                      x<span class="token operator">-</span>component<span class="token operator">-</span>props<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;值&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">dataIndex</span><span class="token operator">:</span> <span class="token string">&#39;value&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">200</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">                    <span class="token operator">&gt;</span></span>
<span class="line">                      <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>String</span>
<span class="line">                        name<span class="token operator">=</span><span class="token string">&quot;value&quot;</span></span>
<span class="line">                        x<span class="token operator">-</span>decorator<span class="token operator">=</span><span class="token string">&quot;FormItem&quot;</span></span>
<span class="line">                        required</span>
<span class="line">                        x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;Input&quot;</span></span>
<span class="line">                      <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">                    <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Void<span class="token operator">&gt;</span></span>
<span class="line">                    <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                      x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Column&quot;</span></span>
<span class="line">                      x<span class="token operator">-</span>component<span class="token operator">-</span>props<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span></span>
<span class="line">                        <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;操作&#39;</span><span class="token punctuation">,</span></span>
<span class="line">                        <span class="token literal-property property">dataIndex</span><span class="token operator">:</span> <span class="token string">&#39;operations&#39;</span><span class="token punctuation">,</span></span>
<span class="line">                        <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span></span>
<span class="line">                        <span class="token literal-property property">fixed</span><span class="token operator">:</span> <span class="token string">&#39;right&#39;</span></span>
<span class="line">                      <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">                    <span class="token operator">&gt;</span></span>
<span class="line">                      <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;FormItem&quot;</span><span class="token operator">&gt;</span></span>
<span class="line">                        <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Remove&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">                        <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.MoveDown&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">                        <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.MoveUp&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">                      <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Void<span class="token operator">&gt;</span></span>
<span class="line">                    <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Void<span class="token operator">&gt;</span></span>
<span class="line">                  <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Object<span class="token operator">&gt;</span></span>
<span class="line">                  <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                    x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Addition&quot;</span></span>
<span class="line">                    title<span class="token operator">=</span><span class="token string">&quot;添加配置&quot;</span></span>
<span class="line">                  <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Array<span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Void<span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Column&quot;</span></span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">-</span>props<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span></span>
<span class="line">                  <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;操作&#39;</span><span class="token punctuation">,</span></span>
<span class="line">                  <span class="token literal-property property">dataIndex</span><span class="token operator">:</span> <span class="token string">&#39;operations&#39;</span><span class="token punctuation">,</span></span>
<span class="line">                  <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span></span>
<span class="line">                  <span class="token literal-property property">fixed</span><span class="token operator">:</span> <span class="token string">&#39;right&#39;</span></span>
<span class="line">                <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">              <span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;FormItem&quot;</span><span class="token operator">&gt;</span></span>
<span class="line">                  <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Remove&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">                  <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.MoveDown&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">                  <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.MoveUp&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Void<span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Void<span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Object<span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">              x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;ArrayTable.Addition&quot;</span></span>
<span class="line">              title<span class="token operator">=</span><span class="token string">&quot;添加记录操作&quot;</span></span>
<span class="line">            <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">          <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Array<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span>FormButtonGroup<span class="token operator">&gt;</span></span>
<span class="line">          <span class="token operator">&lt;</span>Submit onSubmit<span class="token operator">=</span><span class="token punctuation">{</span>handleSubmit<span class="token punctuation">}</span><span class="token operator">&gt;</span>提交<span class="token operator">&lt;</span><span class="token operator">/</span>Submit<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span><span class="token operator">/</span>FormButtonGroup<span class="token operator">&gt;</span></span>
<span class="line">      <span class="token operator">&lt;</span><span class="token operator">/</span>FormProvider<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span><span class="token operator">/</span>PageContainer<span class="token operator">&gt;</span></span>
<span class="line">  <span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-4-initialvalues-ts" tabindex="-1"><a class="header-anchor" href="#_5-4-initialvalues-ts"><span>5.4 initialValues.ts</span></a></h3><p>src\\pages\\EntityEdit\\initialValues.ts</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">FIELD_TYPES</span><span class="token punctuation">,</span> <span class="token constant">BUTTON_ACTION_TYPES</span><span class="token punctuation">,</span> <span class="token constant">BUTTON_TYPES</span><span class="token punctuation">,</span> <span class="token constant">METHOD_TYPES</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/constants/enums&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> initialEntityValues <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;user&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;用户&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">fields</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token punctuation">{</span></span>
<span class="line">            <span class="token literal-property property">disabled</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">hideInColumn</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">sorter</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;名称&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token constant">FIELD_TYPES</span><span class="token punctuation">.</span>text</span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">page</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token punctuation">{</span></span>
<span class="line">            <span class="token literal-property property">action</span><span class="token operator">:</span> <span class="token constant">BUTTON_ACTION_TYPES</span><span class="token punctuation">.</span>add<span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;添加&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token constant">BUTTON_TYPES</span><span class="token punctuation">.</span>primary<span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">                <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;url&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&#39;/api/user&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;method&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token constant">METHOD_TYPES</span><span class="token punctuation">.</span><span class="token constant">POST</span> <span class="token punctuation">}</span></span>
<span class="line">            <span class="token punctuation">]</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">record</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token punctuation">{</span></span>
<span class="line">            <span class="token literal-property property">action</span><span class="token operator">:</span> <span class="token constant">BUTTON_ACTION_TYPES</span><span class="token punctuation">.</span>update<span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;更新&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token constant">BUTTON_TYPES</span><span class="token punctuation">.</span>default<span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">                <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;url&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&#39;/api/user/:id&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;method&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token constant">METHOD_TYPES</span><span class="token punctuation">.</span><span class="token constant">PUT</span> <span class="token punctuation">}</span></span>
<span class="line">            <span class="token punctuation">]</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">{</span></span>
<span class="line">            <span class="token literal-property property">action</span><span class="token operator">:</span> <span class="token constant">BUTTON_ACTION_TYPES</span><span class="token punctuation">.</span>delete<span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;删除&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token constant">BUTTON_TYPES</span><span class="token punctuation">.</span>primary<span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">                <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;url&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&#39;/api/user/:id&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;method&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token constant">METHOD_TYPES</span><span class="token punctuation">.</span><span class="token constant">DELETE</span> <span class="token punctuation">}</span></span>
<span class="line">            <span class="token punctuation">]</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-查看实体" tabindex="-1"><a class="header-anchor" href="#_6-查看实体"><span>6.查看实体</span></a></h2><h3 id="_6-1-umirc-ts" tabindex="-1"><a class="header-anchor" href="#_6-1-umirc-ts"><span>6.1 .umirc.ts</span></a></h3><p>.umirc.ts</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">+    {</span>
<span class="line">+      name: &#39;实体&#39;,</span>
<span class="line">+      path: &#39;/entity/view&#39;,</span>
<span class="line">+      component: &#39;./EntityView&#39;,</span>
<span class="line">+    }</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-2-src-pages-entityview-index-tsx" tabindex="-1"><a class="header-anchor" href="#_6-2-src-pages-entityview-index-tsx"><span>6.2 src\\pages\\EntityView\\index.tsx</span></a></h3><p>src\\pages\\EntityView\\index.tsx</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Table<span class="token punctuation">,</span> Card<span class="token punctuation">,</span> Row<span class="token punctuation">,</span> Col<span class="token punctuation">,</span> Pagination<span class="token punctuation">,</span> Space<span class="token punctuation">,</span> Modal<span class="token punctuation">,</span> List<span class="token punctuation">,</span> message<span class="token punctuation">,</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;antd&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> createForm <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@formily/core&#39;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Form<span class="token punctuation">,</span> Submit<span class="token punctuation">,</span> Reset<span class="token punctuation">,</span> FormButtonGroup <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@formily/antd&#39;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> FooterToolbar<span class="token punctuation">,</span> PageContainer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@ant-design/pro-components&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> request<span class="token punctuation">,</span> useRequest<span class="token punctuation">,</span> history<span class="token punctuation">,</span> useLocation <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;umi&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> useToggle<span class="token punctuation">,</span> useMount<span class="token punctuation">,</span> useSetState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;ahooks&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> ExclamationCircleOutlined<span class="token punctuation">,</span> SearchOutlined <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@ant-design/icons&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> Qs <span class="token keyword">from</span> <span class="token string">&#39;query-string&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> EditModal <span class="token keyword">from</span> <span class="token string">&#39;@/components/EditModal&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> renderColumns <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/utils/render/column&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">BUTTON_ACTION_TYPES</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/constants/enums&#39;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> formToValues <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/utils/transformer/fieldValue&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> renderOperations <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/utils/render/operation&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> renderSearchFields <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/utils/render/field&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> searchForm <span class="token operator">=</span> <span class="token function">createForm</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">validateFirst</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token function-variable function">Entity</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> current<span class="token punctuation">,</span> pageSize <span class="token punctuation">}</span><span class="token punctuation">,</span> setPageConfig<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">current</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">pageSize</span><span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>sorter<span class="token punctuation">,</span> setSorter<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token operator">&lt;</span>any<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>searchVisible<span class="token punctuation">,</span> <span class="token punctuation">{</span> toggle <span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useToggle</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>selectedRowKeys<span class="token punctuation">,</span> setSelectedRowKeys<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>selectedRows<span class="token punctuation">,</span> setSelectedRows<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> location <span class="token operator">=</span> <span class="token function">useLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> query <span class="token operator">=</span> Qs<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>location<span class="token punctuation">.</span>search<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>modalState<span class="token punctuation">,</span> setModalState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useSetState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">visible</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token literal-property property">row</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> loadQuery <span class="token operator">=</span> <span class="token function">useRequest</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">params <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span></span>
<span class="line">    <span class="token function">request</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">/api/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>query<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        current<span class="token punctuation">,</span></span>
<span class="line">        pageSize<span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">sort</span><span class="token operator">:</span> sorter<span class="token operator">?.</span>field<span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">order</span><span class="token operator">:</span> sorter<span class="token operator">?.</span>order<span class="token operator">?.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token operator">...</span>params</span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token function">paramsSerializer</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> Qs<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>params<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">arrayFormat</span><span class="token operator">:</span> <span class="token string">&#39;comma&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">skipEmptyString</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">skipNull</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">refreshDeps</span><span class="token operator">:</span> <span class="token punctuation">[</span>current<span class="token punctuation">,</span> pageSize<span class="token punctuation">,</span> sorter<span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token function">useMount</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>query<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      loadQuery<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> deleteQuery <span class="token operator">=</span> <span class="token function">useRequest</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">ids</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span></span>
<span class="line">    <span class="token function">request</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">/api/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>query<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>ids<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&#39;DELETE&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">data</span><span class="token operator">:</span> ids</span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">manual</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">onSuccess</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      loadQuery<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">formatResult</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">return</span> res<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token function-variable function">deleteRecords</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">records</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    Modal<span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;确定删除以下记录吗?&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token operator">&lt;</span>ExclamationCircleOutlined <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token operator">&lt;</span>List</span>
<span class="line">          bordered</span>
<span class="line">          dataSource<span class="token operator">=</span><span class="token punctuation">{</span>records<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">record</span> <span class="token operator">=&gt;</span> record<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">}</span></span>
<span class="line">          renderItem<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">item</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span></span>
<span class="line">            <span class="token operator">&lt;</span>List<span class="token punctuation">.</span>Item<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>List<span class="token punctuation">.</span>Item<span class="token operator">&gt;</span></span>
<span class="line">          <span class="token punctuation">)</span><span class="token punctuation">}</span></span>
<span class="line">        <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">      <span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">okText</span><span class="token operator">:</span> <span class="token string">&#39;是&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">cancelText</span><span class="token operator">:</span> <span class="token string">&#39;否&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">okType</span><span class="token operator">:</span> <span class="token string">&#39;danger&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token function">onOk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> deleteQuery<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>records<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">record</span> <span class="token operator">=&gt;</span> record<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">const</span> rowSelection <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    selectedRowKeys<span class="token punctuation">,</span></span>
<span class="line">    <span class="token function-variable function">onChange</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">selectedRowKeys<span class="token punctuation">,</span> selectedRows</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function">setSelectedRowKeys</span><span class="token punctuation">(</span>selectedRowKeys<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token function">setSelectedRows</span><span class="token punctuation">(</span>selectedRows<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token function-variable function">handleSubmit</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">values</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    loadQuery<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token function">formToValues</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">const</span> <span class="token function-variable function">onAction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">operation<span class="token punctuation">,</span> row</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">switch</span> <span class="token punctuation">(</span>operation<span class="token punctuation">.</span>action<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">case</span> <span class="token constant">BUTTON_ACTION_TYPES</span><span class="token punctuation">.</span>add<span class="token operator">:</span></span>
<span class="line">      <span class="token keyword">case</span> <span class="token constant">BUTTON_ACTION_TYPES</span><span class="token punctuation">.</span>update<span class="token operator">:</span></span>
<span class="line">        <span class="token function">setModalState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">visible</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> operation<span class="token punctuation">.</span>title<span class="token punctuation">,</span> <span class="token literal-property property">data</span><span class="token operator">:</span> operation<span class="token punctuation">.</span>data<span class="token punctuation">,</span> row <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">break</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token keyword">case</span> <span class="token constant">BUTTON_ACTION_TYPES</span><span class="token punctuation">.</span>delete<span class="token operator">:</span></span>
<span class="line">        <span class="token function">deleteRecords</span><span class="token punctuation">(</span><span class="token punctuation">[</span>row<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">break</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token keyword">case</span> <span class="token constant">BUTTON_ACTION_TYPES</span><span class="token punctuation">.</span>refresh<span class="token operator">:</span></span>
<span class="line">        loadQuery<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">break</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token keyword">default</span><span class="token operator">:</span></span>
<span class="line">        <span class="token keyword">break</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token operator">&lt;</span>PageContainer<span class="token operator">&gt;</span></span>
<span class="line">      <span class="token punctuation">{</span></span>
<span class="line">        searchVisible <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span></span>
<span class="line">          <span class="token operator">&lt;</span>Card key<span class="token operator">=</span><span class="token string">&quot;search&quot;</span><span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span>Form</span>
<span class="line">              layout<span class="token operator">=</span><span class="token string">&quot;inline&quot;</span></span>
<span class="line">              form<span class="token operator">=</span><span class="token punctuation">{</span>searchForm<span class="token punctuation">}</span></span>
<span class="line">              onAutoSubmit<span class="token operator">=</span><span class="token punctuation">{</span>handleSubmit<span class="token punctuation">}</span></span>
<span class="line">            <span class="token operator">&gt;</span></span>
<span class="line">              <span class="token punctuation">{</span><span class="token function">renderSearchFields</span><span class="token punctuation">(</span>loadQuery<span class="token punctuation">.</span>data<span class="token operator">?.</span>fields<span class="token punctuation">)</span><span class="token punctuation">}</span></span>
<span class="line">              <span class="token operator">&lt;</span>FormButtonGroup<span class="token punctuation">.</span>FormItem<span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>Submit<span class="token operator">&gt;</span></span>
<span class="line">                  查询</span>
<span class="line">                <span class="token operator">&lt;</span><span class="token operator">/</span>Submit<span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>Reset <span class="token operator">&gt;</span></span>
<span class="line">                  重置</span>
<span class="line">                <span class="token operator">&lt;</span><span class="token operator">/</span>Reset<span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span><span class="token operator">/</span>FormButtonGroup<span class="token punctuation">.</span>FormItem<span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span><span class="token operator">/</span>Form<span class="token operator">&gt;</span></span>
<span class="line">          <span class="token operator">&lt;</span><span class="token operator">/</span>Card<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">      <span class="token operator">&lt;</span>Card<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span>Row<span class="token operator">&gt;</span></span>
<span class="line">          <span class="token operator">&lt;</span>Col xs<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">24</span><span class="token punctuation">}</span> style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">textAlign</span><span class="token operator">:</span> <span class="token string">&#39;right&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token string">&#39;10px&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span>Space<span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span>Button</span>
<span class="line">                shape<span class="token operator">=</span><span class="token string">&#39;circle&#39;</span></span>
<span class="line">                icon<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>SearchOutlined <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span></span>
<span class="line">                onClick<span class="token operator">=</span><span class="token punctuation">{</span>toggle<span class="token punctuation">}</span></span>
<span class="line">                type<span class="token operator">=</span><span class="token punctuation">{</span>searchVisible <span class="token operator">?</span> <span class="token string">&#39;primary&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;default&#39;</span><span class="token punctuation">}</span></span>
<span class="line">              <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">              <span class="token punctuation">{</span><span class="token function">renderOperations</span><span class="token punctuation">(</span>loadQuery<span class="token punctuation">.</span>data<span class="token operator">?.</span>page<span class="token punctuation">,</span> onAction<span class="token punctuation">)</span><span class="token punctuation">}</span></span>
<span class="line">            <span class="token operator">&lt;</span><span class="token operator">/</span>Space<span class="token operator">&gt;</span></span>
<span class="line">          <span class="token operator">&lt;</span><span class="token operator">/</span>Col<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span><span class="token operator">/</span>Row<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span>Table</span>
<span class="line">          dataSource<span class="token operator">=</span><span class="token punctuation">{</span>loadQuery<span class="token punctuation">.</span>data<span class="token operator">?.</span>list<span class="token punctuation">}</span></span>
<span class="line">          columns<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">renderColumns</span><span class="token punctuation">(</span>loadQuery<span class="token punctuation">.</span>data<span class="token punctuation">,</span> onAction<span class="token punctuation">)</span><span class="token punctuation">}</span></span>
<span class="line">          loading<span class="token operator">=</span><span class="token punctuation">{</span>loadQuery<span class="token punctuation">.</span>loading<span class="token punctuation">}</span></span>
<span class="line">          rowKey<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">row</span> <span class="token operator">=&gt;</span> row<span class="token punctuation">.</span>id<span class="token punctuation">}</span></span>
<span class="line">          pagination<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span></span>
<span class="line">          onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> __<span class="token punctuation">,</span> sorter</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setSorter</span><span class="token punctuation">(</span>sorter<span class="token punctuation">)</span><span class="token punctuation">}</span></span>
<span class="line">          rowSelection<span class="token operator">=</span><span class="token punctuation">{</span>rowSelection<span class="token punctuation">}</span></span>
<span class="line">        <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span>Row<span class="token operator">&gt;</span></span>
<span class="line">          <span class="token operator">&lt;</span>Col xs<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">24</span><span class="token punctuation">}</span> style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">textAlign</span><span class="token operator">:</span> <span class="token string">&#39;right&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token string">&#39;10px&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span>Pagination</span>
<span class="line">              total<span class="token operator">=</span><span class="token punctuation">{</span>loadQuery<span class="token punctuation">.</span>data<span class="token operator">?.</span>total <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">}</span></span>
<span class="line">              current<span class="token operator">=</span><span class="token punctuation">{</span>loadQuery<span class="token punctuation">.</span>data<span class="token operator">?.</span>current <span class="token operator">||</span> <span class="token number">1</span><span class="token punctuation">}</span></span>
<span class="line">              pageSize<span class="token operator">=</span><span class="token punctuation">{</span>loadQuery<span class="token punctuation">.</span>data<span class="token operator">?.</span>pageSize <span class="token operator">||</span> <span class="token number">10</span><span class="token punctuation">}</span></span>
<span class="line">              showSizeChanger</span>
<span class="line">              showQuickJumper</span>
<span class="line">              showTotal<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">total</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">总计</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>total<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">条</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">}</span></span>
<span class="line">              onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">current<span class="token punctuation">,</span> pageSize</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setPageConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span> current<span class="token punctuation">,</span> pageSize <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
<span class="line">            <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">          <span class="token operator">&lt;</span><span class="token operator">/</span>Col<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span><span class="token operator">/</span>Row<span class="token operator">&gt;</span></span>
<span class="line">      <span class="token operator">&lt;</span><span class="token operator">/</span>Card<span class="token operator">&gt;</span></span>
<span class="line">      <span class="token operator">&lt;</span>EditModal</span>
<span class="line">        title<span class="token operator">=</span><span class="token punctuation">{</span>modalState<span class="token punctuation">.</span>title<span class="token punctuation">}</span></span>
<span class="line">        visible<span class="token operator">=</span><span class="token punctuation">{</span>modalState<span class="token punctuation">.</span>visible<span class="token punctuation">}</span></span>
<span class="line">        data<span class="token operator">=</span><span class="token punctuation">{</span>modalState<span class="token punctuation">.</span>data<span class="token punctuation">}</span></span>
<span class="line">        row<span class="token operator">=</span><span class="token punctuation">{</span>modalState<span class="token punctuation">.</span>row<span class="token punctuation">}</span></span>
<span class="line">        fields<span class="token operator">=</span><span class="token punctuation">{</span>loadQuery<span class="token punctuation">.</span>data<span class="token operator">?.</span>fields<span class="token punctuation">}</span></span>
<span class="line">        onOk<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token function">setModalState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">visible</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">          loadQuery<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">        onCancel<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setModalState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">visible</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
<span class="line">      <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">      <span class="token punctuation">{</span></span>
<span class="line">        selectedRowKeys<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span></span>
<span class="line">          <span class="token operator">&lt;</span>FooterToolbar extra<span class="token operator">=</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token operator">&lt;</span>Space<span class="token operator">&gt;</span></span>
<span class="line">              <span class="token operator">&lt;</span>Button</span>
<span class="line">                type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span></span>
<span class="line">                onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">deleteRecords</span><span class="token punctuation">(</span>selectedRows<span class="token punctuation">)</span><span class="token punctuation">}</span></span>
<span class="line">              <span class="token operator">&gt;</span>删除<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span><span class="token operator">/</span>Space<span class="token operator">&gt;</span></span>
<span class="line">          <span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">        <span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token operator">&lt;</span><span class="token operator">/</span>PageContainer<span class="token operator">&gt;</span></span>
<span class="line">  <span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> Entity</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-3-editmodal-index-tsx" tabindex="-1"><a class="header-anchor" href="#_6-3-editmodal-index-tsx"><span>6.3 EditModal\\index.tsx</span></a></h3><p>src\\components\\EditModal\\index.tsx</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> message<span class="token punctuation">,</span> Modal <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;antd&#39;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> createForm <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@formily/core&#39;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> FormProvider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@formily/react&#39;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> request<span class="token punctuation">,</span> useRequest <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;umi&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> renderFormFields <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/utils/render/field&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> form <span class="token operator">=</span> <span class="token function">createForm</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">validateFirst</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> title<span class="token punctuation">,</span> visible<span class="token punctuation">,</span> onOk<span class="token punctuation">,</span> onCancel<span class="token punctuation">,</span> row<span class="token punctuation">,</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> <span class="token literal-property property">options</span><span class="token operator">:</span> any <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">memo<span class="token punctuation">,</span> item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">let</span> value <span class="token operator">=</span> item<span class="token punctuation">.</span>value<span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>row<span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> item<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">&#39;url&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            value <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">:([^/]+)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">match<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> row<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        memo<span class="token punctuation">[</span>item<span class="token punctuation">.</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">return</span> memo</span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">const</span> actionQuery <span class="token operator">=</span> <span class="token function">useRequest</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> method<span class="token punctuation">,</span> url<span class="token punctuation">,</span> data <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">request</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">{</span> method<span class="token punctuation">,</span> data <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">{</span></span>
<span class="line">            <span class="token literal-property property">manual</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token function">onSuccess</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token function">onOk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token function">formatResult</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token keyword">return</span> res<span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>visible <span class="token operator">&amp;&amp;</span> row<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            form<span class="token punctuation">.</span><span class="token function">setValues</span><span class="token punctuation">(</span>row<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token operator">&lt;</span>Modal</span>
<span class="line">            title<span class="token operator">=</span><span class="token punctuation">{</span>title<span class="token punctuation">}</span></span>
<span class="line">            visible<span class="token operator">=</span><span class="token punctuation">{</span>visible<span class="token punctuation">}</span></span>
<span class="line">            onOk<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">                actionQuery<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">url</span><span class="token operator">:</span> options<span class="token punctuation">.</span>url<span class="token punctuation">,</span> <span class="token literal-property property">method</span><span class="token operator">:</span> options<span class="token punctuation">.</span>method<span class="token punctuation">,</span> <span class="token literal-property property">data</span><span class="token operator">:</span> form<span class="token punctuation">.</span>values <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">            onCancel<span class="token operator">=</span><span class="token punctuation">{</span>onCancel<span class="token punctuation">}</span></span>
<span class="line">            destroyOnClose</span>
<span class="line">            maskClosable<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span></span>
<span class="line">            forceRender</span>
<span class="line">        <span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span>FormProvider form<span class="token operator">=</span><span class="token punctuation">{</span>form<span class="token punctuation">}</span><span class="token operator">&gt;</span></span>
<span class="line">                <span class="token punctuation">{</span><span class="token function">renderFormFields</span><span class="token punctuation">(</span>fields<span class="token punctuation">)</span><span class="token punctuation">}</span></span>
<span class="line">            <span class="token operator">&lt;</span><span class="token operator">/</span>FormProvider<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span><span class="token operator">/</span>Modal<span class="token operator">&gt;</span></span>
<span class="line"></span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> Entity</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-4-column-tsx" tabindex="-1"><a class="header-anchor" href="#_6-4-column-tsx"><span>6.4 column.tsx</span></a></h3><p>src\\utils\\render\\column.tsx</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> moment <span class="token keyword">from</span> <span class="token string">&#39;moment&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Tag<span class="token punctuation">,</span> Space <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;antd&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">FIELD_TYPES</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/constants/enums&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> renderOperations <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./operation&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token function-variable function">renderColumn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">column</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">switch</span> <span class="token punctuation">(</span>column<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">case</span> <span class="token constant">FIELD_TYPES</span><span class="token punctuation">.</span>datetime<span class="token operator">:</span></span>
<span class="line">            column<span class="token punctuation">.</span><span class="token function-variable function">render</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">moment</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&#39;YYYY-MM-DD HH:mm:ss&#39;</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token keyword">break</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">case</span> <span class="token constant">FIELD_TYPES</span><span class="token punctuation">.</span>switch<span class="token operator">:</span></span>
<span class="line">            column<span class="token punctuation">.</span><span class="token function-variable function">render</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token keyword">const</span> <span class="token punctuation">{</span> title <span class="token punctuation">}</span> <span class="token operator">=</span> column<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>value <span class="token operator">===</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token keyword">return</span> <span class="token operator">&lt;</span>Tag color<span class="token operator">=</span><span class="token punctuation">{</span>value <span class="token operator">?</span> <span class="token string">&#39;green&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;red&#39;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>title<span class="token punctuation">}</span> <span class="token operator">&lt;</span><span class="token operator">/</span>Tag<span class="token operator">&gt;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">            <span class="token keyword">break</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">default</span><span class="token operator">:</span></span>
<span class="line">            <span class="token keyword">break</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">renderColumns</span><span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> onAction</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">const</span> <span class="token punctuation">{</span> fields<span class="token punctuation">,</span> record <span class="token punctuation">}</span> <span class="token operator">=</span> data<span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">return</span> fields</span>
<span class="line">            <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">field</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span>field<span class="token punctuation">.</span>hideInColumn<span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">field</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token keyword">const</span> column <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>field <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">                column<span class="token punctuation">.</span>key <span class="token operator">=</span> column<span class="token punctuation">.</span>dataIndex <span class="token operator">=</span> field<span class="token punctuation">.</span>name<span class="token punctuation">;</span></span>
<span class="line">                <span class="token function">renderColumn</span><span class="token punctuation">(</span>column<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token keyword">return</span> column<span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">                <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;操作&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">dataIndex</span><span class="token operator">:</span> <span class="token string">&#39;operations&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">&#39;operations&#39;</span><span class="token punctuation">,</span> <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> row</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span></span>
<span class="line">                    <span class="token operator">&lt;</span>Space<span class="token operator">&gt;</span></span>
<span class="line">                        <span class="token punctuation">{</span><span class="token function">renderOperations</span><span class="token punctuation">(</span>record<span class="token punctuation">,</span> onAction<span class="token punctuation">,</span> row<span class="token punctuation">)</span><span class="token punctuation">}</span></span>
<span class="line">                    <span class="token operator">&lt;</span><span class="token operator">/</span>Space<span class="token operator">&gt;</span></span>
<span class="line">                <span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-5-field-tsx" tabindex="-1"><a class="header-anchor" href="#_6-5-field-tsx"><span>6.5 field.tsx</span></a></h3><p>src\\utils\\render\\field.tsx</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">FIELD_TYPES</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/constants/enums&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> moment <span class="token keyword">from</span> <span class="token string">&#39;moment&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Card<span class="token punctuation">,</span> InputNumber <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;antd&#39;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span></span>
<span class="line">    FormItem<span class="token punctuation">,</span> Input<span class="token punctuation">,</span> ArrayTable<span class="token punctuation">,</span> Editable<span class="token punctuation">,</span> Select<span class="token punctuation">,</span> Checkbox<span class="token punctuation">,</span> Switch<span class="token punctuation">,</span></span>
<span class="line">    FormLayout<span class="token punctuation">,</span> FormGrid</span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@formily/antd&#39;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> createSchemaField <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@formily/react&#39;</span></span>
<span class="line"><span class="token keyword">const</span> SchemaField <span class="token operator">=</span> <span class="token function">createSchemaField</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        FormItem<span class="token punctuation">,</span></span>
<span class="line">        Editable<span class="token punctuation">,</span></span>
<span class="line">        Input<span class="token punctuation">,</span></span>
<span class="line">        ArrayTable<span class="token punctuation">,</span></span>
<span class="line">        Select<span class="token punctuation">,</span></span>
<span class="line">        Checkbox<span class="token punctuation">,</span></span>
<span class="line">        Switch<span class="token punctuation">,</span></span>
<span class="line">        FormLayout<span class="token punctuation">,</span></span>
<span class="line">        Card<span class="token punctuation">,</span></span>
<span class="line">        FormGrid<span class="token punctuation">,</span></span>
<span class="line">        InputNumber</span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">renderFormFields</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token operator">&lt;</span>SchemaField<span class="token operator">&gt;</span></span>
<span class="line">            <span class="token punctuation">{</span></span>
<span class="line">                fields<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">field</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token keyword">switch</span> <span class="token punctuation">(</span>field<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                        <span class="token keyword">case</span> <span class="token constant">FIELD_TYPES</span><span class="token punctuation">.</span>datetime<span class="token operator">:</span></span>
<span class="line">                            <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">                                <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>String</span>
<span class="line">                                    name<span class="token operator">=</span><span class="token punctuation">{</span>field<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span>
<span class="line">                                    title<span class="token operator">=</span><span class="token punctuation">{</span>field<span class="token punctuation">.</span>title<span class="token punctuation">}</span></span>
<span class="line">                                    x<span class="token operator">-</span>decorator<span class="token operator">=</span><span class="token string">&quot;FormItem&quot;</span></span>
<span class="line">                                    required</span>
<span class="line">                                    x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;DatePicker&quot;</span></span>
<span class="line">                                    x<span class="token operator">-</span>component<span class="token operator">-</span>props<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">showTime</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">                                <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">                            <span class="token punctuation">)</span></span>
<span class="line">                        <span class="token keyword">case</span> <span class="token constant">FIELD_TYPES</span><span class="token punctuation">.</span>switch<span class="token operator">:</span></span>
<span class="line">                            <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">                                <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>String</span>
<span class="line">                                    name<span class="token operator">=</span><span class="token punctuation">{</span>field<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span>
<span class="line">                                    title<span class="token operator">=</span><span class="token punctuation">{</span>field<span class="token punctuation">.</span>title<span class="token punctuation">}</span></span>
<span class="line">                                    x<span class="token operator">-</span>decorator<span class="token operator">=</span><span class="token string">&quot;FormItem&quot;</span></span>
<span class="line">                                    required</span>
<span class="line">                                    x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;Switch&quot;</span></span>
<span class="line">                                <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">                            <span class="token punctuation">)</span></span>
<span class="line">                        <span class="token keyword">case</span> <span class="token constant">FIELD_TYPES</span><span class="token punctuation">.</span>number<span class="token operator">:</span></span>
<span class="line">                            <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">                                <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>String</span>
<span class="line">                                    name<span class="token operator">=</span><span class="token punctuation">{</span>field<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span>
<span class="line">                                    title<span class="token operator">=</span><span class="token punctuation">{</span>field<span class="token punctuation">.</span>title<span class="token punctuation">}</span></span>
<span class="line">                                    x<span class="token operator">-</span>decorator<span class="token operator">=</span><span class="token string">&quot;FormItem&quot;</span></span>
<span class="line">                                    required</span>
<span class="line">                                    x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;InputNumber&quot;</span></span>
<span class="line">                                <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">                            <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                        <span class="token keyword">default</span><span class="token operator">:</span></span>
<span class="line">                            <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">                                <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>String</span>
<span class="line">                                    name<span class="token operator">=</span><span class="token punctuation">{</span>field<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span>
<span class="line">                                    title<span class="token operator">=</span><span class="token punctuation">{</span>field<span class="token punctuation">.</span>title<span class="token punctuation">}</span></span>
<span class="line">                                    x<span class="token operator">-</span>decorator<span class="token operator">=</span><span class="token string">&quot;FormItem&quot;</span></span>
<span class="line">                                    required</span>
<span class="line">                                    x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;Input&quot;</span></span>
<span class="line">                                <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">                            <span class="token punctuation">)</span></span>
<span class="line">                    <span class="token punctuation">}</span></span>
<span class="line">                <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">renderSearchFields</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token operator">&lt;</span>SchemaField<span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>Void</span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;FormGrid&quot;</span></span>
<span class="line">                x<span class="token operator">-</span>component<span class="token operator">-</span>props<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span></span>
<span class="line">                    <span class="token literal-property property">maxColumns</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span></span>
<span class="line">                    <span class="token literal-property property">minColumns</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">            <span class="token operator">&gt;</span></span>
<span class="line">                <span class="token punctuation">{</span></span>
<span class="line">                    fields<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">field</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">                        <span class="token keyword">switch</span> <span class="token punctuation">(</span>field<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                            <span class="token keyword">case</span> <span class="token string">&#39;number&#39;</span><span class="token operator">:</span></span>
<span class="line">                                <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">                                    <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>String</span>
<span class="line">                                        name<span class="token operator">=</span><span class="token punctuation">{</span>field<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span>
<span class="line">                                        title<span class="token operator">=</span><span class="token punctuation">{</span>field<span class="token punctuation">.</span>title<span class="token punctuation">}</span></span>
<span class="line">                                        x<span class="token operator">-</span>decorator<span class="token operator">=</span><span class="token string">&quot;FormItem&quot;</span></span>
<span class="line">                                        x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;InputNumber&quot;</span></span>
<span class="line">                                    <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">                                <span class="token punctuation">)</span></span>
<span class="line">                            <span class="token keyword">case</span> <span class="token string">&#39;datetime&#39;</span><span class="token operator">:</span></span>
<span class="line">                                <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">                                    <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>String</span>
<span class="line">                                        name<span class="token operator">=</span><span class="token punctuation">{</span>field<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span>
<span class="line">                                        title<span class="token operator">=</span><span class="token punctuation">{</span>field<span class="token punctuation">.</span>title<span class="token punctuation">}</span></span>
<span class="line">                                        x<span class="token operator">-</span>decorator<span class="token operator">=</span><span class="token string">&quot;FormItem&quot;</span></span>
<span class="line">                                        x<span class="token operator">-</span>decorator<span class="token operator">-</span>props<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">gridSpan</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">                                        x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;DatePicker.RangePicker&quot;</span></span>
<span class="line">                                        x<span class="token operator">-</span>component<span class="token operator">-</span>props<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span></span>
<span class="line">                                            <span class="token literal-property property">showTime</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">ranges</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">                                                <span class="token string-property property">&#39;今天&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">moment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">startOf</span><span class="token punctuation">(</span><span class="token string">&#39;day&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">moment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">                                                <span class="token string-property property">&#39;本月&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">moment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">startOf</span><span class="token punctuation">(</span><span class="token string">&#39;month&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">moment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">endOf</span><span class="token punctuation">(</span><span class="token string">&#39;month&#39;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">                                                <span class="token string-property property">&#39;上周&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">moment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subtract</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token string">&#39;days&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">moment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">                                                <span class="token string-property property">&#39;上月&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">moment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subtract</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;months&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">startOf</span><span class="token punctuation">(</span><span class="token string">&#39;month&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">moment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subtract</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;months&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">endOf</span><span class="token punctuation">(</span><span class="token string">&#39;month&#39;</span><span class="token punctuation">)</span><span class="token punctuation">]</span></span>
<span class="line">                                            <span class="token punctuation">}</span></span>
<span class="line">                                        <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">                                    <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">                                <span class="token punctuation">)</span></span>
<span class="line">                            <span class="token keyword">default</span><span class="token operator">:</span></span>
<span class="line">                                <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">                                    <span class="token operator">&lt;</span>SchemaField<span class="token punctuation">.</span>String</span>
<span class="line">                                        name<span class="token operator">=</span><span class="token punctuation">{</span>field<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span>
<span class="line">                                        title<span class="token operator">=</span><span class="token punctuation">{</span>field<span class="token punctuation">.</span>title<span class="token punctuation">}</span></span>
<span class="line">                                        x<span class="token operator">-</span>decorator<span class="token operator">=</span><span class="token string">&quot;FormItem&quot;</span></span>
<span class="line">                                        x<span class="token operator">-</span>component<span class="token operator">=</span><span class="token string">&quot;Input&quot;</span></span>
<span class="line">                                    <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">                                <span class="token punctuation">)</span></span>
<span class="line">                        <span class="token punctuation">}</span></span>
<span class="line">                    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line">            <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token punctuation">.</span>Void<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span><span class="token operator">/</span>SchemaField<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-6-operation-tsx" tabindex="-1"><a class="header-anchor" href="#_6-6-operation-tsx"><span>6.6 operation.tsx</span></a></h3><p>src\\utils\\render\\operation.tsx</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Space<span class="token punctuation">,</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;antd&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">renderOperations</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">record <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> onAction<span class="token punctuation">,</span> row <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token operator">&lt;</span>Space<span class="token operator">&gt;</span></span>
<span class="line">            <span class="token punctuation">{</span></span>
<span class="line">                record<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">operation</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span></span>
<span class="line">                    <span class="token operator">&lt;</span>Button</span>
<span class="line">                        key<span class="token operator">=</span><span class="token punctuation">{</span>operation<span class="token punctuation">.</span>title<span class="token punctuation">}</span></span>
<span class="line">                        type<span class="token operator">=</span><span class="token punctuation">{</span>operation<span class="token punctuation">.</span>type<span class="token punctuation">}</span></span>
<span class="line">                        onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">onAction</span><span class="token punctuation">(</span>operation<span class="token punctuation">,</span> row<span class="token punctuation">)</span><span class="token punctuation">}</span></span>
<span class="line">                    <span class="token operator">&gt;</span><span class="token punctuation">{</span>operation<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span></span>
<span class="line">                <span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token operator">&lt;</span><span class="token operator">/</span>Space<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="参考" tabindex="-1"><a class="header-anchor" href="#参考"><span>参考</span></a></h2><ul><li>[运行时配置](https://next.umijs.org/docs/api/runtime-config</li></ul>`,111)])])}const i=s(e,[["render",o]]),r=JSON.parse('{"path":"/strong/106.16.4.cms.html","title":"","lang":"en-US","frontmatter":{},"git":{"updatedTime":1681290319000,"contributors":[{"name":"yutao","username":"yutao","email":"642231346@qq.com","commits":1,"url":"https://github.com/yutao"}],"changelog":[{"hash":"f5ab8c9d34991ec274f7f652439afe5b2afb6147","time":1681290319000,"email":"642231346@qq.com","author":"yutao","message":"modify"}]},"filePathRelative":"strong/106.16.4.cms.md"}');export{i as comp,r as data};
