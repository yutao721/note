import{_ as a,c as s,a as e,o as l}from"./app-CD1YpnS1.js";const i={};function t(r,n){return l(),s("div",null,[...n[0]||(n[0]=[e(`<h2 id="_1-服务器部署步骤" tabindex="-1"><a class="header-anchor" href="#_1-服务器部署步骤"><span>1. 服务器部署步骤</span></a></h2><ol><li>购买自己的域名</li><li>域名备案</li><li>购买服务器</li><li>配置服务器应用环境</li><li>安装配置服务器</li><li>项目远程部署和发布与更新</li></ol><h3 id="_1-2-购买域名" tabindex="-1"><a class="header-anchor" href="#_1-2-购买域名"><span>1.2 购买域名</span></a></h3><ul><li><a href="https://dnspod.cloud.tencent.com/" target="_blank" rel="noopener noreferrer">腾讯云</a></li><li><a href="https://wanwang.aliyun.com/" target="_blank" rel="noopener noreferrer">阿里云</a></li><li><a href="https://cloud.baidu.com/product/bcd.html" target="_blank" rel="noopener noreferrer">百度云</a></li><li><a href="https://www.22.cn/" target="_blank" rel="noopener noreferrer">爱名网</a></li><li><a href="https://sg.godaddy.com/" target="_blank" rel="noopener noreferrer">godaddy</a></li></ul><h3 id="_1-3-云主机" tabindex="-1"><a class="header-anchor" href="#_1-3-云主机"><span>1.3 云主机</span></a></h3><ul><li><a href="https://www.aliyun.com/" target="_blank" rel="noopener noreferrer">阿里云 ECS</a></li><li><a href="https://aws.amazon.com/cn/" target="_blank" rel="noopener noreferrer">亚马逊 AWS</a></li><li><a href="https://cloud.baidu.com/" target="_blank" rel="noopener noreferrer">百度云</a></li></ul><h3 id="_1-4-购买阿里云" tabindex="-1"><a class="header-anchor" href="#_1-4-购买阿里云"><span>1.4 购买阿里云</span></a></h3><ul><li>[选择配置](https://ecs-buy.aliyun.com/wizard/</li><li>镜像 Ubuntu 16.04 64 位</li></ul><h3 id="_1-5-备案" tabindex="-1"><a class="header-anchor" href="#_1-5-备案"><span>1.5 备案</span></a></h3><ul><li><a href="https://beian.aliyun.com" target="_blank" rel="noopener noreferrer">阿里云备案</a></li><li>[备案服务号管理](https://bsn.console.aliyun.com/</li></ul><h2 id="_2-安装软件" tabindex="-1"><a class="header-anchor" href="#_2-安装软件"><span>2 安装软件</span></a></h2><h3 id="_2-1-连接服务器" tabindex="-1"><a class="header-anchor" href="#_2-1-连接服务器"><span>2.1 连接服务器</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">ssh root@<span class="token number">47.92</span><span class="token number">.243</span><span class="token number">.226</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_2-2-升级系统" tabindex="-1"><a class="header-anchor" href="#_2-2-升级系统"><span>2.2 升级系统</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">apt<span class="token operator">-</span><span class="token keyword">get</span> update</span>
<span class="line">apt<span class="token operator">-</span><span class="token keyword">get</span> upgrade</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-3-安装工具包" tabindex="-1"><a class="header-anchor" href="#_2-3-安装工具包"><span>2.3 安装工具包</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">apt<span class="token operator">-</span><span class="token keyword">get</span> install wget curl git</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_2-4-安装-node" tabindex="-1"><a class="header-anchor" href="#_2-4-安装-node"><span>2.4 安装 node</span></a></h3><ul><li>使用<a href="https://github.com/creationix/nvm/blob/master/README.md" target="_blank" rel="noopener noreferrer">nvm</a>安装 node</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">wget <span class="token operator">-</span>qO<span class="token operator">-</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>raw<span class="token punctuation">.</span>githubusercontent<span class="token punctuation">.</span>com<span class="token operator">/</span>creationix<span class="token operator">/</span>nvm<span class="token operator">/</span>v0<span class="token punctuation">.</span><span class="token number">33.11</span><span class="token operator">/</span>install<span class="token punctuation">.</span>sh <span class="token operator">|</span> bash</span>
<span class="line">source  <span class="token operator">/</span>root<span class="token operator">/</span><span class="token punctuation">.</span>bashrc</span>
<span class="line">nvm install stable</span>
<span class="line">node <span class="token operator">-</span>v</span>
<span class="line">npm i cnpm <span class="token operator">-</span>g</span>
<span class="line">npm i nrm <span class="token operator">-</span>g</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-5-nginx" tabindex="-1"><a class="header-anchor" href="#_2-5-nginx"><span>2.5 nginx</span></a></h3><p>Nginx 是一个高性能的 HTTP 和反向代理服务器</p><h4 id="_2-5-1-安装" tabindex="-1"><a class="header-anchor" href="#_2-5-1-安装"><span>2.5.1 安装</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">apt<span class="token operator">-</span><span class="token keyword">get</span> install nginx</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_2-5-2-nginx-命令" tabindex="-1"><a class="header-anchor" href="#_2-5-2-nginx-命令"><span>2.5.2 nginx 命令</span></a></h4><table><thead><tr><th style="text-align:left;">名称</th><th style="text-align:left;">命令</th></tr></thead><tbody><tr><td style="text-align:left;">启动 nginx</td><td style="text-align:left;">nginx -c /etc/nginx/nginx.conf</td></tr><tr><td style="text-align:left;">关闭 nginx</td><td style="text-align:left;">nginx -s stop</td></tr><tr><td style="text-align:left;">重读配置文件</td><td style="text-align:left;">nginx -s reload kill -HUP nginx</td></tr><tr><td style="text-align:left;">常用命令</td><td style="text-align:left;">service nginx {start</td></tr></tbody></table><h3 id="_2-6-mysql" tabindex="-1"><a class="header-anchor" href="#_2-6-mysql"><span>2.6 mysql</span></a></h3><p>安装 mysql</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">apt install mysql-server -y</span>
<span class="line">apt install mysql-client</span>
<span class="line">apt install libmysqlclient-dev</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><a href="https://www.cnblogs.com/roadofstudy/p/7446690.html" target="_blank" rel="noopener noreferrer">root 用户重置密码问题</a></li></ul><h2 id="_3-部署项目" tabindex="-1"><a class="header-anchor" href="#_3-部署项目"><span>3. 部署项目</span></a></h2><h3 id="_3-1-部署后端项目" tabindex="-1"><a class="header-anchor" href="#_3-1-部署后端项目"><span>3.1 部署后端项目</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">git clone https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>gitee<span class="token punctuation">.</span>com<span class="token operator">/</span>zhufengpeixun<span class="token operator">/</span>2018projects1<span class="token punctuation">.</span>git</span>
<span class="line">cd 2018projects1<span class="token operator">/</span>zhufeng<span class="token operator">-</span>cms</span>
<span class="line">yarn</span>
<span class="line"></span>
<span class="line">wget http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>7xil5b<span class="token punctuation">.</span>com1<span class="token punctuation">.</span>z0<span class="token punctuation">.</span>glb<span class="token punctuation">.</span>clouddn<span class="token punctuation">.</span>com<span class="token operator">/</span>zhufeng<span class="token operator">-</span>cms<span class="token punctuation">.</span>sql</span>
<span class="line">mysql <span class="token operator">-</span>uroot <span class="token operator">-</span>proot</span>
<span class="line"><span class="token constant">CREATE</span> <span class="token constant">DATABASE</span> <span class="token constant">IF</span> <span class="token constant">NOT</span> <span class="token constant">EXISTS</span> zhufengcms <span class="token keyword">default</span> charset utf8 <span class="token constant">COLLATE</span> utf8_general_ci<span class="token punctuation">;</span></span>
<span class="line">use zhufengcms<span class="token punctuation">;</span></span>
<span class="line">source zhufengcms<span class="token punctuation">.</span>sql<span class="token punctuation">;</span></span>
<span class="line">yarn start</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-2-部署前端项目" tabindex="-1"><a class="header-anchor" href="#_3-2-部署前端项目"><span>3.2 部署前端项目</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">cd 2018projects1/zhufeng-cms-front</span>
<span class="line">yarn</span>
<span class="line">yarn build</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>/etc/nginx/nginx.conf</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">include /etc/nginx/conf.d/*.conf;</span>
<span class="line">include /etc/nginx/sites-enabled/*;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>include /etc/nginx/sites-enabled/default</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">root <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>www<span class="token operator">/</span>html<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">scp 1.txt root@47.92.243.226:/root</span>
<span class="line"></span>
<span class="line">server {</span>
<span class="line">    listen 80;</span>
<span class="line">    server_name 47.92.243.226;</span>
<span class="line"></span>
<span class="line">    root /var/www/html;</span>
<span class="line"></span>
<span class="line">    location / {</span>
<span class="line">        try_files $uri $uri/ @router;</span>
<span class="line">        index index.html;</span>
<span class="line">    }</span>
<span class="line"></span>
<span class="line">        location /api {</span>
<span class="line">                rewrite ^/api/(.*)$ /$1 break;</span>
<span class="line">                proxy_pass http://127.0.0.1:7001;</span>
<span class="line">        }</span>
<span class="line"></span>
<span class="line">        location @router {</span>
<span class="line">               rewrite ^.*$ /index.html break;</span>
<span class="line">        }</span>
<span class="line"></span>
<span class="line"></span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="参考" tabindex="-1"><a class="header-anchor" href="#参考"><span>参考</span></a></h2><ul><li><a href="https://yarn.bootcss.com/docs/usage/" target="_blank" rel="noopener noreferrer">yarn</a></li><li><a href="https://eggjs.org/zh-cn/core/deployment.html" target="_blank" rel="noopener noreferrer">deployment</a></li><li><a href="https://umijs.org/zh/guide/deploy.html" target="_blank" rel="noopener noreferrer">deploy</a></li></ul>`,42)])])}const c=a(i,[["render",t]]),o=JSON.parse('{"path":"/strong/30.cms-15-deploy.html","title":"","lang":"en-US","frontmatter":{},"git":{"updatedTime":1681290319000,"contributors":[{"name":"yutao","username":"yutao","email":"642231346@qq.com","commits":1,"url":"https://github.com/yutao"}],"changelog":[{"hash":"f5ab8c9d34991ec274f7f652439afe5b2afb6147","time":1681290319000,"email":"642231346@qq.com","author":"yutao","message":"modify"}]},"filePathRelative":"strong/30.cms-15-deploy.md"}');export{c as comp,o as data};
