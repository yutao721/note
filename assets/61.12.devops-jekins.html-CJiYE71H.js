import{_ as n,c as a,a as e,o as i}from"./app-CD1YpnS1.js";const t={};function l(p,s){return i(),a("div",null,[...s[0]||(s[0]=[e(`<h2 id="_1-持续集成" tabindex="-1"><a class="header-anchor" href="#_1-持续集成"><span>1. 持续集成</span></a></h2><ul><li>持续集成(Continuous Integration,CI) 代码合并、构建、布署、测试在一起，不断执行这个过程并对结果进行反馈</li><li>持续部署(Continuous Deloyment,CD) 部署到生产环境</li><li>持续交付(Continuous Delivery,CD) 部署到生产环境，给用户使用</li><li>DevOps 是一个完整的面向IT运维的工作流，以 IT 自动化以及持续集成（CI）、持续部署（CD）为基础，来优化程式开发、测试、系统运维等所有环节</li></ul><p><img src="http://img.zhufengpeixun.cn/cicd.jpg" alt="cicd"></p><h2 id="_2-jenkins" tabindex="-1"><a class="header-anchor" href="#_2-jenkins"><span>2. Jenkins</span></a></h2><p><img src="http://img.zhufengpeixun.cn/cicdwithoutdocker.png" alt="cicdwithoutdocker"></p><p><img src="http://img.zhufengpeixun.cn/dockercicd.png" alt="dockercicd"></p><h2 id="_3-git安装" tabindex="-1"><a class="header-anchor" href="#_3-git安装"><span>3. Git安装</span></a></h2><h3 id="_3-1-git服务器" tabindex="-1"><a class="header-anchor" href="#_3-1-git服务器"><span>3.1 git服务器</span></a></h3><h4 id="_3-1-1-安装git" tabindex="-1"><a class="header-anchor" href="#_3-1-1-安装git"><span>3.1.1 安装git</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">yum install -y git</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_3-1-2-创建git用户" tabindex="-1"><a class="header-anchor" href="#_3-1-2-创建git用户"><span>3.1.2 创建git用户</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">useradd git</span>
<span class="line">passwd git</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-1-3-创建仓库" tabindex="-1"><a class="header-anchor" href="#_3-1-3-创建仓库"><span>3.1.3 创建仓库</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">su - git</span>
<span class="line">mkdir -p ~/repos/app.git</span>
<span class="line">cd ~/repos/app.git</span>
<span class="line">git --bare init</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-2-git客户端-web服务器" tabindex="-1"><a class="header-anchor" href="#_3-2-git客户端-web服务器"><span>3.2 git客户端(web服务器)</span></a></h3><h4 id="_3-2-1-安装git" tabindex="-1"><a class="header-anchor" href="#_3-2-1-安装git"><span>3.2.1 安装git</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">yum install -y git</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">cd <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>src</span>
<span class="line">git clone git@<span class="token number">192.168</span><span class="token number">.20</span><span class="token number">.131</span><span class="token operator">:</span><span class="token operator">/</span>home<span class="token operator">/</span>git<span class="token operator">/</span>repos<span class="token operator">/</span>app<span class="token punctuation">.</span>git</span>
<span class="line">cd app</span>
<span class="line">git config <span class="token operator">--</span>global user<span class="token punctuation">.</span>email <span class="token string">&quot;zhufengjiagou@126.com&quot;</span></span>
<span class="line">git config <span class="token operator">--</span>global user<span class="token punctuation">.</span>name <span class="token string">&quot;zhufengjiagou&quot;</span></span>
<span class="line">touch index<span class="token punctuation">.</span>html</span>
<span class="line">git add <span class="token operator">-</span><span class="token constant">A</span></span>
<span class="line">git commit <span class="token operator">-</span>m<span class="token string">&quot;init&quot;</span></span>
<span class="line">git push origin master</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-2-2-免密码登录" tabindex="-1"><a class="header-anchor" href="#_3-2-2-免密码登录"><span>3.2.2 免密码登录</span></a></h4><h5 id="_3-2-2-1-生成秘钥" tabindex="-1"><a class="header-anchor" href="#_3-2-2-1-生成秘钥"><span>3.2.2.1 生成秘钥</span></a></h5><ul><li>先登录web服务器生成秘钥并拷贝公钥<div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">ssh-keygen -t rsa</span>
<span class="line">cat ~/.ssh/id_rsa.pub </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h5 id="_3-2-2-2-拷贝公钥" tabindex="-1"><a class="header-anchor" href="#_3-2-2-2-拷贝公钥"><span>3.2.2.2 拷贝公钥</span></a></h5><ul><li>再登录git服务器</li><li>要注意如果你要免登录<code>git</code>用户，就需要把自己的公钥拷贝到<code>git</code>用户的<code>authorized_keys</code>文件里</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">ssh<span class="token operator">-</span>keygen <span class="token operator">-</span>t rsa</span>
<span class="line">chmod <span class="token number">700</span> <span class="token operator">/</span>home<span class="token operator">/</span>git<span class="token operator">/</span><span class="token punctuation">.</span>ssh</span>
<span class="line">vi <span class="token operator">/</span>home<span class="token operator">/</span>git<span class="token operator">/</span><span class="token punctuation">.</span>ssh<span class="token operator">/</span>authorized_keys </span>
<span class="line">chmod <span class="token number">600</span> <span class="token operator">/</span>home<span class="token operator">/</span>git<span class="token operator">/</span><span class="token punctuation">.</span>ssh<span class="token operator">/</span>authorized_keys</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-2-2-3-允许公钥登录" tabindex="-1"><a class="header-anchor" href="#_3-2-2-3-允许公钥登录"><span>3.2.2.3 允许公钥登录</span></a></h5><ul><li>再登录git服务器</li><li>vim /etc/ssh/sshd_config</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">PubkeyAuthentication yes</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">systemctl restart sshd</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_4-jenkins" tabindex="-1"><a class="header-anchor" href="#_4-jenkins"><span>4. Jenkins</span></a></h2><ul><li><a href="https://www.oracle.com/technetwork/java/javase/downloads/index.html" target="_blank" rel="noopener noreferrer">jdk</a></li><li><a href="https://jenkins.io" target="_blank" rel="noopener noreferrer">jenkins官网</a></li></ul><h3 id="_4-1-安装jdk" tabindex="-1"><a class="header-anchor" href="#_4-1-安装jdk"><span>4.1 安装JDK</span></a></h3><ul><li><a href="https://www.oracle.com/technetwork/java/javase/downloads/java-archive-javase10-4425482.html" target="_blank" rel="noopener noreferrer">jdk</a></li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">cd <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>src</span>
<span class="line">wget http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>img<span class="token punctuation">.</span>zhufengpeixun<span class="token punctuation">.</span>cn<span class="token operator">/</span>jdk1<span class="token punctuation">.</span><span class="token number">8.0_211</span><span class="token punctuation">.</span>tar<span class="token punctuation">.</span>gz</span>
<span class="line">tar <span class="token operator">-</span>xzvf jdk1<span class="token punctuation">.</span><span class="token number">8.0_211</span><span class="token punctuation">.</span>tar<span class="token punctuation">.</span>gz </span>
<span class="line">cp <span class="token operator">-</span>r <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>src<span class="token operator">/</span>jdk1<span class="token punctuation">.</span><span class="token number">8.0_211</span> <span class="token operator">/</span>usr<span class="token operator">/</span>java</span>
<span class="line">rm <span class="token operator">-</span>rf <span class="token operator">/</span>usr<span class="token operator">/</span>bin<span class="token operator">/</span>java　<span class="token operator">&amp;&amp;</span>　ln <span class="token operator">-</span>s <span class="token operator">/</span>usr<span class="token operator">/</span>java<span class="token operator">/</span>jdk1<span class="token punctuation">.</span><span class="token number">8.0_211</span><span class="token operator">/</span>bin<span class="token operator">/</span>java <span class="token operator">/</span>usr<span class="token operator">/</span>bin<span class="token operator">/</span>java</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-2-修改配置文件" tabindex="-1"><a class="header-anchor" href="#_4-2-修改配置文件"><span>4.2 修改配置文件</span></a></h3><p>vi /etc/profile</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">JAVA_HOME</span><span class="token operator">=</span><span class="token operator">/</span>usr<span class="token operator">/</span>java<span class="token operator">/</span>jdk1<span class="token punctuation">.</span><span class="token number">8.0_211</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token constant">CLASSPATH</span><span class="token operator">=</span><span class="token punctuation">.</span><span class="token operator">:</span>$<span class="token punctuation">{</span><span class="token constant">JAVA_HOME</span><span class="token punctuation">}</span><span class="token operator">/</span>jre<span class="token operator">/</span>lib<span class="token operator">/</span>rt<span class="token punctuation">.</span>jar<span class="token operator">:</span>$<span class="token punctuation">{</span><span class="token constant">JAVA_HOME</span><span class="token punctuation">}</span><span class="token operator">/</span>lib<span class="token operator">/</span>dt<span class="token punctuation">.</span>jar<span class="token operator">:</span>$<span class="token punctuation">{</span><span class="token constant">JAVA_HOME</span><span class="token punctuation">}</span><span class="token operator">/</span>lib<span class="token operator">/</span>tools<span class="token punctuation">.</span>jar</span>
<span class="line"><span class="token keyword">export</span> <span class="token constant">PATH</span><span class="token operator">=</span>$<span class="token constant">PATH</span><span class="token operator">:</span>$<span class="token punctuation">{</span><span class="token constant">JAVA_HOME</span><span class="token punctuation">}</span><span class="token operator">/</span>bin</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-3-生效配置" tabindex="-1"><a class="header-anchor" href="#_4-3-生效配置"><span>4.3 生效配置</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">source /etc/profile</span>
<span class="line">java --version</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-4-安装jenkins" tabindex="-1"><a class="header-anchor" href="#_4-4-安装jenkins"><span>4.4 安装jenkins</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">wget <span class="token operator">-</span><span class="token constant">O</span> <span class="token operator">/</span>etc<span class="token operator">/</span>yum<span class="token punctuation">.</span>repos<span class="token punctuation">.</span>d<span class="token operator">/</span>jenkins<span class="token punctuation">.</span>repo https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>pkg<span class="token punctuation">.</span>jenkins<span class="token punctuation">.</span>io<span class="token operator">/</span>redhat<span class="token operator">-</span>stable<span class="token operator">/</span>jenkins<span class="token punctuation">.</span>repo</span>
<span class="line">rpm <span class="token operator">--</span><span class="token keyword">import</span> <span class="token literal-property property">https</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>pkg<span class="token punctuation">.</span>jenkins<span class="token punctuation">.</span>io<span class="token operator">/</span>redhat<span class="token operator">-</span>stable<span class="token operator">/</span>jenkins<span class="token punctuation">.</span>io<span class="token punctuation">.</span>key</span>
<span class="line">yum install <span class="token operator">-</span>y jenkins</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-5-关闭防火墙" tabindex="-1"><a class="header-anchor" href="#_4-5-关闭防火墙"><span>4.5 关闭防火墙</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">systemctl stop firewalld.service</span>
<span class="line">systemctl disable firewalld.service</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">javap <span class="token operator">-</span>v JNLPMain<span class="token punctuation">.</span>class</span>
<span class="line"><span class="token class-name">J2SE</span> <span class="token number">8</span> <span class="token operator">=</span> <span class="token number">52</span></span>
<span class="line"><span class="token constant">J2SE</span> <span class="token number">7</span> <span class="token operator">=</span> <span class="token number">51</span></span>
<span class="line"><span class="token constant">J2SE</span> <span class="token number">6.0</span> <span class="token operator">=</span> <span class="token number">50</span></span>
<span class="line"><span class="token constant">J2SE</span> <span class="token number">5.0</span> <span class="token operator">=</span> <span class="token number">49</span></span>
<span class="line"><span class="token constant">JDK</span> <span class="token number">1.4</span> <span class="token operator">=</span> <span class="token number">48</span></span>
<span class="line"><span class="token constant">JDK</span> <span class="token number">1.3</span> <span class="token operator">=</span> <span class="token number">47</span></span>
<span class="line"><span class="token constant">JDK</span> <span class="token number">1.2</span> <span class="token operator">=</span> <span class="token number">46</span></span>
<span class="line"><span class="token constant">JDK</span> <span class="token number">1.1</span> <span class="token operator">=</span> <span class="token number">45</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-6-启动jenkins" tabindex="-1"><a class="header-anchor" href="#_4-6-启动jenkins"><span>4.6 启动jenkins</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">systemctl start jenkins</span>
<span class="line">systemctl daemon-reload</span>
<span class="line">systemctl status jenkins</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-7-选择java版本" tabindex="-1"><a class="header-anchor" href="#_4-7-选择java版本"><span>4.7 选择java版本</span></a></h3><p>vi /etc/init.d/jenkins</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">candidates=&quot;</span>
<span class="line"> </span>
<span class="line"> </span>
<span class="line"> </span>
<span class="line"> </span>
<span class="line"> </span>
<span class="line">/usr/bin/java</span>
<span class="line">&quot;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-8-运行用户" tabindex="-1"><a class="header-anchor" href="#_4-8-运行用户"><span>4.8 运行用户</span></a></h3><p>一定要改一下root用户，不然流水线SCM拉不到脚本 vi /etc/sysconfig/jenkins</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">JENKINS_USER</span><span class="token operator">=</span><span class="token string">&quot;root&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_4-8-访问jenkins" tabindex="-1"><a class="header-anchor" href="#_4-8-访问jenkins"><span>4.8 访问jenkins</span></a></h3><p><a href="http://192.168.20.133:8080" target="_blank" rel="noopener noreferrer">http://192.168.20.133:8080</a></p><h3 id="_4-9-安装maven" tabindex="-1"><a class="header-anchor" href="#_4-9-安装maven"><span>4.9 安装maven</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">yum install maven -y</span>
<span class="line"></span>
<span class="line"> </span>
<span class="line"></span>
<span class="line">/etc/m2.conf</span>
<span class="line">/etc/maven</span>
<span class="line">/etc/maven/settings.xml</span>
<span class="line">/usr/bin/mvn</span>
<span class="line">/usr/share/maven/conf/settings.xml</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-10-使用jenkins" tabindex="-1"><a class="header-anchor" href="#_4-10-使用jenkins"><span>4.10 使用jenkins</span></a></h3><ul><li><a href="https://plugins.jenkins.io/" target="_blank" rel="noopener noreferrer">jenkins</a></li><li>OWASP(Open Web Application Security Project),开放式Web应用程序安全项目,它识别项目依赖关系，并检查是否存在任何已知的和公开的漏洞.</li><li>PAM（Pluggable Authentication Modules ）是由Sun提出的一种认证机制。它通过提供一些动态链接库和一套统一的API，将系统提供的服务和该服务的认证方式分开，使得系统管理员可以灵活地根据需要给不同的服务配置不同的认证方式而无需更改服务程序，同时也便于向系统中添加新的认证手段。 PAM模块是一种嵌入式模块，修改后即时生效。</li><li>LDAP（Light Directory Access Portocol）,它是基于X.500标准的轻量级目录访问协议</li></ul><table><thead><tr><th style="text-align:left;">插件名称</th><th style="text-align:left;">插件作用</th></tr></thead><tbody><tr><td style="text-align:left;">Folders</td><td style="text-align:left;">(<a href="https://plugins.jenkins.io/cloudbees-folder" target="_blank" rel="noopener noreferrer">https://plugins.jenkins.io/cloudbees-folder),这个插件支持用户使用目录管理项目，目录支持嵌套，并且支持目录中创建视图</a>,这个插件支持用户使用目录管理项目，目录支持嵌套，并且支持目录中创建视图)</td></tr><tr><td style="text-align:left;">OWASP Markup Formatter</td><td style="text-align:left;">OWASP标记格式化程序插件,使用OWASP Java HTML Sanitizer ，可以在项目描述等中输入安全的HTML标记</td></tr><tr><td style="text-align:left;">Build Timeout</td><td style="text-align:left;">构建超时,此插件允许构建在指定的时间过后自动终止</td></tr><tr><td style="text-align:left;">Credentials Binding</td><td style="text-align:left;">证书绑定</td></tr><tr><td style="text-align:left;">Timestamper</td><td style="text-align:left;">将时间戳添加到控制台输出</td></tr><tr><td style="text-align:left;">Workspace Cleanup</td><td style="text-align:left;">(<a href="https://plugins.jenkins.io/ws-cleanup" target="_blank" rel="noopener noreferrer">https://plugins.jenkins.io/ws-cleanup),这个插件支持在构建前后</a>,这个插件支持在构建前后) 删除或者部分删除workspace</td></tr><tr><td style="text-align:left;">Ant</td><td style="text-align:left;">向Jenkins添加Apache Ant支持</td></tr><tr><td style="text-align:left;">Gradle</td><td style="text-align:left;">这个插件允许Jenkins直接调用Gradle构建脚本</td></tr><tr><td style="text-align:left;">Pipeline</td><td style="text-align:left;">管道,一套插件可让您协调自动化</td></tr><tr><td style="text-align:left;">Pipeline: GitHub Groovy Libraries</td><td style="text-align:left;">允许从GitHub动态加载Pipeline Groovy库</td></tr><tr><td style="text-align:left;">Pipeline: Stage View</td><td style="text-align:left;">查看每一步的执行结果</td></tr><tr><td style="text-align:left;">GitHub Branch Source</td><td style="text-align:left;">GitHub组织文件夹插件</td></tr><tr><td style="text-align:left;">Git</td><td style="text-align:left;">(<a href="https://plugins.jenkins.io/git" target="_blank" rel="noopener noreferrer">https://plugins.jenkins.io/git),支持使用Github、GitLab、Gerrit等系统管理代码仓库</a>,支持使用Github、GitLab、Gerrit等系统管理代码仓库)</td></tr><tr><td style="text-align:left;">Subversion</td><td style="text-align:left;">(<a href="https://plugins.jenkins.io/subversion" target="_blank" rel="noopener noreferrer">https://plugins.jenkins.io/subversion),支持Subversion系统管理源代码</a>,支持Subversion系统管理源代码)</td></tr><tr><td style="text-align:left;">SSH Slaves</td><td style="text-align:left;">SSH登录到一个远程服务器以执行必要的脚本</td></tr><tr><td style="text-align:left;">Matrix Authorization Strategy</td><td style="text-align:left;">矩阵授权策略插件,提供基于矩阵的安全授权策略（全局和每个项目）</td></tr><tr><td style="text-align:left;">PAM Authentication</td><td style="text-align:left;">为Jenkins添加Unix可插入身份验证模块（PAM）支持</td></tr><tr><td style="text-align:left;">LDAP</td><td style="text-align:left;">(<a href="https://plugins.jenkins.io/ldap" target="_blank" rel="noopener noreferrer">https://plugins.jenkins.io/ldap),这个插件允许使用LDAP对用户进行认证，LDAP</a>,这个插件允许使用LDAP对用户进行认证，LDAP) 服务器可以为Active Directory 或者 OpenLDAP</td></tr><tr><td style="text-align:left;">Email Extension</td><td style="text-align:left;">这个插件是Jenkins的电子邮件发布者的替代品。它允许配置电子邮件通知的各个方面：发送电子邮件时，应该收到谁以及电子邮件说明的内容</td></tr><tr><td style="text-align:left;">Mailer</td><td style="text-align:left;">发邮件服务</td></tr><tr><td style="text-align:left;">Localization: Chinese (Simplified)</td><td style="text-align:left;">本地化构建</td></tr></tbody></table><h3 id="_4-11-下载插件加速" tabindex="-1"><a class="header-anchor" href="#_4-11-下载插件加速"><span>4.11 下载插件加速</span></a></h3><ul><li><a href="http://mirrors.jenkins-ci.org/status.html" target="_blank" rel="noopener noreferrer">mirrors</a></li><li><a href="https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json" target="_blank" rel="noopener noreferrer">update-center</a></li></ul><h3 id="_4-12-创建管理员用户" tabindex="-1"><a class="header-anchor" href="#_4-12-创建管理员用户"><span>4.12 创建管理员用户</span></a></h3><h3 id="_4-13-主要功能" tabindex="-1"><a class="header-anchor" href="#_4-13-主要功能"><span>4.13 主要功能</span></a></h3><ul><li>新建任务</li><li>用户</li><li>构建历史</li><li>系统管理</li><li>我的视图</li><li>Credentials</li><li>新建视图</li></ul><h2 id="_5-角色和用户管理" tabindex="-1"><a class="header-anchor" href="#_5-角色和用户管理"><span>5. 角色和用户管理</span></a></h2><ul><li>安装 Role-based Authorization Strategy 插件</li></ul><p><img src="http://img.zhufengpeixun.cn/manageroles.png" alt="manageroles"></p><p><img src="http://img.zhufengpeixun.cn/assignusers.png" alt="assignusers"></p><p><img src="http://img.zhufengpeixun.cn/jprojects.png" alt="jprojects"></p><h2 id="_6-参数化构建" tabindex="-1"><a class="header-anchor" href="#_6-参数化构建"><span>6. 参数化构建</span></a></h2><ul><li>Extended Choice Parameter 插件</li><li>Git Parameter 插件</li></ul><p><img src="http://img.zhufengpeixun.cn/parameterbuild.png" alt="parameterbuild"></p><p><img src="http://img.zhufengpeixun.cn/execshell.png" alt="execshell"></p><p><img src="http://img.zhufengpeixun.cn/extendparameterbuild.png" alt="extendparameterbuild"></p><p><img src="http://img.zhufengpeixun.cn/buildspec.png" alt="buildspec"></p><p>vi /etc/sysconfig/jenkins 一定要改一下root用户，不然流水线SCM拉不到脚本</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">JENKINS_USER</span><span class="token operator">=</span><span class="token string">&quot;root&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">git branch test</span>
<span class="line">git checkout test</span>
<span class="line">git branch</span>
<span class="line">touch <span class="token number">5</span><span class="token punctuation">.</span>txt</span>
<span class="line">git add <span class="token operator">-</span><span class="token constant">A</span></span>
<span class="line">git commit <span class="token operator">-</span>m<span class="token string">&quot;add 5.txt&quot;</span></span>
<span class="line">git git push origin test</span>
<span class="line">git push origin test</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_7-主从模式" tabindex="-1"><a class="header-anchor" href="#_7-主从模式"><span>7. 主从模式</span></a></h2><p><img src="http://img.zhufengpeixun.cn/masterslave2.jpg" alt="masterslave2"></p><p><img src="http://img.zhufengpeixun.cn/configureslave.png" alt="configureslave"></p><p><img src="http://img.zhufengpeixun.cn/limitproject.png" alt="limitproject"></p><p><img src="http://img.zhufengpeixun.cn/configslave2.png" alt="configslave2"></p><h2 id="_8-流水线" tabindex="-1"><a class="header-anchor" href="#_8-流水线"><span>8. 流水线</span></a></h2><ul><li>Pipeline 插件</li></ul><p><img src="http://img.zhufengpeixun.cn/mystageview.png" alt="mystageview"></p><p><img src="http://img.zhufengpeixun.cn/pipelinegrammar.png" alt="pipelinegrammar"></p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">node <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">stage</span> <span class="token punctuation">(</span><span class="token string">&#39;checkout&#39;</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">       echo <span class="token string">&quot;checkout&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token function">stage</span> <span class="token punctuation">(</span><span class="token string">&#39;build&#39;</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        echo <span class="token string">&quot;build&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token function">stage</span> <span class="token punctuation">(</span><span class="token string">&#39;deploy&#39;</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        echo <span class="token string">&quot;deploy&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token function">stage</span> <span class="token punctuation">(</span><span class="token string">&#39;test&#39;</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        echo <span class="token string">&quot;test&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="http://img.zhufengpeixun.cn/scmscript.png" alt="scmscript"></p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token function">node</span><span class="token punctuation">(</span><span class="token string">&#39;slave&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">stage</span> <span class="token punctuation">(</span><span class="token string">&#39;checkout&#39;</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">       echo <span class="token string">&quot;checkout2&quot;</span></span>
<span class="line">       sleep time<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token literal-property property">unit</span><span class="token operator">:</span> <span class="token string">&#39;SECONDS&#39;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token function">stage</span> <span class="token punctuation">(</span><span class="token string">&#39;build&#39;</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        echo <span class="token string">&quot;build&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token function">stage</span> <span class="token punctuation">(</span><span class="token string">&#39;deploy&#39;</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        echo <span class="token string">&quot;deploy&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token function">stage</span> <span class="token punctuation">(</span><span class="token string">&#39;test&#39;</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        echo <span class="token string">&quot;test&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_9-邮件通知" tabindex="-1"><a class="header-anchor" href="#_9-邮件通知"><span>9. 邮件通知</span></a></h2><ul><li>Email Extension Plugin 插件</li></ul><h2 id="_10-发布php项目" tabindex="-1"><a class="header-anchor" href="#_10-发布php项目"><span>10. 发布PHP项目</span></a></h2><h3 id="_10-1-创建本地项目" tabindex="-1"><a class="header-anchor" href="#_10-1-创建本地项目"><span>10.1 创建本地项目</span></a></h3><ul><li>先登录git服务器创建php仓库</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">mkdir -p /home/git/repos/dev-php.git</span>
<span class="line">cd /home/git/repos/dev-php.git</span>
<span class="line">git init --bare</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_10-2-拉取代码" tabindex="-1"><a class="header-anchor" href="#_10-2-拉取代码"><span>10.2 拉取代码</span></a></h3><ul><li>拉取并初始化本地仓库<div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">git clone  git@<span class="token number">192.168</span><span class="token number">.20</span><span class="token number">.131</span><span class="token operator">:</span><span class="token operator">/</span>home<span class="token operator">/</span>git<span class="token operator">/</span>repos<span class="token operator">/</span>dev<span class="token operator">-</span>php<span class="token punctuation">.</span>git</span>
<span class="line">cd php</span>
<span class="line">echo <span class="token string">&quot;&lt;?php echo info()?&gt;&quot;</span> <span class="token operator">&gt;</span> index<span class="token punctuation">.</span>php</span>
<span class="line">git add <span class="token operator">-</span><span class="token constant">A</span></span>
<span class="line">git commit <span class="token operator">-</span>m<span class="token string">&quot;add index.php&quot;</span></span>
<span class="line">git push origin master</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="_10-3-部署环境" tabindex="-1"><a class="header-anchor" href="#_10-3-部署环境"><span>10.3 部署环境</span></a></h3><ul><li>安装php</li><li>安装nginx</li></ul><h3 id="_10-4-创建项目" tabindex="-1"><a class="header-anchor" href="#_10-4-创建项目"><span>10.4 创建项目</span></a></h3><h4 id="_10-4-1-构建参数" tabindex="-1"><a class="header-anchor" href="#_10-4-1-构建参数"><span>10.4.1 构建参数</span></a></h4><p><img src="http://img.zhufengpeixun.cn/constphp.png" alt="constphp"></p><p><img src="http://img.zhufengpeixun.cn/phppipeline.png" alt="phppipeline"></p><h4 id="_10-4-2-pipeline脚本" tabindex="-1"><a class="header-anchor" href="#_10-4-2-pipeline脚本"><span>10.4.2 pipeline脚本</span></a></h4><ul><li><p>先在git服务器里创建一个<code>dev-php</code>项目</p></li><li><p>然后到web服务器上克隆此项目并在里面添加文件</p></li><li><p>在pipeline服务器里添加新的脚本</p></li><li><p>给web服务器添加标签名并在pipeline脚本中引用</p></li><li><p>web服务器上的工作目录 /var/lib/jenkins/workspace/dev-php</p></li><li><p>credentialsId git/git</p></li></ul><p>cat /root/pipeline/Jenkinsfile-php</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">node(&#39;webserver&#39;) {</span>
<span class="line">    stage (&#39;checkout&#39;){</span>
<span class="line">       checkout([$class: &#39;GitSCM&#39;, branches: [[name: &#39;*/master&#39;]], doGenerateSubmoduleConfigurations: false, extensions: [], submoduleCfg: [], userRemoteConfigs: [[credentialsId: &#39;8e8e63f9-4806-4f2e-8633-c92badbdefd7&#39;, url: &quot;git@192.168.20.131:/home/git/repos/\${JOB_NAME}.git&quot;]]])</span>
<span class="line">    }</span>
<span class="line">    stage (&#39;build&#39;){</span>
<span class="line">       sh &#39;&#39;&#39;rm -rf \${WORKSPACE}/.git</span>
<span class="line">       [ -e /data/backup ] ||  mkdir -p /data/backup</span>
<span class="line">       [ -e /usr/share/nginx/html/\${JOB_NAME} ] || mkdir /usr/share/nginx/html/\${JOB_NAME}</span>
<span class="line">       mv /usr/share/nginx/html/\${JOB_NAME} /data/backup/\${JOB_NAME}&quot;-$(date +%F_%T)&quot;</span>
<span class="line">       cp -rf \${WORKSPACE} /usr/share/nginx/html&#39;&#39;&#39;</span>
<span class="line">    }</span>
<span class="line">    stage (&#39;test&#39;){</span>
<span class="line">        sh &quot;curl http://www.\${JOB_NAME}.com/status&quot;</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_11-发布java项目" tabindex="-1"><a class="header-anchor" href="#_11-发布java项目"><span>11. 发布Java项目</span></a></h2><h3 id="_11-1-创建本地项目" tabindex="-1"><a class="header-anchor" href="#_11-1-创建本地项目"><span>11.1 创建本地项目</span></a></h3><ul><li>先登录git服务器创建java仓库</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">mkdir -p /home/git/repos/dev-java.git</span>
<span class="line">cd /home/git/repos/dev-java.git</span>
<span class="line">git init --bare</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_10-2-拉取代码-1" tabindex="-1"><a class="header-anchor" href="#_10-2-拉取代码-1"><span>10.2 拉取代码</span></a></h3><ul><li>拉取并初始化本地仓库<div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">git clone git@github<span class="token punctuation">.</span>com<span class="token operator">:</span>zhufengnodejs<span class="token operator">/</span>blog2<span class="token punctuation">.</span>git</span>
<span class="line">git clone git@<span class="token number">192.168</span><span class="token number">.20</span><span class="token number">.131</span><span class="token operator">:</span><span class="token operator">/</span>home<span class="token operator">/</span>git<span class="token operator">/</span>repos<span class="token operator">/</span>dev<span class="token operator">-</span>java<span class="token punctuation">.</span>git</span>
<span class="line">git add <span class="token operator">-</span><span class="token constant">A</span> <span class="token operator">&amp;&amp;</span> git commit <span class="token operator">-</span>m<span class="token string">&quot;blog2&quot;</span> <span class="token operator">&amp;&amp;</span> git push origin master</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="_10-3-部署环境-1" tabindex="-1"><a class="header-anchor" href="#_10-3-部署环境-1"><span>10.3 部署环境</span></a></h3><ul><li>jdk</li><li>maven</li><li>tomcat</li></ul><h3 id="_10-4-pipeline脚本" tabindex="-1"><a class="header-anchor" href="#_10-4-pipeline脚本"><span>10.4 pipeline脚本</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">node (&quot;webserver&quot;) {</span>
<span class="line">   stage(&#39;git checkout&#39;) { </span>
<span class="line">       checkout([$class: &#39;GitSCM&#39;, branches: [[name: &#39;*/master&#39;]], doGenerateSubmoduleConfigurations: false, extensions: [], submoduleCfg: [], userRemoteConfigs: [[credentialsId: &#39;8e8e63f9-4806-4f2e-8633-c92badbdefd7&#39;, url: &quot;git@192.168.20.131:/home/git/repos/\${JOB_NAME}.git&quot;]]])</span>
<span class="line">   }</span>
<span class="line">   stage(&#39;maven build&#39;) {</span>
<span class="line">        sh &#39;&#39;&#39;export JAVA_HOME=/usr/java/jdk1.8.0_211</span>
<span class="line">        /usr/bin/mvn clean package&#39;&#39;&#39;</span>
<span class="line">   }</span>
<span class="line">   stage(&#39;deploy&#39;) {</span>
<span class="line">        sh &#39;&#39;&#39;</span>
<span class="line">        JENKINS_NODE_COOKIE=dontkillme</span>
<span class="line">        export JAVA_HOME=/usr/java/jdk1.8.0_211</span>
<span class="line">        TOMCAT_NAME=tomcat</span>
<span class="line">        TOMCAT_HOME=/usr/local/$TOMCAT_NAME</span>
<span class="line">        WWWROOT=$TOMCAT_HOME/webapps/ROOT</span>
<span class="line"></span>
<span class="line">        if [ -d $WWWROOT ]; then</span>
<span class="line">           mv $WWWROOT /data/backup/\${TOMCAT_NAME}-$(date +&quot;%F_%T&quot;)</span>
<span class="line">        fi</span>
<span class="line">        unzip \${WORKSPACE}/target/*.war -d $WWWROOT</span>
<span class="line">        PID=$(ps -ef |grep $TOMCAT_NAME |egrep -v &quot;grep|$$&quot; |awk &#39;{print $2}&#39;)</span>
<span class="line">        [ -n &quot;$PID&quot; ] &amp;&amp; kill -9 $PID</span>
<span class="line">        /bin/bash $TOMCAT_HOME/bin/startup.sh&#39;&#39;&#39;</span>
<span class="line">   }</span>
<span class="line">   stage(&#39;test&#39;) {</span>
<span class="line">       sh &quot;curl http://www.de-java.com/status.html&quot;</span>
<span class="line">   }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_12-jenkins-docker实现持续集成" tabindex="-1"><a class="header-anchor" href="#_12-jenkins-docker实现持续集成"><span>12. Jenkins+Docker实现持续集成</span></a></h2><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">node (&quot;webserver&quot;) { </span>
<span class="line">   stage(&#39;Git Checkout&#39;) { </span>
<span class="line">        checkout([$class: &#39;GitSCM&#39;, branches: [[name: &#39;$Tag&#39;]], doGenerateSubmoduleConfigurations: false, extensions: [], submoduleCfg: [], userRemoteConfigs: [[url: &#39;git@192.168.0.219:/home/git/solo.git&#39;]]])</span>
<span class="line">   }</span>
<span class="line">   stage(&#39;Maven Build&#39;) {</span>
<span class="line">        sh &#39;&#39;&#39;</span>
<span class="line">        export JAVA_HOME=/usr/local/jdk1.8</span>
<span class="line">        /usr/local/maven3.5/bin/mvn clean package -Dmaven.test.skip=true</span>
<span class="line">        &#39;&#39;&#39;</span>
<span class="line">   }</span>
<span class="line">   stage(&#39;Build and Push Image&#39;) {</span>
<span class="line">    sh &#39;&#39;&#39;</span>
<span class="line">        REPOSITORY=192.168.0.2/project/dev-docker:\${Tag}</span>
<span class="line">        cat &gt; Dockerfile &lt;&lt; EOF</span>
<span class="line">        FROM 192.168.0.2/library/tomcat-85:latest</span>
<span class="line">        RUN rm -rf /usr/local/tomcat/webapps/ROOT</span>
<span class="line">        COPY target/*.war /usr/local/tomcat/webapps/ROOT.war</span>
<span class="line">        CMD [&quot;catalina.sh&quot;, &quot;run&quot;]</span>
<span class="line">        EOF</span>
<span class="line">        docker build -t $REPOSITORY .</span>
<span class="line">        docker login -u zhangrenyang -p xxx= 192.168.0.2</span>
<span class="line">        docker push $REPOSITORY</span>
<span class="line">    &#39;&#39;&#39;</span>
<span class="line">   }</span>
<span class="line">   stage(&#39;Deploy to Docker&#39;) {</span>
<span class="line">        sh &#39;&#39;&#39;</span>
<span class="line">        REPOSITORY=192.168.0.219/project/dev-docker:\${Tag}</span>
<span class="line">        docker rm -f dev-docker: |true</span>
<span class="line">        docker image rm $REPOSITORY |true</span>
<span class="line">        docker login -u zhangrenyang -p xxx= 192.168.0.2</span>
<span class="line">        docker container run -d --name dev-docker -v /usr/local/jdk1.8:/usr/local/jdk -p 88:8080 $REPOSITORY</span>
<span class="line">        &#39;&#39;&#39;</span>
<span class="line">   }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,119)])])}const c=n(t,[["render",l]]),o=JSON.parse('{"path":"/strong/61.12.devops-jekins.html","title":"","lang":"en-US","frontmatter":{},"git":{"updatedTime":1681290319000,"contributors":[{"name":"yutao","username":"yutao","email":"642231346@qq.com","commits":1,"url":"https://github.com/yutao"}],"changelog":[{"hash":"f5ab8c9d34991ec274f7f652439afe5b2afb6147","time":1681290319000,"email":"642231346@qq.com","author":"yutao","message":"modify"}]},"filePathRelative":"strong/61.12.devops-jekins.md"}');export{c as comp,o as data};
