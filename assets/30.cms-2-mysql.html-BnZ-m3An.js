import{_ as s,c as a,a as t,o as e}from"./app-CD1YpnS1.js";const p={};function c(l,n){return e(),a("div",null,[...n[0]||(n[0]=[t(`<h2 id="_1-什么是聚合函数" tabindex="-1"><a class="header-anchor" href="#_1-什么是聚合函数"><span>1. 什么是聚合函数</span></a></h2><p>对一组值进行计算，并返回计算后的值，一般用来统计数据</p><h3 id="_1-1-sum" tabindex="-1"><a class="header-anchor" href="#_1-1-sum"><span>1.1 SUM</span></a></h3><p>累加所有行的值</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">计算<span class="token constant">ID</span><span class="token operator">=</span><span class="token number">1</span>的学生的的总分</span>
<span class="line">select <span class="token constant">SUM</span><span class="token punctuation">(</span>grade<span class="token punctuation">)</span>  <span class="token keyword">as</span> <span class="token string">&#39;总分&#39;</span> from score where student_id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-2-avg" tabindex="-1"><a class="header-anchor" href="#_1-2-avg"><span>1.2 AVG</span></a></h3><p>计算所有行的平均值</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">计算<span class="token constant">ID</span><span class="token operator">=</span><span class="token number">1</span>的学生的的平均分</span>
<span class="line">select <span class="token constant">AVG</span><span class="token punctuation">(</span>grade<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">&#39;平均分&#39;</span> from score where student_id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-3-max、min" tabindex="-1"><a class="header-anchor" href="#_1-3-max、min"><span>1.3 MAX、MIN</span></a></h3><ul><li>计算所有行的最大值和最小值</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">select <span class="token constant">MAX</span><span class="token punctuation">(</span>grade<span class="token punctuation">)</span> 最高分<span class="token punctuation">,</span><span class="token constant">MIN</span><span class="token punctuation">(</span>grade<span class="token punctuation">)</span> 最低分 from score where student_id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_1-4-avg" tabindex="-1"><a class="header-anchor" href="#_1-4-avg"><span>1.4 AVG</span></a></h3><ul><li>计算所有行的平均值</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">select <span class="token constant">AVG</span><span class="token punctuation">(</span>grade<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">&#39;平均分&#39;</span> 最低分 from score where student_id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_1-5-count" tabindex="-1"><a class="header-anchor" href="#_1-5-count"><span>1.5 COUNT</span></a></h3><ul><li>计算值不为NULL的行</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">select <span class="token constant">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> from student<span class="token punctuation">;</span></span>
<span class="line">select <span class="token constant">COUNT</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> from student<span class="token punctuation">;</span></span>
<span class="line">select <span class="token constant">COUNT</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> from student<span class="token punctuation">;</span></span>
<span class="line">select <span class="token constant">COUNT</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span> from student<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-分组" tabindex="-1"><a class="header-anchor" href="#_2-分组"><span>2. 分组</span></a></h2><p>分组查询就是按某列的值进行分组，相同的值分成一组，然后可以对此组内进行求平均、求和等计算</p><p><img src="http://img.zhufengpeixun.cn/splitgroup.png" alt="splitgroup"></p><h3 id="_2-1-语法" tabindex="-1"><a class="header-anchor" href="#_2-1-语法"><span>2.1 语法</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> 列名<span class="token punctuation">,</span>查询表达式</span>
<span class="line"><span class="token constant">FROM</span>  <span class="token operator">&lt;</span>表名<span class="token operator">&gt;</span>  </span>
<span class="line"><span class="token constant">WHERE</span>  <span class="token operator">&lt;</span>条件<span class="token operator">&gt;</span></span>
<span class="line"><span class="token constant">GROUP</span> <span class="token constant">BY</span> <span class="token operator">&lt;</span>分组字段<span class="token operator">&gt;</span></span>
<span class="line"><span class="token constant">HAVING</span> 分组后的过滤条件</span>
<span class="line"><span class="token constant">ORDER</span> <span class="token constant">BY</span> 列名 <span class="token punctuation">[</span><span class="token constant">ASC</span><span class="token punctuation">,</span><span class="token constant">DESC</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token constant">LIMIT</span> 偏移量<span class="token punctuation">,</span>条数</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>SELECT列表中只能包含：</p><ul><li>被分组的列</li><li>为每个分组返回一个值的表达式，如聚合函数</li></ul><h3 id="_2-2-练习" tabindex="-1"><a class="header-anchor" href="#_2-2-练习"><span>2.2 练习</span></a></h3><ul><li>统计每位同学的平均成绩-单列分组<div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">select student_id<span class="token punctuation">,</span><span class="token function">avg</span><span class="token punctuation">(</span>grade<span class="token punctuation">)</span> from score group by student_id<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li>统计每门课程的最高分，并按分数从高到低排列<div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">select course_id<span class="token punctuation">,</span><span class="token function">max</span><span class="token punctuation">(</span>grade<span class="token punctuation">)</span> 平均分 from score group by course_id order by <span class="token function">max</span><span class="token punctuation">(</span>grade<span class="token punctuation">)</span> desc</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li>统计各省的男女同学人数-多列分组<div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">select province<span class="token punctuation">,</span>gender<span class="token punctuation">,</span><span class="token constant">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> from student group by province<span class="token punctuation">,</span>gender</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ul><h3 id="_2-3-分组筛选" tabindex="-1"><a class="header-anchor" href="#_2-3-分组筛选"><span>2.3 分组筛选</span></a></h3><h4 id="_2-3-1-语法" tabindex="-1"><a class="header-anchor" href="#_2-3-1-语法"><span>2.3.1 语法</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span>  <span class="token constant">FROM</span>  <span class="token operator">&lt;</span>表名<span class="token operator">&gt;</span></span>
<span class="line"><span class="token constant">WHERE</span> </span>
<span class="line"><span class="token constant">GROUP</span> <span class="token constant">BY</span> <span class="token punctuation">{</span>col_name<span class="token operator">|</span>expr<span class="token operator">|</span>position<span class="token punctuation">}</span></span>
<span class="line"><span class="token constant">HAVING</span>  <span class="token punctuation">{</span>col_name<span class="token operator">|</span>expr<span class="token operator">|</span>position<span class="token punctuation">}</span></span>
<span class="line"><span class="token constant">ORDER</span> <span class="token constant">BY</span> <span class="token punctuation">{</span>col_name<span class="token operator">|</span>expr<span class="token operator">|</span>position<span class="token punctuation">}</span> <span class="token punctuation">[</span><span class="token constant">ASC</span><span class="token operator">|</span><span class="token constant">DESC</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token constant">LIMIT</span> offset<span class="token punctuation">,</span>row_count</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>WHERE用于过滤掉不符合条件的记录</li><li>HAVING 用于过滤分组后的记录</li><li>GROUP BY用于对筛选后的结果进行分组</li></ol><h4 id="_2-3-2-练习" tabindex="-1"><a class="header-anchor" href="#_2-3-2-练习"><span>2.3.2 练习</span></a></h4><ul><li><p>统计学生人数超过1人的省份</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">select province<span class="token punctuation">,</span><span class="token constant">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> from student group by province having <span class="token constant">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">1</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>不及格次数大于1次的学生</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">select student_id<span class="token punctuation">,</span><span class="token constant">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> 不及格次数 from score where grade <span class="token operator">&lt;</span><span class="token number">60</span> group by student_id having <span class="token constant">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">1</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ul><h2 id="_3-子查询" tabindex="-1"><a class="header-anchor" href="#_3-子查询"><span>3. 子查询</span></a></h2><ul><li>子查询就是指出现在其它SQL语句中的SELECT语句,必须始终出现在圆括号中</li><li>子查询可以包含多个关键字或条件</li><li>子查询的外层查询可以是: SELECT、INSERT、UPDATE、SET等</li><li>子查询可以返回常量、一行数据、一列数据或其它子查询</li></ul><h3 id="_3-1-比较运算符的子查询" tabindex="-1"><a class="header-anchor" href="#_3-1-比较运算符的子查询"><span>3.1 比较运算符的子查询</span></a></h3><ul><li>= 等于</li><li><code>&gt;</code> 大于</li><li>&lt; 小于</li><li><code>&gt;</code>= 大于等于</li><li>&lt;= 小于等于</li><li>&lt;&gt; 不等于</li><li>!= 不等于</li><li>&lt;=&gt; 安全不等于</li></ul><h3 id="_3-2-查询年龄大于平均年龄的学生" tabindex="-1"><a class="header-anchor" href="#_3-2-查询年龄大于平均年龄的学生"><span>3.2 查询年龄大于平均年龄的学生</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> <span class="token constant">ROUND</span><span class="token punctuation">(</span><span class="token constant">AVG</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token constant">FROM</span> student<span class="token punctuation">;</span> </span>
<span class="line"></span>
<span class="line"><span class="token constant">SELECT</span> <span class="token operator">*</span> from student <span class="token constant">WHERE</span> age <span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token constant">SELECT</span> <span class="token constant">ROUND</span><span class="token punctuation">(</span><span class="token constant">AVG</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token constant">FROM</span> student<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-2-any-some-all" tabindex="-1"><a class="header-anchor" href="#_3-2-any-some-all"><span>3.2 ANY SOME ALL</span></a></h3><ul><li><blockquote><blockquote><blockquote><p>= &lt; &lt;= = &lt;&gt; !=</p></blockquote></blockquote></blockquote></li><li>ANY 任何一个</li><li>SOME 某些</li><li>ALL 全部</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">年龄大于陕西省任何一位同学</span>
<span class="line"><span class="token constant">SELECT</span> <span class="token operator">*</span> from student <span class="token constant">WHERE</span> age <span class="token operator">&gt;</span> <span class="token constant">ANY</span> <span class="token punctuation">(</span><span class="token constant">SELECT</span> age  <span class="token constant">FROM</span> student <span class="token constant">WHERE</span> province <span class="token operator">=</span> <span class="token string">&#39;陕西省&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">年龄大于陕西省某些同学</span>
<span class="line"><span class="token constant">SELECT</span> <span class="token operator">*</span> from student <span class="token constant">WHERE</span> age <span class="token operator">&gt;</span> <span class="token constant">SOME</span> <span class="token punctuation">(</span><span class="token constant">SELECT</span> age  <span class="token constant">FROM</span> student <span class="token constant">WHERE</span> province <span class="token operator">=</span> <span class="token string">&#39;陕西省&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">年龄大于陕西省所有同学</span>
<span class="line"><span class="token constant">SELECT</span> <span class="token operator">*</span> from student <span class="token constant">WHERE</span> age <span class="token operator">&gt;</span> <span class="token constant">ALL</span> <span class="token punctuation">(</span><span class="token constant">SELECT</span> age  <span class="token constant">FROM</span> student <span class="token constant">WHERE</span> province <span class="token operator">=</span> <span class="token string">&#39;陕西省&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-3-查询一下有考试成绩的学生信息" tabindex="-1"><a class="header-anchor" href="#_3-3-查询一下有考试成绩的学生信息"><span>3.3 查询一下有考试成绩的学生信息</span></a></h3><ul><li>[IN]</li><li>[NOT IN]</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> <span class="token operator">*</span> <span class="token constant">FROM</span> student where id <span class="token keyword">in</span> <span class="token punctuation">(</span><span class="token constant">SELECT</span> distinct student_id from score<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>[EXISTS]</li><li>[NOTEXISTS]<div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> <span class="token operator">*</span> <span class="token constant">FROM</span> student where <span class="token constant">EXISTS</span> <span class="token punctuation">(</span><span class="token constant">SELECT</span> distinct student_id from score where student<span class="token punctuation">.</span>id <span class="token operator">=</span> score<span class="token punctuation">.</span>student_id  <span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ul><h2 id="_4-表连接" tabindex="-1"><a class="header-anchor" href="#_4-表连接"><span>4. 表连接</span></a></h2><h3 id="_4-1-连接类型" tabindex="-1"><a class="header-anchor" href="#_4-1-连接类型"><span>4.1 连接类型</span></a></h3><ul><li>INNER JOIN 内连接</li><li>LEFT JOIN 左外连接</li><li>RIGHT JOIN 右外连接</li><li>ON 连接条件</li></ul><p><img src="http://img.zhufengpeixun.cn/tablejoin.jpg" alt="tablejoin"></p><h3 id="_4-2-连接条件" tabindex="-1"><a class="header-anchor" href="#_4-2-连接条件"><span>4.2 连接条件</span></a></h3><p>使用ON关键字来设定连接条件，也可以使用WHERE来代替</p><ul><li>ON来设定连接条件</li><li>也可以使用WHERE来对结果进行过滤</li></ul><h3 id="_4-3-内连接" tabindex="-1"><a class="header-anchor" href="#_4-3-内连接"><span>4.3 内连接</span></a></h3><p>显示左表和右表中符合条件的</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> <span class="token operator">*</span> <span class="token constant">FROM</span> student <span class="token constant">INNER</span> <span class="token constant">JOIN</span> score <span class="token constant">ON</span> student<span class="token punctuation">.</span>id <span class="token operator">=</span> score<span class="token punctuation">.</span>student_id<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_4-4-左外连接" tabindex="-1"><a class="header-anchor" href="#_4-4-左外连接"><span>4.4 左外连接</span></a></h3><p>显示左表的全部和右表符合条件的</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> <span class="token operator">*</span> <span class="token constant">FROM</span> student <span class="token constant">LEFT</span> <span class="token constant">JOIN</span> score <span class="token constant">ON</span> student<span class="token punctuation">.</span>id <span class="token operator">=</span> score<span class="token punctuation">.</span>student_id<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_4-5-右外连接" tabindex="-1"><a class="header-anchor" href="#_4-5-右外连接"><span>4.5 右外连接</span></a></h3><p>显示右表的全部和左表符合条件的</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> <span class="token operator">*</span> <span class="token constant">FROM</span> student <span class="token constant">RIGHT</span> <span class="token constant">JOIN</span> score <span class="token constant">ON</span> student<span class="token punctuation">.</span>id <span class="token operator">=</span> score<span class="token punctuation">.</span>student_id<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_4-6-多表连接" tabindex="-1"><a class="header-anchor" href="#_4-6-多表连接"><span>4.6 多表连接</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> student<span class="token punctuation">.</span>name<span class="token punctuation">,</span>course<span class="token punctuation">.</span>name<span class="token punctuation">,</span>score<span class="token punctuation">.</span>grade <span class="token constant">FROM</span> score </span>
<span class="line"><span class="token constant">INNER</span> <span class="token constant">JOIN</span> student <span class="token constant">ON</span> student<span class="token punctuation">.</span>id <span class="token operator">=</span> score<span class="token punctuation">.</span>student_id</span>
<span class="line"><span class="token constant">INNER</span> <span class="token constant">JOIN</span> course <span class="token constant">ON</span> course<span class="token punctuation">.</span>id <span class="token operator">=</span> score<span class="token punctuation">.</span>course_id<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-7-无限分类-自身连接" tabindex="-1"><a class="header-anchor" href="#_4-7-无限分类-自身连接"><span>4.7 无限分类[自身连接]</span></a></h3><h4 id="_4-7-1-建表" tabindex="-1"><a class="header-anchor" href="#_4-7-1-建表"><span>4.7.1 建表</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">CREATE</span> table <span class="token function">category</span><span class="token punctuation">(</span></span>
<span class="line"> id <span class="token function">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token constant">PRIMARY</span> <span class="token constant">KEY</span> <span class="token constant">AUTO_INCREMENT</span> <span class="token constant">NOT</span> <span class="token constant">NULL</span><span class="token punctuation">,</span></span>
<span class="line"> name <span class="token function">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"> parent_id <span class="token function">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-7-2-插入语句" tabindex="-1"><a class="header-anchor" href="#_4-7-2-插入语句"><span>4.7.2 插入语句</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">INSERT</span> <span class="token constant">INTO</span> <span class="token function">category</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>parent_id<span class="token punctuation">)</span></span>
<span class="line"><span class="token constant">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&#39;数码产品&#39;</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&#39;服装&#39;</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">&#39;食品&#39;</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">&#39;iPad&#39;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">&#39;李宁&#39;</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token string">&#39;康师傅&#39;</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-7-3-查询所有的顶级分类下面分类的数量" tabindex="-1"><a class="header-anchor" href="#_4-7-3-查询所有的顶级分类下面分类的数量"><span>4.7.3 查询所有的顶级分类下面分类的数量</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> c1<span class="token punctuation">.</span>id<span class="token punctuation">,</span>c1<span class="token punctuation">.</span>name<span class="token punctuation">,</span><span class="token constant">COUNT</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> </span>
<span class="line"><span class="token constant">FROM</span> category c1 <span class="token constant">INNER</span> <span class="token constant">JOIN</span> category c2 <span class="token constant">ON</span> c1<span class="token punctuation">.</span>id <span class="token operator">=</span> c2<span class="token punctuation">.</span>parent_id</span>
<span class="line"><span class="token constant">WHERE</span> c1<span class="token punctuation">.</span>parent_id <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line"><span class="token constant">GROUP</span> <span class="token constant">BY</span> c1<span class="token punctuation">.</span>id<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-7-4-父类变成名称" tabindex="-1"><a class="header-anchor" href="#_4-7-4-父类变成名称"><span>4.7.4 父类变成名称</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> c1<span class="token punctuation">.</span>id<span class="token punctuation">,</span>c1<span class="token punctuation">.</span>name<span class="token punctuation">,</span>p<span class="token punctuation">.</span>name</span>
<span class="line"><span class="token constant">FROM</span> category c1 <span class="token constant">LEFT</span> <span class="token constant">JOIN</span> category p <span class="token constant">ON</span> c1<span class="token punctuation">.</span>parent_id <span class="token operator">=</span> p<span class="token punctuation">.</span>id</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-8-删除重复记录-多表删除" tabindex="-1"><a class="header-anchor" href="#_4-8-删除重复记录-多表删除"><span>4.8 删除重复记录[多表删除]</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">INSERT</span> <span class="token constant">INTO</span> <span class="token function">category</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>parent_id<span class="token punctuation">)</span></span>
<span class="line"><span class="token constant">VALUES</span></span>
<span class="line"><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token string">&#39;iPad&#39;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token string">&#39;李宁&#39;</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token string">&#39;康师傅&#39;</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-8-1-子查询找要删除的id" tabindex="-1"><a class="header-anchor" href="#_4-8-1-子查询找要删除的id"><span>4.8.1 子查询找要删除的ID</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> <span class="token operator">*</span> <span class="token constant">FROM</span> category c1 <span class="token constant">LEFT</span> <span class="token constant">JOIN</span> </span>
<span class="line"><span class="token punctuation">(</span><span class="token constant">SELECT</span> id<span class="token punctuation">,</span>name from category <span class="token constant">GROUP</span> <span class="token constant">BY</span> name <span class="token constant">HAVING</span> <span class="token constant">COUNT</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">1</span><span class="token punctuation">)</span> c2</span>
<span class="line"><span class="token constant">ON</span> c1<span class="token punctuation">.</span>name <span class="token operator">=</span> c2<span class="token punctuation">.</span>name <span class="token constant">WHERE</span> c1<span class="token punctuation">.</span>id <span class="token operator">!=</span> c2<span class="token punctuation">.</span>id</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-8-2-通过in找要删除的id" tabindex="-1"><a class="header-anchor" href="#_4-8-2-通过in找要删除的id"><span>4.8.2 通过IN找要删除的ID</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> <span class="token operator">*</span> <span class="token constant">FROM</span> category c1 </span>
<span class="line"><span class="token constant">WHERE</span> c1<span class="token punctuation">.</span>name <span class="token constant">IN</span> </span>
<span class="line"><span class="token punctuation">(</span><span class="token constant">SELECT</span> name from category <span class="token constant">GROUP</span> <span class="token constant">BY</span> name <span class="token constant">HAVING</span> <span class="token constant">COUNT</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token constant">AND</span> c1<span class="token punctuation">.</span>id <span class="token constant">NOT</span> <span class="token constant">IN</span> </span>
<span class="line"><span class="token punctuation">(</span><span class="token constant">SELECT</span> <span class="token constant">MIN</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> from category <span class="token constant">GROUP</span> <span class="token constant">BY</span> name <span class="token constant">HAVING</span> <span class="token constant">COUNT</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-8-3-删除重复记录" tabindex="-1"><a class="header-anchor" href="#_4-8-3-删除重复记录"><span>4.8.3 删除重复记录</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">DELETE</span> <span class="token constant">FROM</span> category</span>
<span class="line"><span class="token constant">WHERE</span> name <span class="token constant">IN</span> </span>
<span class="line"><span class="token punctuation">(</span><span class="token constant">SELECT</span> <span class="token constant">NAME</span> <span class="token constant">FROM</span> <span class="token punctuation">(</span> <span class="token constant">SELECT</span> name from category <span class="token constant">GROUP</span> <span class="token constant">BY</span> name <span class="token constant">HAVING</span> <span class="token constant">COUNT</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token constant">AS</span> <span class="token constant">T1</span> <span class="token punctuation">)</span></span>
<span class="line"><span class="token constant">AND</span> id <span class="token constant">NOT</span> <span class="token constant">IN</span> </span>
<span class="line"><span class="token punctuation">(</span><span class="token constant">SELECT</span> id <span class="token constant">FROM</span> <span class="token punctuation">(</span><span class="token constant">SELECT</span> <span class="token constant">MIN</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> id from category <span class="token constant">GROUP</span> <span class="token constant">BY</span> name <span class="token constant">HAVING</span> <span class="token constant">COUNT</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token constant">AS</span> <span class="token constant">T2</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-9-多表更新" tabindex="-1"><a class="header-anchor" href="#_4-9-多表更新"><span>4.9 多表更新</span></a></h3><h4 id="_4-9-1-插入省份-insert-select" tabindex="-1"><a class="header-anchor" href="#_4-9-1-插入省份-insert-select"><span>4.9.1 (插入省份)INSERT SELECT</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">CREATE</span> <span class="token constant">TABLE</span> <span class="token function">province</span><span class="token punctuation">(</span>id int <span class="token constant">PRIMARY</span> <span class="token constant">KEY</span> <span class="token constant">AUTO_INCREMENT</span><span class="token punctuation">,</span>name <span class="token function">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token constant">INSERT</span> <span class="token constant">INTO</span> <span class="token function">province</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token constant">SELECT</span> <span class="token constant">DISTINCT</span> province <span class="token constant">FROM</span> student<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-9-2-更新省份" tabindex="-1"><a class="header-anchor" href="#_4-9-2-更新省份"><span>4.9.2 更新省份</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">UPDATE</span> student <span class="token constant">INNER</span> <span class="token constant">JOIN</span> province <span class="token constant">ON</span> student<span class="token punctuation">.</span>province<span class="token operator">=</span>province<span class="token punctuation">.</span>name</span>
<span class="line"> <span class="token constant">SET</span> student<span class="token punctuation">.</span>province<span class="token operator">=</span>province<span class="token punctuation">.</span>id </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-9-3-修改字段" tabindex="-1"><a class="header-anchor" href="#_4-9-3-修改字段"><span>4.9.3 修改字段</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">ALTER</span> <span class="token constant">TABLE</span> student </span>
<span class="line"><span class="token constant">CHANGE</span> <span class="token constant">COLUMN</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">province</span><span class="token template-punctuation string">\`</span></span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">province_id</span><span class="token template-punctuation string">\`</span></span> <span class="token function">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div>`,87)])])}const i=s(p,[["render",c]]),u=JSON.parse('{"path":"/strong/30.cms-2-mysql.html","title":"","lang":"en-US","frontmatter":{},"git":{"updatedTime":1681290319000,"contributors":[{"name":"yutao","username":"yutao","email":"642231346@qq.com","commits":1,"url":"https://github.com/yutao"}],"changelog":[{"hash":"f5ab8c9d34991ec274f7f652439afe5b2afb6147","time":1681290319000,"email":"642231346@qq.com","author":"yutao","message":"modify"}]},"filePathRelative":"strong/30.cms-2-mysql.md"}');export{i as comp,u as data};
