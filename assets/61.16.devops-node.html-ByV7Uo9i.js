import{_ as c,c as d,a as l,b as a,e as n,d as e,w as p,r as t,o as u}from"./app-CD1YpnS1.js";const k={};function m(v,s){const r=t("jenkins"),o=t("api"),i=t("userid");return u(),d("div",null,[s[8]||(s[8]=l(`<h2 id="_1-jenkins是什么" tabindex="-1"><a class="header-anchor" href="#_1-jenkins是什么"><span>1. Jenkins是什么?</span></a></h2><ul><li>Jenkins 是一款业界流行的开源持续集成工具，广泛用于项目开发，具有自动化构建、测试和部署等功能。</li></ul><p><img src="http://img.zhufengpeixun.cn/cicd.jpg" alt="cicd"></p><h2 id="_2-创建react项目" tabindex="-1"><a class="header-anchor" href="#_2-创建react项目"><span>2.创建React项目</span></a></h2><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">create-react-app react-cicd</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_3-安装jdk" tabindex="-1"><a class="header-anchor" href="#_3-安装jdk"><span>3. 安装JDK</span></a></h2><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">cd <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>src</span>
<span class="line">wget http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>img<span class="token punctuation">.</span>zhufengpeixun<span class="token punctuation">.</span>cn<span class="token operator">/</span>jdk1<span class="token punctuation">.</span><span class="token number">8.0_211</span><span class="token punctuation">.</span>tar<span class="token punctuation">.</span>gz</span>
<span class="line">tar <span class="token operator">-</span>xzvf jdk1<span class="token punctuation">.</span><span class="token number">8.0_211</span><span class="token punctuation">.</span>tar<span class="token punctuation">.</span>gz </span>
<span class="line">mkdir <span class="token operator">/</span>usr<span class="token operator">/</span>java</span>
<span class="line">cp <span class="token operator">-</span>r <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>src<span class="token operator">/</span>jdk1<span class="token punctuation">.</span><span class="token number">8.0_211</span> <span class="token operator">/</span>usr<span class="token operator">/</span>java</span>
<span class="line">ln <span class="token operator">-</span>s <span class="token operator">/</span>usr<span class="token operator">/</span>java<span class="token operator">/</span>jdk1<span class="token punctuation">.</span><span class="token number">8.0_211</span><span class="token operator">/</span>bin<span class="token operator">/</span>java <span class="token operator">/</span>usr<span class="token operator">/</span>bin<span class="token operator">/</span>java</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-安装jenkins" tabindex="-1"><a class="header-anchor" href="#_4-安装jenkins"><span>4. 安装jenkins</span></a></h2><ul><li><a href="https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json" target="_blank" rel="noopener noreferrer">update-center</a></li><li>1/etc/sysconfig/jenkins1 1JENKINS_USER=&quot;root&quot;\`</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">wget <span class="token operator">-</span><span class="token constant">O</span> <span class="token operator">/</span>etc<span class="token operator">/</span>yum<span class="token punctuation">.</span>repos<span class="token punctuation">.</span>d<span class="token operator">/</span>jenkins<span class="token punctuation">.</span>repo https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>pkg<span class="token punctuation">.</span>jenkins<span class="token punctuation">.</span>io<span class="token operator">/</span>redhat<span class="token operator">-</span>stable<span class="token operator">/</span>jenkins<span class="token punctuation">.</span>repo</span>
<span class="line">rpm <span class="token operator">--</span><span class="token keyword">import</span> <span class="token literal-property property">https</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>pkg<span class="token punctuation">.</span>jenkins<span class="token punctuation">.</span>io<span class="token operator">/</span>redhat<span class="token operator">-</span>stable<span class="token operator">/</span>jenkins<span class="token punctuation">.</span>io<span class="token punctuation">.</span>key</span>
<span class="line">yum install <span class="token operator">-</span>y jenkins</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-安装插件" tabindex="-1"><a class="header-anchor" href="#_5-安装插件"><span>5. 安装插件</span></a></h2>`,11)),a("ul",null,[a("li",null,[s[5]||(s[5]=n("Generic Webhook Trigger web触发器 ",-1)),a("ul",null,[a("li",null,[s[3]||(s[3]=n("http://",-1)),e(i,null,{default:p(()=>[s[2]||(s[2]=n(":",-1)),e(o,null,{default:p(()=>[s[1]||(s[1]=n("@",-1)),e(r,null,{default:p(()=>[...s[0]||(s[0]=[n(":端口/generic-webhook-trigger/invoke",-1)])]),_:1})]),_:1})]),_:1})]),s[4]||(s[4]=a("li",null,[a("a",{href:"http://admin:115c4e982964ccd7fc6082635e9812bc20@115.29.64.253:8080/generic-webhook-trigger/invoke",target:"_blank",rel:"noopener noreferrer"},"http://admin:115c4e982964ccd7fc6082635e9812bc20@115.29.64.253:8080/generic-webhook-trigger/invoke")],-1))])]),s[6]||(s[6]=a("li",null,"Publish Over SSH 通过SSH布署服务器",-1)),s[7]||(s[7]=a("li",null,"nvm wrapper 提供node环境",-1))]),s[9]||(s[9]=l(`<h2 id="_5-关闭防火墙" tabindex="-1"><a class="header-anchor" href="#_5-关闭防火墙"><span>5. 关闭防火墙</span></a></h2><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">systemctl stop firewalld.service</span>
<span class="line">systemctl disable firewalld.service</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-配置webhook" tabindex="-1"><a class="header-anchor" href="#_6-配置webhook"><span>6. 配置webhook</span></a></h2><ul><li>添加远程仓库地址，配置登录名及密码及分支</li><li>添加触发器</li><li>添加和测试钩子</li></ul><p><img src="http://img.zhufengpeixun.cn/liblib.png" alt="liblib"></p><p><img src="http://img.zhufengpeixun.cn/webhook.png" alt="webhook"></p><h2 id="_7-编写构建脚本" tabindex="-1"><a class="header-anchor" href="#_7-编写构建脚本"><span>7. 编写构建脚本</span></a></h2><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">npm config <span class="token keyword">set</span> registry http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>registry<span class="token punctuation">.</span>npm<span class="token punctuation">.</span>taobao<span class="token punctuation">.</span>org<span class="token operator">/</span> <span class="token operator">&amp;&amp;</span></span>
<span class="line">npm install <span class="token operator">&amp;&amp;</span></span>
<span class="line">npm <span class="token operator">-</span>rf build <span class="token operator">&amp;&amp;</span></span>
<span class="line">npm run build </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_9-安装nginx" tabindex="-1"><a class="header-anchor" href="#_9-安装nginx"><span>9. 安装nginx</span></a></h2><p>vi /etc/yum.repos.d/nginx.repo</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token punctuation">[</span>nginx<span class="token punctuation">]</span></span>
<span class="line">name<span class="token operator">=</span>nginx repo</span>
<span class="line">baseurl<span class="token operator">=</span>http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>nginx<span class="token punctuation">.</span>org<span class="token operator">/</span>packages<span class="token operator">/</span>centos<span class="token operator">/</span><span class="token number">7</span><span class="token operator">/</span>$basearch<span class="token operator">/</span></span>
<span class="line">gpgcheck<span class="token operator">=</span><span class="token number">0</span></span>
<span class="line">enabled<span class="token operator">=</span><span class="token number">1</span></span>
<span class="line">安装nginx</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">yum install nginx -y</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_10-布署服务器" tabindex="-1"><a class="header-anchor" href="#_10-布署服务器"><span>10. 布署服务器</span></a></h2><ul><li>Publish Over SSH</li><li>系统管理-系统设置里找到 <code>Publish over SSH</code></li><li>ssh-copy-id命令可以把本地主机的公钥复制到远程主机的authorized_keys文件上,实现免登录</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">ssh<span class="token operator">-</span>keygen <span class="token operator">-</span>t rsa</span>
<span class="line">ssh<span class="token operator">-</span>copy<span class="token operator">-</span>id <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.2</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">npm config <span class="token keyword">set</span> registry http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>registry<span class="token punctuation">.</span>npm<span class="token punctuation">.</span>taobao<span class="token punctuation">.</span>org<span class="token operator">/</span> <span class="token operator">&amp;&amp;</span></span>
<span class="line">npm install <span class="token operator">&amp;&amp;</span></span>
<span class="line">npm <span class="token operator">-</span>rf build <span class="token operator">&amp;&amp;</span></span>
<span class="line">npm run build </span>
<span class="line">cd build<span class="token operator">&amp;&amp;</span></span>
<span class="line">tar <span class="token operator">-</span>zcvf build<span class="token punctuation">.</span>tar<span class="token punctuation">.</span>gz <span class="token operator">*</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">cd /usr/share/nginx/html &amp;&amp;</span>
<span class="line">tar -xzvf build.tar.gz &amp;&amp;</span>
<span class="line">rm -rf build.tar.gz</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="http://img.zhufengpeixun.cn/publishssh.png" alt="publishssh"></p><p><img src="http://img.zhufengpeixun.cn/snedssh.png" alt="snedssh"></p><h2 id="_11-邮件提醒" tabindex="-1"><a class="header-anchor" href="#_11-邮件提醒"><span>11. 邮件提醒</span></a></h2>`,20))])}const g=c(k,[["render",m]]),b=JSON.parse('{"path":"/strong/61.16.devops-node.html","title":"","lang":"en-US","frontmatter":{},"git":{"updatedTime":1681290319000,"contributors":[{"name":"yutao","username":"yutao","email":"642231346@qq.com","commits":1,"url":"https://github.com/yutao"}],"changelog":[{"hash":"f5ab8c9d34991ec274f7f652439afe5b2afb6147","time":1681290319000,"email":"642231346@qq.com","author":"yutao","message":"modify"}]},"filePathRelative":"strong/61.16.devops-node.md"}');export{g as comp,b as data};
