import{_ as n,c as a,a as e,o as t}from"./app-CD1YpnS1.js";const p={};function l(o,s){return t(),a("div",null,[...s[0]||(s[0]=[e(`<h2 id="_1-搭建开发环境" tabindex="-1"><a class="header-anchor" href="#_1-搭建开发环境"><span>1. 搭建开发环境</span></a></h2><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">mkdir zhufeng_typescript_react</span>
<span class="line">cd zhufeng_typescript_react</span>
<span class="line">npm init -y</span>
<span class="line">cd zhufeng_typescript_react</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-生成ts配置文件" tabindex="-1"><a class="header-anchor" href="#_2-生成ts配置文件"><span>2. 生成ts配置文件</span></a></h2><ul><li><a href="http://www.typescriptlang.org/docs/handbook/tsconfig-json.html" target="_blank" rel="noopener noreferrer">tsconfig-json</a></li><li><a href="http://www.typescriptlang.org/docs/handbook/compiler-options.html" target="_blank" rel="noopener noreferrer">编译选项</a></li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">tsc --init</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>基本参数</strong></p><table><thead><tr><th style="text-align:left;">参数</th><th style="text-align:left;">解释</th></tr></thead><tbody><tr><td style="text-align:left;">target</td><td style="text-align:left;">用于指定编译之后的版本目标</td></tr><tr><td style="text-align:left;">module</td><td style="text-align:left;">生成的模块形式：none、commonjs、amd、system、umd、es6、es2015 或 esnext 只有 amd 和 system 能和 outFile 一起使用 target 为 es5 或更低时可用 es6 和 es2015</td></tr><tr><td style="text-align:left;">lib</td><td style="text-align:left;">编译时引入的 ES 功能库，包括：es5 、es6、es7、dom 等。如果未设置，则默认为： target 为 es5 时: [&quot;dom&quot;, &quot;es5&quot;, &quot;scripthost&quot;] target 为 es6 时: [&quot;dom&quot;, &quot;es6&quot;, &quot;dom.iterable&quot;, &quot;scripthost&quot;]</td></tr><tr><td style="text-align:left;">allowJs</td><td style="text-align:left;">是否允许编译JS文件，默认是false，即不编译JS文件</td></tr><tr><td style="text-align:left;">checkJs</td><td style="text-align:left;">是否检查和报告JS文件中的错误，默认是false</td></tr><tr><td style="text-align:left;">jsx</td><td style="text-align:left;">指定jsx代码用于的开发环境 <code>preserve</code>指保留JSX语法,扩展名为<code>.jsx</code>,react-native是指保留jsx语法，扩展名js,react指会编译成ES5语法 <a href="http://www.typescriptlang.org/docs/handbook/jsx.html" target="_blank" rel="noopener noreferrer">详解</a></td></tr><tr><td style="text-align:left;">declaration</td><td style="text-align:left;">是否在编译的时候生成相应的<code>.d.ts</code>声明文件</td></tr><tr><td style="text-align:left;">declarationDir</td><td style="text-align:left;">生成的 .d.ts 文件存放路径,默认与 .ts 文件相同</td></tr><tr><td style="text-align:left;">declarationMap</td><td style="text-align:left;">是否为声明文件.d.ts生成map文件</td></tr><tr><td style="text-align:left;">sourceMap</td><td style="text-align:left;">编译时是否生成<code>.map</code>文件</td></tr><tr><td style="text-align:left;">outFile</td><td style="text-align:left;">是否将输出文件合并为一个文件，值是一个文件路径名，只有设置<code>module</code>的值为<code>amd</code>和<code>system</code>模块时才支持这个配置</td></tr><tr><td style="text-align:left;">outDir</td><td style="text-align:left;">指定输出文件夹</td></tr><tr><td style="text-align:left;">rootDir</td><td style="text-align:left;">编译文件的根目录，编译器会在根目录查找入口文件</td></tr><tr><td style="text-align:left;">composite</td><td style="text-align:left;">是否编译构建引用项目</td></tr><tr><td style="text-align:left;">removeComments</td><td style="text-align:left;">是否将编译后的文件中的注释删掉</td></tr><tr><td style="text-align:left;">noEmit</td><td style="text-align:left;">不生成编译文件</td></tr><tr><td style="text-align:left;">importHelpers</td><td style="text-align:left;">是否引入<code>tslib</code>里的辅助工具函数</td></tr><tr><td style="text-align:left;">downlevelIteration</td><td style="text-align:left;">当target为<code>ES5</code>或<code>ES3</code>时，为<code>for-of</code>、<code>spread</code>和<code>destructuring</code>中的迭代器提供完全支持</td></tr><tr><td style="text-align:left;">isolatedModules</td><td style="text-align:left;">指定是否将每个文件作为单独的模块，默认为true</td></tr></tbody></table><p><strong>严格检查</strong></p><table><thead><tr><th style="text-align:left;">参数</th><th style="text-align:left;">解释</th></tr></thead><tbody><tr><td style="text-align:left;">strict</td><td style="text-align:left;">是否启动所有类型检查</td></tr><tr><td style="text-align:left;">noImplicitAny</td><td style="text-align:left;">不允许默认any类型</td></tr><tr><td style="text-align:left;">strictNullChecks</td><td style="text-align:left;">当设为true时，null和undefined值不能赋值给非这两种类型的值</td></tr><tr><td style="text-align:left;">strictFunctionTypes</td><td style="text-align:left;">是否使用函数参数双向协变检查</td></tr><tr><td style="text-align:left;">strictBindCallApply</td><td style="text-align:left;">是否对bind、call和apply绑定的方法的参数的检测是严格检测的</td></tr><tr><td style="text-align:left;">strictPropertyInitialization</td><td style="text-align:left;">检查类的非undefined属性是否已经在构造函数里初始化</td></tr><tr><td style="text-align:left;">noImplicitThis</td><td style="text-align:left;">不允许<code>this</code>表达式的值为<code>any</code>类型的时候</td></tr><tr><td style="text-align:left;">alwaysStrict</td><td style="text-align:left;">指定始终以严格模式检查每个模块</td></tr></tbody></table><p><strong>额外检查</strong></p><table><thead><tr><th style="text-align:left;">参数</th><th style="text-align:left;">解释</th></tr></thead><tbody><tr><td style="text-align:left;">noUnusedLocals</td><td style="text-align:left;">检查是否有定义了但是没有使用的变量</td></tr><tr><td style="text-align:left;">noUnusedParameters</td><td style="text-align:left;">检查是否有在函数体中没有使用的参数</td></tr><tr><td style="text-align:left;">noImplicitReturns</td><td style="text-align:left;">检查函数是否有返回值</td></tr><tr><td style="text-align:left;">noFallthroughCasesInSwitch</td><td style="text-align:left;">检查switch中是否有case没有使用break跳出</td></tr></tbody></table><p><strong>模块解析检查</strong></p><table><thead><tr><th style="text-align:left;">参数</th><th style="text-align:left;">解释</th></tr></thead><tbody><tr><td style="text-align:left;">moduleResolution</td><td style="text-align:left;">选择模块解析策略，有<code>node</code>和<code>classic</code>两种类型,<a href="http://www.typescriptlang.org/docs/handbook/module-resolution.html" target="_blank" rel="noopener noreferrer">详细说明</a></td></tr><tr><td style="text-align:left;">baseUrl</td><td style="text-align:left;">解析非相对模块名称的基本目录</td></tr><tr><td style="text-align:left;">paths</td><td style="text-align:left;">设置模块名到基于<code>baseUrl</code>的路径映射</td></tr><tr><td style="text-align:left;">rootDirs</td><td style="text-align:left;">可以指定一个路径列表，在构建时编译器会将这个路径列表中的路径中的内容都放到一个文件夹中</td></tr><tr><td style="text-align:left;">typeRoots</td><td style="text-align:left;">指定声明文件或文件夹的路径列表</td></tr><tr><td style="text-align:left;">types</td><td style="text-align:left;">用来指定需要包含的模块</td></tr><tr><td style="text-align:left;">allowSyntheticDefaultImports</td><td style="text-align:left;">允许从没有默认导出的模块中默认导入</td></tr><tr><td style="text-align:left;">esModuleInterop</td><td style="text-align:left;">为导入内容创建命名空间,实现CommonJS和ES模块之间的互相访问</td></tr><tr><td style="text-align:left;">preserveSymlinks</td><td style="text-align:left;">不把符号链接解析为其真实路径</td></tr></tbody></table><p><strong>sourcemap检查</strong></p><table><thead><tr><th style="text-align:left;">参数</th><th style="text-align:left;">解释</th></tr></thead><tbody><tr><td style="text-align:left;">sourceRoot</td><td style="text-align:left;">调试器应该找到TypeScript文件而不是源文件位置</td></tr><tr><td style="text-align:left;">mapRoot</td><td style="text-align:left;">调试器找到映射文件而非生成文件的位置，指定map文件的根路径</td></tr><tr><td style="text-align:left;">inlineSourceMap</td><td style="text-align:left;">指定是否将map文件的内容和js文件编译在一个同一个js文件中</td></tr><tr><td style="text-align:left;">inlineSources</td><td style="text-align:left;">是否进一步将.ts文件的内容也包含到输出文件中</td></tr></tbody></table><p><strong>试验选项</strong></p><table><thead><tr><th style="text-align:left;">参数</th><th style="text-align:left;">解释</th></tr></thead><tbody><tr><td style="text-align:left;">experimentalDecorators</td><td style="text-align:left;">是否启用实验性的装饰器特性</td></tr><tr><td style="text-align:left;">emitDecoratorMetadata</td><td style="text-align:left;">是否为装饰器提供元数据支持</td></tr></tbody></table><p><strong>试验选项</strong></p><table><thead><tr><th style="text-align:left;">参数</th><th style="text-align:left;">解释</th></tr></thead><tbody><tr><td style="text-align:left;">files</td><td style="text-align:left;">配置一个数组列表，里面包含指定文件的相对或绝对路径，编译器在编译的时候只会编译包含在files中列出的文件</td></tr><tr><td style="text-align:left;">include</td><td style="text-align:left;">include也可以指定要编译的路径列表，但是和files的区别在于，这里的路径可以是文件夹，也可以是文件</td></tr><tr><td style="text-align:left;">exclude</td><td style="text-align:left;">exclude表示要排除的、不编译的文件，他也可以指定一个列表</td></tr><tr><td style="text-align:left;">extends</td><td style="text-align:left;">extends可以通过指定一个其他的tsconfig.json文件路径，来继承这个配置文件里的配置</td></tr><tr><td style="text-align:left;">compileOnSave</td><td style="text-align:left;">在我们编辑了项目中文件保存的时候，编辑器会根据<code>tsconfig.json</code>的配置重新生成文件</td></tr><tr><td style="text-align:left;">references</td><td style="text-align:left;">一个对象数组,指定要引用的项目</td></tr></tbody></table><h2 id="_3-配置webpack" tabindex="-1"><a class="header-anchor" href="#_3-配置webpack"><span>3.配置webpack</span></a></h2><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">cnpm i typescript webpack webpack-cli webpack-dev-server ts-loader cross-env webpack-merge clean-webpack-plugin html-webpack-plugin -D</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">cnpm i babel<span class="token operator">-</span>loader @babel<span class="token operator">/</span>core @babel<span class="token operator">/</span>cli @babel<span class="token operator">/</span>plugin<span class="token operator">-</span>proposal<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">-</span>properties @babel<span class="token operator">/</span>plugin<span class="token operator">-</span>proposal<span class="token operator">-</span>object<span class="token operator">-</span>rest<span class="token operator">-</span>spread @babel<span class="token operator">/</span>preset<span class="token operator">-</span>env @babel<span class="token operator">/</span>preset<span class="token operator">-</span>typescript <span class="token operator">-</span><span class="token constant">D</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_3-1-package-json" tabindex="-1"><a class="header-anchor" href="#_3-1-package-json"><span>3.1 package.json</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">  <span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token string-property property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cross-env NODE_ENV=development webpack-dev-server --config ./config/webpack.dev.js&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string-property property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cross-env NODE_ENV=production webpack --config ./config/webpack.prod.js&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-2-config-webpack-base-js" tabindex="-1"><a class="header-anchor" href="#_3-2-config-webpack-base-js"><span>3.2 config\\webpack.base.js</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> CleanWebpackPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;clean-webpack-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;html-webpack-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&quot;./src/index.tsx&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;main.js&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">resolve</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">extensions</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;.ts&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;.tsx&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;.js&#39;</span><span class="token punctuation">]</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.tsx?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token string">&#39;ts-loader&#39;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">]</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"></span>
<span class="line">    <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">contentBase</span><span class="token operator">:</span> <span class="token string">&#39;./dist&#39;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token literal-property property">cleanOnceBeforeBuildPatterns</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;./dist&#39;</span><span class="token punctuation">]</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">&#39;./src/index.html&#39;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-3-config-webpack-dev-js" tabindex="-1"><a class="header-anchor" href="#_3-3-config-webpack-dev-js"><span>3.3 config\\webpack.dev.js</span></a></h3><p>config\\webpack.dev.js</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> smart <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack-merge&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> base <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./webpack.base&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">smart</span><span class="token punctuation">(</span>base<span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;development&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">devtool</span><span class="token operator">:</span> <span class="token string">&#39;inline-source-map&#39;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-4-config-webpack-prod-js" tabindex="-1"><a class="header-anchor" href="#_3-4-config-webpack-prod-js"><span>3.4 config\\webpack.prod.js</span></a></h3><p>config\\webpack.prod.js</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> smart <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack-merge&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> base <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./webpack.base&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">smart</span><span class="token punctuation">(</span>base<span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;production&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">devtool</span><span class="token operator">:</span> <span class="token boolean">false</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-配置eslint" tabindex="-1"><a class="header-anchor" href="#_4-配置eslint"><span>4.配置eslint</span></a></h2><h3 id="_4-1-安装" tabindex="-1"><a class="header-anchor" href="#_4-1-安装"><span>4.1 安装</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">cnpm i eslint @typescript-eslint/eslint-plugin @typescript-eslint/parser -D</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_4-2-eslintrc-json" tabindex="-1"><a class="header-anchor" href="#_4-2-eslintrc-json"><span>4.2 .eslintrc.json</span></a></h3><p>.eslintrc.json</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token string-property property">&quot;parser&quot;</span><span class="token operator">:</span> <span class="token string">&quot;@typescript-eslint/parser&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string-property property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token string">&quot;@typescript-eslint/eslint-plugin&quot;</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string-property property">&quot;extends&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token string">&quot;plugin:@typescript-eslint/recommended&quot;</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string-property property">&quot;rules&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token string-property property">&quot;@typescript-eslint/no-unused-vars&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-3-package-json" tabindex="-1"><a class="header-anchor" href="#_4-3-package-json"><span>4.3 package.json</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">  &quot;scripts&quot;: {</span>
<span class="line">    &quot;dev&quot;: &quot;cross-env NODE_ENV=development webpack-dev-server --config ./config/webpack.dev.js&quot;,</span>
<span class="line">    &quot;build&quot;: &quot;cross-env NODE_ENV=production webpack --config ./config/webpack.prod.js&quot;,</span>
<span class="line">+    &quot;eslint&quot;: &quot;eslint src --ext .js,.ts,.tsx&quot;</span>
<span class="line">  },</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-配置jest" tabindex="-1"><a class="header-anchor" href="#_5-配置jest"><span>5.配置jest</span></a></h2><h3 id="_5-1-安装配置" tabindex="-1"><a class="header-anchor" href="#_5-1-安装配置"><span>5.1 安装配置</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">cnpm i jest @types/jest ts-jest -D</span>
<span class="line">npx ts-jest config:init</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-2-src-calculator-tsx" tabindex="-1"><a class="header-anchor" href="#_5-2-src-calculator-tsx"><span>5.2 src\\calculator.tsx</span></a></h3><p>src\\calculator.tsx</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">a</span><span class="token operator">:</span> number<span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">minus</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">a</span><span class="token operator">:</span> number<span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> a <span class="token operator">-</span> b<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    sum<span class="token punctuation">,</span></span>
<span class="line">    minus</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-3-tests-calculator-spec-tsx" tabindex="-1"><a class="header-anchor" href="#_5-3-tests-calculator-spec-tsx"><span>5.3 tests\\calculator.spec.tsx</span></a></h3><p><strong>tests</strong>\\calculator.spec.tsx</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">let</span> math <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;../src/calculator&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#39;1+1=2&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">expect</span><span class="token punctuation">(</span>math<span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#39;1-1=0&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">expect</span><span class="token punctuation">(</span>math<span class="token punctuation">.</span><span class="token function">minus</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-4-package-json" tabindex="-1"><a class="header-anchor" href="#_5-4-package-json"><span>5.4 package.json</span></a></h3><p>package.json</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">  &quot;scripts&quot;: {</span>
<span class="line">+    &quot;test&quot;: &quot;jest&quot;</span>
<span class="line">  },</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-支持react" tabindex="-1"><a class="header-anchor" href="#_6-支持react"><span>6.支持react</span></a></h2><h3 id="_6-1-安装" tabindex="-1"><a class="header-anchor" href="#_6-1-安装"><span>6.1 安装</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">cnpm i react @types/react react-dom @types/react-dom -S</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_6-2-src-index-tsx" tabindex="-1"><a class="header-anchor" href="#_6-2-src-index-tsx"><span>6.2 src\\index.tsx</span></a></h3><p>src\\index.tsx</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> ReactElement<span class="token punctuation">,</span> DOMElement<span class="token punctuation">,</span> DetailedReactHTMLElement <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&#39;react-dom&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">let</span> <span class="token literal-property property">root</span><span class="token operator">:</span> HTMLElement <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">interface</span> <span class="token class-name">Props</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">className</span><span class="token operator">:</span> string</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">let</span> <span class="token literal-property property">props</span><span class="token operator">:</span> Props <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">className</span><span class="token operator">:</span> <span class="token string">&#39;title&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">let</span> <span class="token literal-property property">element</span><span class="token operator">:</span> DetailedReactHTMLElement<span class="token operator">&lt;</span>Props<span class="token punctuation">,</span> HTMLHeadingElement<span class="token operator">&gt;</span> <span class="token operator">=</span> React<span class="token punctuation">.</span>createElement<span class="token operator">&lt;</span>Props<span class="token punctuation">,</span> HTMLHeadingElement<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">&#39;h1&#39;</span><span class="token punctuation">,</span> props<span class="token punctuation">,</span> <span class="token string">&#39;hello&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> root<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-3-typings-react-tsx" tabindex="-1"><a class="header-anchor" href="#_6-3-typings-react-tsx"><span>6.3 typings\\react.tsx</span></a></h3><p><img src="http://img.zhufengpeixun.cn/elementss.png" alt="elements"></p><p>src\\typings\\react.tsx</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">ReactHTML</span> <span class="token punctuation">{</span> <span class="token literal-property property">h1</span><span class="token operator">:</span> any <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> type ReactText <span class="token operator">=</span> string <span class="token operator">|</span> number<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">export</span> type ReactChild <span class="token operator">=</span> ReactElement <span class="token operator">|</span> ReactText<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">export</span> type ReactNode <span class="token operator">=</span> ReactChild <span class="token operator">|</span> boolean <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">RefObject</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    readonly current<span class="token operator">:</span> <span class="token constant">T</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">ReactElement</span><span class="token operator">&lt;</span><span class="token constant">P</span> <span class="token operator">=</span> any<span class="token punctuation">,</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">string</span> <span class="token operator">=</span> string<span class="token operator">&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token constant">P</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token literal-property property">key</span><span class="token operator">:</span> Key <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">DOMElement</span><span class="token operator">&lt;</span><span class="token constant">P</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLAttributes</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">Element</span><span class="token operator">&gt;</span> <span class="token keyword">extends</span> <span class="token class-name">ReactElement</span><span class="token operator">&lt;</span><span class="token constant">P</span><span class="token punctuation">,</span> string<span class="token operator">&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">ref</span><span class="token operator">:</span> RefObject<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">DetailedReactHTMLElement</span><span class="token operator">&lt;</span><span class="token constant">P</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLAttributes</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLElement</span><span class="token operator">&gt;</span> <span class="token keyword">extends</span> <span class="token class-name">DOMElement</span><span class="token operator">&lt;</span><span class="token constant">P</span><span class="token punctuation">,</span> <span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">type</span><span class="token operator">:</span> keyof ReactHTML<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">export</span> type Key <span class="token operator">=</span> string <span class="token operator">|</span> number<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Attributes</span> <span class="token punctuation">{</span></span>
<span class="line">    key<span class="token operator">?</span><span class="token operator">:</span> Key<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">ClassAttributes</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token keyword">extends</span> <span class="token class-name">Attributes</span> <span class="token punctuation">{</span></span>
<span class="line">    ref<span class="token operator">?</span><span class="token operator">:</span> RefObject<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">DOMAttributes</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    children<span class="token operator">?</span><span class="token operator">:</span> ReactNode<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">HTMLAttributes</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token keyword">extends</span> <span class="token class-name">DOMAttributes</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    className<span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Element</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">HTMLElement</span> <span class="token keyword">extends</span> <span class="token class-name">Element</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">export</span> declare <span class="token keyword">function</span> createElement<span class="token operator">&lt;</span><span class="token constant">P</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLAttributes</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLElement</span><span class="token operator">&gt;</span><span class="token punctuation">(</span></span>
<span class="line">    <span class="token literal-property property">type</span><span class="token operator">:</span> keyof ReactHTML<span class="token punctuation">,</span></span>
<span class="line">    props<span class="token operator">?</span><span class="token operator">:</span> ClassAttributes<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">&amp;</span> <span class="token constant">P</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token operator">...</span>children<span class="token operator">:</span> ReactNode<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> DetailedReactHTMLElement<span class="token operator">&lt;</span><span class="token constant">P</span><span class="token punctuation">,</span> <span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_7-函数组件声明" tabindex="-1"><a class="header-anchor" href="#_7-函数组件声明"><span>7.函数组件声明</span></a></h2><h3 id="_7-1-src-index-tsx" tabindex="-1"><a class="header-anchor" href="#_7-1-src-index-tsx"><span>7.1 src\\index.tsx</span></a></h3><p>src\\index.tsx</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">import React, { ReactElement, DOMElement, DetailedReactHTMLElement, FunctionComponentElement } from &#39;react&#39;;</span>
<span class="line">import ReactDOM from &#39;react-dom&#39;;</span>
<span class="line">let root: HTMLElement | null = document.getElementById(&#39;root&#39;);</span>
<span class="line">+interface Props {</span>
<span class="line">+    className: string;</span>
<span class="line">+}</span>
<span class="line">+function Welcome(props: Props) {</span>
<span class="line">+    return React.createElement(&#39;h1&#39;, { className: props.className }, &#39;hello&#39;);</span>
<span class="line">+}</span>
<span class="line">+let props: Props = { className: &#39;title&#39; };</span>
<span class="line">+let element: FunctionComponentElement&lt;Props&gt; = React.createElement&lt;Props&gt;(Welcome, props);</span>
<span class="line">ReactDOM.render(element, root);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-2-typings-react-tsx" tabindex="-1"><a class="header-anchor" href="#_7-2-typings-react-tsx"><span>7.2 typings\\react.tsx</span></a></h3><p>src\\typings\\react.tsx</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">export interface ReactHTML { h1: any }</span>
<span class="line"></span>
<span class="line">export type ReactText = string | number;</span>
<span class="line">export type ReactChild = ReactElement | ReactText;</span>
<span class="line">export type ReactNode = ReactChild | boolean | null | undefined;</span>
<span class="line"></span>
<span class="line">export interface RefObject&lt;T&gt; {</span>
<span class="line">    readonly current: T | null;</span>
<span class="line">}</span>
<span class="line">export type JSXElementConstructor&lt;P&gt; =</span>
<span class="line">    | ((props: P) =&gt; ReactElement | null)</span>
<span class="line">export interface ReactElement&lt;P = any, T extends string | JSXElementConstructor&lt;any&gt; = string | JSXElementConstructor&lt;any&gt;&gt; {</span>
<span class="line">    type: T;</span>
<span class="line">    props: P;</span>
<span class="line">    key: Key | null;</span>
<span class="line">}</span>
<span class="line">export interface DOMElement&lt;P extends HTMLAttributes&lt;T&gt;, T extends Element&gt; extends ReactElement&lt;P, string&gt; {</span>
<span class="line">    ref: RefObject&lt;T&gt;;</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">export interface DetailedReactHTMLElement&lt;P extends HTMLAttributes&lt;T&gt;, T extends HTMLElement&gt; extends DOMElement&lt;P, T&gt; {</span>
<span class="line">    type: keyof ReactHTML;</span>
<span class="line">}</span>
<span class="line">export type Key = string | number;</span>
<span class="line"></span>
<span class="line">export interface Attributes {</span>
<span class="line">    key?: Key;</span>
<span class="line">}</span>
<span class="line">export interface ClassAttributes&lt;T&gt; extends Attributes {</span>
<span class="line">    ref?: RefObject&lt;T&gt;;</span>
<span class="line">}</span>
<span class="line">export interface DOMAttributes&lt;T&gt; {</span>
<span class="line">    children?: ReactNode;</span>
<span class="line">}</span>
<span class="line">export interface HTMLAttributes&lt;T&gt; extends DOMAttributes&lt;T&gt; {</span>
<span class="line">    className?: string;</span>
<span class="line">}</span>
<span class="line">export interface Element { }</span>
<span class="line">export interface HTMLElement extends Element { }</span>
<span class="line"></span>
<span class="line">+type PropsWithChildren&lt;P&gt; = P &amp; { children?: ReactNode };</span>
<span class="line">+interface FunctionComponent&lt;P = {}&gt; {</span>
<span class="line">+    (props: PropsWithChildren&lt;P&gt;): ReactElement | null;</span>
<span class="line">+}</span>
<span class="line">+interface FunctionComponentElement&lt;P&gt; extends ReactElement&lt;P, FunctionComponent&lt;P&gt;&gt; {</span>
<span class="line">+    ref?: &#39;ref&#39; extends keyof P ? P extends { ref?: infer R } ? R : never : never;</span>
<span class="line">+}</span>
<span class="line">+export declare function createElement&lt;P extends {}&gt;(</span>
<span class="line">+    type: FunctionComponent&lt;P&gt;,</span>
<span class="line">+    props?: Attributes &amp; P | null,</span>
<span class="line">+    ...children: ReactNode[]): FunctionComponentElement&lt;P&gt;;</span>
<span class="line">export declare function createElement&lt;P extends HTMLAttributes&lt;T&gt;, T extends HTMLElement&gt;(</span>
<span class="line">    type: keyof ReactHTML,</span>
<span class="line">    props?: ClassAttributes&lt;T&gt; &amp; P | null,</span>
<span class="line">    ...children: ReactNode[]): DetailedReactHTMLElement&lt;P, T&gt;;</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_8-类组件声明" tabindex="-1"><a class="header-anchor" href="#_8-类组件声明"><span>8.类组件声明</span></a></h2><h3 id="_8-1-src-index-tsx" tabindex="-1"><a class="header-anchor" href="#_8-1-src-index-tsx"><span>8.1 src\\index.tsx</span></a></h3><p>src\\index.tsx</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">import React, { ReactElement, DOMElement, DetailedReactHTMLElement, FunctionComponentElement, ComponentClass } from &#39;react&#39;;</span>
<span class="line">import ReactDOM from &#39;react-dom&#39;;</span>
<span class="line">let root: HTMLElement | null = document.getElementById(&#39;root&#39;);</span>
<span class="line">interface Props {</span>
<span class="line">    className: string;</span>
<span class="line">}</span>
<span class="line">+interface State {</span>
<span class="line">+    id: string</span>
<span class="line">+}</span>
<span class="line">+class Welcome extends React.Component&lt;Props, State&gt; {</span>
<span class="line">+    state = { id: &#39;id&#39; }</span>
<span class="line">+    render() {</span>
<span class="line">+        return React.createElement(&#39;h1&#39;, { className: props.className }, &#39;hello&#39;);</span>
<span class="line">+    }</span>
<span class="line">+}</span>
<span class="line"></span>
<span class="line">+let props: Props = { className: &#39;title&#39; };</span>
<span class="line">+let element: ReactElement&lt;Props&gt; = React.createElement&lt;Props&gt;(Welcome, props);</span>
<span class="line">ReactDOM.render(element, root);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8-2-typings-react-tsx" tabindex="-1"><a class="header-anchor" href="#_8-2-typings-react-tsx"><span>8.2 typings\\react.tsx</span></a></h3><p>src\\typings\\react.tsx</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">export interface ReactHTML { h1: any }</span>
<span class="line"></span>
<span class="line">export type ReactText = string | number;</span>
<span class="line">export type ReactChild = ReactElement | ReactText;</span>
<span class="line">export type ReactNode = ReactChild | boolean | null | undefined;</span>
<span class="line"></span>
<span class="line">export interface RefObject&lt;T&gt; {</span>
<span class="line">    readonly current: T | null;</span>
<span class="line">}</span>
<span class="line">export type JSXElementConstructor&lt;P&gt; =</span>
<span class="line">    | ((props: P) =&gt; ReactElement | null)</span>
<span class="line">export interface ReactElement&lt;P = any, T extends string | JSXElementConstructor&lt;any&gt; = string | JSXElementConstructor&lt;any&gt;&gt; {</span>
<span class="line">    type: T;</span>
<span class="line">    props: P;</span>
<span class="line">    key: Key | null;</span>
<span class="line">}</span>
<span class="line">export interface DOMElement&lt;P extends HTMLAttributes&lt;T&gt;, T extends Element&gt; extends ReactElement&lt;P, string&gt; {</span>
<span class="line">    ref: RefObject&lt;T&gt;;</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">export interface DetailedReactHTMLElement&lt;P extends HTMLAttributes&lt;T&gt;, T extends HTMLElement&gt; extends DOMElement&lt;P, T&gt; {</span>
<span class="line">    type: keyof ReactHTML;</span>
<span class="line">}</span>
<span class="line">export type Key = string | number;</span>
<span class="line"></span>
<span class="line">export interface Attributes {</span>
<span class="line">    key?: Key;</span>
<span class="line">}</span>
<span class="line">export interface ClassAttributes&lt;T&gt; extends Attributes {</span>
<span class="line">    ref?: RefObject&lt;T&gt;;</span>
<span class="line">}</span>
<span class="line">export interface DOMAttributes&lt;T&gt; {</span>
<span class="line">    children?: ReactNode;</span>
<span class="line">}</span>
<span class="line">export interface HTMLAttributes&lt;T&gt; extends DOMAttributes&lt;T&gt; {</span>
<span class="line">    className?: string;</span>
<span class="line">}</span>
<span class="line">export interface Element { }</span>
<span class="line">export interface HTMLElement extends Element { }</span>
<span class="line"></span>
<span class="line">type PropsWithChildren&lt;P&gt; = P &amp; { children?: ReactNode };</span>
<span class="line">interface FunctionComponent&lt;P = {}&gt; {</span>
<span class="line">    (props: PropsWithChildren&lt;P&gt;): ReactElement | null;</span>
<span class="line">}</span>
<span class="line">interface FunctionComponentElement&lt;P&gt; extends ReactElement&lt;P, FunctionComponent&lt;P&gt;&gt; {</span>
<span class="line">    ref?: &#39;ref&#39; extends keyof P ? P extends { ref?: infer R } ? R : never : never;</span>
<span class="line">}</span>
<span class="line">+type ComponentState = any;</span>
<span class="line">+declare class Component&lt;P, S&gt; {</span>
<span class="line">+    setState&lt;K extends keyof S&gt;(</span>
<span class="line">+        state: ((prevState: Readonly&lt;S&gt;, props: Readonly&lt;P&gt;) =&gt; (Pick&lt;S, K&gt; | S | null)) | (Pick&lt;S, K&gt; | S | null),</span>
<span class="line">+        callback?: () =&gt; void</span>
<span class="line">+    ): void;</span>
<span class="line">+    render(): ReactNode;</span>
<span class="line">+}</span>
<span class="line"></span>
<span class="line">+interface ComponentClass&lt;P = {}, S = ComponentState&gt; {</span>
<span class="line">+    new(props: P, context?: any): Component&lt;P, S&gt;;</span>
<span class="line">+}</span>
<span class="line">+export declare function createElement&lt;P extends {}&gt;(</span>
<span class="line">+    type: FunctionComponent&lt;P&gt; | ComponentClass&lt;P&gt; | string,</span>
<span class="line">+    props?: Attributes &amp; P | null,</span>
<span class="line">+    ...children: ReactNode[]): ReactElement&lt;P&gt;;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_9-使用redux" tabindex="-1"><a class="header-anchor" href="#_9-使用redux"><span>9.使用redux</span></a></h2><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">cnpm i redux react-redux @types/react-redux redux-logger redux-promise redux-thunk   @types/redux-logger @types/redux-promise -D </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_9-1-src-index-tsx" tabindex="-1"><a class="header-anchor" href="#_9-1-src-index-tsx"><span>9.1 src\\index.tsx</span></a></h3><p>src\\index.tsx</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">import React from &#39;react&#39;;</span>
<span class="line">import ReactDOM from &#39;react-dom&#39;;</span>
<span class="line">+import Counter1 from &#39;./components/Counter1&#39;;</span>
<span class="line">+import Counter2 from &#39;./components/Counter2&#39;;</span>
<span class="line">+import store from &#39;./store&#39;;</span>
<span class="line">+import { Provider } from &#39;react-redux&#39;;</span>
<span class="line">+ReactDOM.render(</span>
<span class="line">+    &lt;Provider store={store}&gt;</span>
<span class="line">+        &lt;Counter1 /&gt;</span>
<span class="line">+        &lt;Counter2 /&gt;</span>
<span class="line">+    &lt;/Provider&gt;, document.getElementById(&#39;root&#39;));</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_9-2-src-store-index-tsx" tabindex="-1"><a class="header-anchor" href="#_9-2-src-store-index-tsx"><span>9.2 src\\store\\index.tsx</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore<span class="token punctuation">,</span> Store<span class="token punctuation">,</span> AnyAction<span class="token punctuation">,</span> applyMiddleware<span class="token punctuation">,</span> StoreEnhancer<span class="token punctuation">,</span> StoreEnhancerStoreCreator <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;redux&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> logger <span class="token keyword">from</span> <span class="token string">&#39;redux-logger&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> thunk <span class="token keyword">from</span> <span class="token string">&#39;redux-thunk&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> promise <span class="token keyword">from</span> <span class="token string">&#39;redux-promise&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> reducer <span class="token keyword">from</span> <span class="token string">&#39;./reducers&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> CombinedState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./reducers&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">/* let thunkMiddleware = thunk.withExtraArgument&lt;{ amount: number }&gt;({ amount: 5 });</span>
<span class="line">type Ext = { name: string };</span>
<span class="line">type StateExt = { age: number };</span>
<span class="line">const enhancer: StoreEnhancer&lt;Ext, StateExt&gt; = (createStore: any): StoreEnhancerStoreCreator&lt;Ext, StateExt&gt; =&gt; (</span>
<span class="line">    &lt;S, A extends Action = AnyAction&gt;(...args: any[]): Store&lt;S &amp; StateExt, A&gt; &amp; Ext =&gt; {</span>
<span class="line">        const store = createStore(...args);</span>
<span class="line">        let getState = store.getState;</span>
<span class="line">        store.getState = function () {</span>
<span class="line">            let currentState = getState();</span>
<span class="line">            return {</span>
<span class="line">                ...currentState,</span>
<span class="line">                age: 10</span>
<span class="line">            }</span>
<span class="line">        }</span>
<span class="line">        return {</span>
<span class="line">            ...store,</span>
<span class="line">            name: &#39;zhufeng&#39;</span>
<span class="line">        }</span>
<span class="line">    }</span>
<span class="line">)</span>
<span class="line"></span>
<span class="line">const storeEnhancer: StoreEnhancer&lt;Ext, StateExt&gt; = compose(enhancer, applyMiddleware(routerMiddleware(history), thunkMiddleware));</span>
<span class="line">const storeEnhancerStoreCreator: StoreEnhancerStoreCreator&lt;Ext, StateExt&gt; = storeEnhancer(createStore);</span>
<span class="line">const store: Store&lt;CombinedState &amp; StateExt, AnyAction&gt; &amp; Ext = storeEnhancerStoreCreator(reducer);</span>
<span class="line">console.log(store.name);</span>
<span class="line">console.log(store.getState().age);</span>
<span class="line"> */</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token literal-property property">storeEnhancer</span><span class="token operator">:</span> StoreEnhancer <span class="token operator">=</span> <span class="token function">applyMiddleware</span><span class="token punctuation">(</span>promise<span class="token punctuation">,</span> thunk<span class="token punctuation">,</span> logger<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token literal-property property">storeEnhancerStoreCreator</span><span class="token operator">:</span> StoreEnhancerStoreCreator <span class="token operator">=</span> <span class="token function">storeEnhancer</span><span class="token punctuation">(</span>createStore<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token literal-property property">store</span><span class="token operator">:</span> Store<span class="token operator">&lt;</span>CombinedState<span class="token punctuation">,</span> AnyAction<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token function">storeEnhancerStoreCreator</span><span class="token punctuation">(</span>reducer<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> store<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_9-3-store-action-types-tsx" tabindex="-1"><a class="header-anchor" href="#_9-3-store-action-types-tsx"><span>9.3 store\\action-types.tsx</span></a></h3><p>src\\store\\action-types.tsx</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">INCREMENT1</span> <span class="token operator">=</span> <span class="token string">&#39;INCREMENT1&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">DECREMENT1</span> <span class="token operator">=</span> <span class="token string">&#39;DECREMENT1&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">INCREMENT2</span> <span class="token operator">=</span> <span class="token string">&#39;INCREMENT2&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">DECREMENT2</span> <span class="token operator">=</span> <span class="token string">&#39;DECREMENT2&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_9-4-reducers-counter1-tsx" tabindex="-1"><a class="header-anchor" href="#_9-4-reducers-counter1-tsx"><span>9.4 reducers\\counter1.tsx</span></a></h3><p>src\\store\\reducers\\counter1.tsx</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> types <span class="token keyword">from</span> <span class="token string">&#39;../action-types&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> AnyAction <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;redux&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Counter1State</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">number</span><span class="token operator">:</span> number</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">let</span> <span class="token literal-property property">initialState</span><span class="token operator">:</span> Counter1State <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">number</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">state</span><span class="token operator">:</span> Counter1State <span class="token operator">=</span> initialState<span class="token punctuation">,</span> <span class="token literal-property property">action</span><span class="token operator">:</span> AnyAction</span><span class="token punctuation">)</span><span class="token operator">:</span> Counter1State <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">case</span> types<span class="token punctuation">.</span><span class="token constant">INCREMENT1</span><span class="token operator">:</span></span>
<span class="line">            <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">number</span><span class="token operator">:</span> state<span class="token punctuation">.</span>number <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">case</span> types<span class="token punctuation">.</span><span class="token constant">DECREMENT1</span><span class="token operator">:</span></span>
<span class="line">            <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">number</span><span class="token operator">:</span> state<span class="token punctuation">.</span>number <span class="token operator">-</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">default</span><span class="token operator">:</span></span>
<span class="line">            <span class="token keyword">return</span> state<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_9-5-reducers-counter2-tsx" tabindex="-1"><a class="header-anchor" href="#_9-5-reducers-counter2-tsx"><span>9.5 reducers\\counter2.tsx</span></a></h3><p>src\\store\\reducers\\counter2.tsx</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> types <span class="token keyword">from</span> <span class="token string">&#39;../action-types&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> AnyAction <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;redux&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Counter2State</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">number</span><span class="token operator">:</span> number</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">let</span> <span class="token literal-property property">initialState</span><span class="token operator">:</span> Counter2State <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">number</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">state</span><span class="token operator">:</span> Counter2State <span class="token operator">=</span> initialState<span class="token punctuation">,</span> <span class="token literal-property property">action</span><span class="token operator">:</span> AnyAction</span><span class="token punctuation">)</span><span class="token operator">:</span> Counter2State <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">case</span> types<span class="token punctuation">.</span><span class="token constant">INCREMENT2</span><span class="token operator">:</span></span>
<span class="line">            <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">number</span><span class="token operator">:</span> state<span class="token punctuation">.</span>number <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">case</span> types<span class="token punctuation">.</span><span class="token constant">DECREMENT2</span><span class="token operator">:</span></span>
<span class="line">            <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">number</span><span class="token operator">:</span> state<span class="token punctuation">.</span>number <span class="token operator">-</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">default</span><span class="token operator">:</span></span>
<span class="line">            <span class="token keyword">return</span> state<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_9-6-reducers-index-tsx" tabindex="-1"><a class="header-anchor" href="#_9-6-reducers-index-tsx"><span>9.6 reducers\\index.tsx</span></a></h3><p>src\\store\\reducers\\index.tsx</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> combineReducers<span class="token punctuation">,</span> ReducersMapObject<span class="token punctuation">,</span> Reducer<span class="token punctuation">,</span> AnyAction <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;redux&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> counter1<span class="token punctuation">,</span> <span class="token punctuation">{</span> Counter1State <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./counter1&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> counter2<span class="token punctuation">,</span> <span class="token punctuation">{</span> Counter2State <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./counter2&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">interface</span> <span class="token class-name">Reducers</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">counter1</span><span class="token operator">:</span> Counter1State<span class="token punctuation">;</span></span>
<span class="line">    <span class="token literal-property property">counter2</span><span class="token operator">:</span> Counter2State<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">let</span> <span class="token literal-property property">reducers</span><span class="token operator">:</span> ReducersMapObject<span class="token operator">&lt;</span>Reducers<span class="token punctuation">,</span> AnyAction<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    counter1<span class="token punctuation">,</span></span>
<span class="line">    counter2</span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">export</span> type CombinedState <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token punctuation">[</span>key <span class="token keyword">in</span> keyof <span class="token keyword">typeof</span> reducers<span class="token punctuation">]</span><span class="token operator">:</span> ReturnType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> reducers<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">let</span> <span class="token literal-property property">rootReducer</span><span class="token operator">:</span> Reducer<span class="token operator">&lt;</span>CombinedState<span class="token punctuation">,</span> AnyAction<span class="token operator">&gt;</span> <span class="token operator">=</span> combineReducers<span class="token operator">&lt;</span>CombinedState<span class="token punctuation">,</span> AnyAction<span class="token operator">&gt;</span><span class="token punctuation">(</span>reducers<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> rootReducer<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_9-7-actions-counter1-tsx" tabindex="-1"><a class="header-anchor" href="#_9-7-actions-counter1-tsx"><span>9.7 actions\\counter1.tsx</span></a></h3><p>src\\store\\actions\\counter1.tsx</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> types <span class="token keyword">from</span> <span class="token string">&#39;../action-types&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> AnyAction<span class="token punctuation">,</span> Dispatch<span class="token punctuation">,</span> Store <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;redux&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> actions <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">increment1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> AnyAction <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> types<span class="token punctuation">.</span><span class="token constant">INCREMENT1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">promisePlus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> string<span class="token punctuation">,</span> <span class="token literal-property property">payload</span><span class="token operator">:</span> Promise<span class="token operator">&lt;</span><span class="token keyword">undefined</span><span class="token operator">&gt;</span> <span class="token punctuation">}</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">            <span class="token punctuation">{</span></span>
<span class="line">                <span class="token literal-property property">type</span><span class="token operator">:</span> types<span class="token punctuation">.</span><span class="token constant">INCREMENT1</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token literal-property property">payload</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">                        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">thunkPlus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Function <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token punctuation">(</span>dispatch<span class="token operator">:</span> Dispatch<span class="token punctuation">,</span> <span class="token literal-property property">getState</span><span class="token operator">:</span> Store<span class="token punctuation">[</span><span class="token string">&#39;getState&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> types<span class="token punctuation">.</span><span class="token constant">INCREMENT1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">decrement1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> AnyAction <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> types<span class="token punctuation">.</span><span class="token constant">DECREMENT1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> actions<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_9-8-actions-counter2-tsx" tabindex="-1"><a class="header-anchor" href="#_9-8-actions-counter2-tsx"><span>9.8 actions\\counter2.tsx</span></a></h3><p>src\\store\\actions\\counter2.tsx</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> types <span class="token keyword">from</span> <span class="token string">&#39;../action-types&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> AnyAction <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;redux&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">increment2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> AnyAction <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> types<span class="token punctuation">.</span><span class="token constant">INCREMENT2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">decrement2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> AnyAction <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> types<span class="token punctuation">.</span><span class="token constant">DECREMENT2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_9-9-src-components-counter1-tsx" tabindex="-1"><a class="header-anchor" href="#_9-9-src-components-counter1-tsx"><span>9.9 src\\components\\Counter1.tsx</span></a></h3><p>src\\components\\Counter1.tsx</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> actions <span class="token keyword">from</span> <span class="token string">&#39;../store/actions/counter1&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> CombinedState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;../store/reducers&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Counter1State <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;../store/reducers/counter1&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-redux&#39;</span><span class="token punctuation">;</span></span>
<span class="line">type Props <span class="token operator">=</span> Counter1State <span class="token operator">&amp;</span> <span class="token keyword">typeof</span> actions<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Counter1</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span><span class="token operator">&lt;</span>Props<span class="token operator">&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">let</span> <span class="token punctuation">{</span> number<span class="token punctuation">,</span> increment1<span class="token punctuation">,</span> promisePlus<span class="token punctuation">,</span> thunkPlus <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>number<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>increment1<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>promisePlus<span class="token punctuation">}</span><span class="token operator">&gt;</span>promise<span class="token operator">+</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>thunkPlus<span class="token punctuation">}</span><span class="token operator">&gt;</span>thunk<span class="token operator">+</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">let</span> mapStateToProps <span class="token operator">=</span> <span class="token punctuation">(</span>state<span class="token operator">:</span> CombinedState<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token parameter">Counter1State</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>counter1<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span></span>
<span class="line">    mapStateToProps<span class="token punctuation">,</span></span>
<span class="line">    actions</span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">(</span>Counter1<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_9-10-src-components-counter2-tsx" tabindex="-1"><a class="header-anchor" href="#_9-10-src-components-counter2-tsx"><span>9.10 src\\components\\Counter2.tsx</span></a></h3><p>src\\components\\Counter2.tsx</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> actions <span class="token keyword">from</span> <span class="token string">&#39;../store/actions/counter2&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> CombinedState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;../store/reducers&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Counter2State <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;../store/reducers/counter2&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-redux&#39;</span><span class="token punctuation">;</span></span>
<span class="line">type Props <span class="token operator">=</span> Counter2State <span class="token operator">&amp;</span> <span class="token keyword">typeof</span> actions<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Counter2</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span><span class="token operator">&lt;</span>Props<span class="token operator">&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">let</span> <span class="token punctuation">{</span> number<span class="token punctuation">,</span> increment2<span class="token punctuation">,</span> decrement2 <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>number<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>increment2<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>decrement2<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">-</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">let</span> mapStateToProps <span class="token operator">=</span> <span class="token punctuation">(</span>state<span class="token operator">:</span> CombinedState<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token parameter">Counter2State</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>counter2<span class="token punctuation">;</span></span>
<span class="line">type ThunkDispatchs <span class="token operator">=</span> ThunkDispatch<span class="token operator">&lt;</span>CombinedState<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">amount</span><span class="token operator">:</span> number <span class="token punctuation">}</span><span class="token punctuation">,</span> AnyAction<span class="token operator">&gt;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">mapDispatchToProps</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">dispatch</span><span class="token operator">:</span> ThunkDispatchs</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token function-variable function">thunkPlus</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> dispatch<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">(</span>dispatch<span class="token operator">:</span> ThunkDispatchs<span class="token punctuation">,</span> <span class="token literal-property property">getState</span><span class="token operator">:</span> Store<span class="token punctuation">[</span><span class="token string">&#39;getState&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token literal-property property">extraArgument</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">amount</span><span class="token operator">:</span> number <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token parameter"><span class="token keyword">void</span></span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">                dispatch<span class="token operator">&lt;</span>AnyAction<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> types<span class="token punctuation">.</span><span class="token constant">INCREMENT1</span><span class="token punctuation">,</span> <span class="token literal-property property">payload</span><span class="token operator">:</span> extraArgument<span class="token punctuation">.</span>amount <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span></span>
<span class="line">    mapStateToProps<span class="token punctuation">,</span></span>
<span class="line">    actions</span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">(</span>Counter2<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_9-11-redux-thunk-index-tsx" tabindex="-1"><a class="header-anchor" href="#_9-11-redux-thunk-index-tsx"><span>9.11 redux-thunk\\index.tsx</span></a></h3><p>src\\redux-thunk\\index.tsx</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Middleware<span class="token punctuation">,</span> Action<span class="token punctuation">,</span> AnyAction <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;redux&#39;</span><span class="token punctuation">;</span></span>
<span class="line">type MiddlewareExt <span class="token operator">=</span> Middleware <span class="token operator">&amp;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">withExtraArgument</span><span class="token operator">:</span> <span class="token keyword">typeof</span> createThunkMiddleware</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">export</span> type ThunkAction<span class="token operator">&lt;</span><span class="token constant">R</span><span class="token punctuation">,</span> <span class="token constant">S</span><span class="token punctuation">,</span> <span class="token constant">E</span><span class="token punctuation">,</span> <span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token class-name">Action</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token literal-property property">dispatch</span><span class="token operator">:</span> ThunkDispatch<span class="token operator">&lt;</span><span class="token constant">S</span><span class="token punctuation">,</span> <span class="token constant">E</span><span class="token punctuation">,</span> <span class="token constant">A</span><span class="token operator">&gt;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function-variable function">getState</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">S</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">extraArgument</span><span class="token operator">:</span> <span class="token constant">E</span></span>
<span class="line"><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">R</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">ThunkDispatch</span><span class="token operator">&lt;</span><span class="token constant">S</span><span class="token punctuation">,</span> <span class="token constant">E</span><span class="token punctuation">,</span> <span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token class-name">Action</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">A</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>action<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token operator">&lt;</span><span class="token constant">R</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>asyncAction<span class="token operator">:</span> ThunkAction<span class="token operator">&lt;</span><span class="token constant">R</span><span class="token punctuation">,</span> <span class="token constant">S</span><span class="token punctuation">,</span> <span class="token constant">E</span><span class="token punctuation">,</span> <span class="token constant">A</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">R</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">function</span> createThunkMiddleware<span class="token operator">&lt;</span><span class="token constant">S</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token class-name">Action</span> <span class="token operator">=</span> AnyAction<span class="token punctuation">,</span> <span class="token constant">E</span> <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>extraArgument<span class="token operator">?</span><span class="token operator">:</span> any<span class="token punctuation">)</span><span class="token operator">:</span> Middleware <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> <span class="token literal-property property">middleware</span><span class="token operator">:</span> Middleware<span class="token operator">&lt;</span>ThunkDispatch<span class="token operator">&lt;</span><span class="token constant">S</span><span class="token punctuation">,</span> <span class="token constant">E</span><span class="token punctuation">,</span> <span class="token constant">A</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token constant">S</span><span class="token punctuation">,</span> ThunkDispatch<span class="token operator">&lt;</span><span class="token constant">S</span><span class="token punctuation">,</span> <span class="token constant">E</span><span class="token punctuation">,</span> <span class="token constant">A</span><span class="token operator">&gt;&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> dispatch<span class="token punctuation">,</span> getState <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token parameter">next</span> <span class="token operator">=&gt;</span> <span class="token parameter">action</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> action <span class="token operator">===</span> <span class="token string">&#39;function&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">return</span> <span class="token function">action</span><span class="token punctuation">(</span>dispatch<span class="token punctuation">,</span> getState<span class="token punctuation">,</span> extraArgument<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">return</span> middleware<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> <span class="token literal-property property">thunk</span><span class="token operator">:</span> MiddlewareExt <span class="token operator">=</span> <span class="token function">createThunkMiddleware</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> MiddlewareExt<span class="token punctuation">;</span></span>
<span class="line">thunk<span class="token punctuation">.</span>withExtraArgument <span class="token operator">=</span> createThunkMiddleware<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> thunk<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_10-支持路由" tabindex="-1"><a class="header-anchor" href="#_10-支持路由"><span>10.支持路由</span></a></h2><h3 id="_10-1-安装" tabindex="-1"><a class="header-anchor" href="#_10-1-安装"><span>10.1 安装</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">cnpm i react-router-dom @types/react-router-dom  connected-react-router -S</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_10-2-src-index-tsx" tabindex="-1"><a class="header-anchor" href="#_10-2-src-index-tsx"><span>10.2 src\\index.tsx</span></a></h3><p>src\\index.tsx</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">import React from &#39;react&#39;;</span>
<span class="line">import ReactDOM from &#39;react-dom&#39;;</span>
<span class="line">import Counter1 from &#39;./components/Counter1&#39;;</span>
<span class="line">import Counter2 from &#39;./components/Counter2&#39;;</span>
<span class="line">import { Provider } from &#39;react-redux&#39;;</span>
<span class="line">+import { Route, Link, Redirect, Switch } from &#39;react-router-dom&#39;;</span>
<span class="line">+import { ConnectedRouter } from &#39;connected-react-router&#39;;</span>
<span class="line">+import history from &#39;./history&#39;;</span>
<span class="line">+import store from &#39;./store&#39;;</span>
<span class="line">ReactDOM.render(</span>
<span class="line">    &lt;Provider store={store}&gt;</span>
<span class="line">+        &lt;ConnectedRouter history={history}&gt;</span>
<span class="line">+            &lt;Link to=&quot;/counter1&quot;&gt;Counter1&lt;/Link&gt;</span>
<span class="line">+            &lt;Link to=&quot;/counter2&quot;&gt;Counter2&lt;/Link&gt;</span>
<span class="line">+            &lt;Link to=&quot;/users&quot;&gt;用户管理&lt;/Link&gt;</span>
<span class="line">+            &lt;Switch&gt;</span>
<span class="line">+                &lt;Route exact={true} path=&quot;/counter1&quot; component={Counter1} /&gt;</span>
<span class="line">+                &lt;Route exact={true} path=&quot;/counter2&quot; component={Counter2} /&gt;</span>
<span class="line">+                &lt;Redirect to=&quot;/counter1&quot; /&gt;</span>
<span class="line">+            &lt;/Switch&gt;</span>
<span class="line">+        &lt;/ConnectedRouter&gt;</span>
<span class="line">+    &lt;/Provider&gt;, document.getElementById(&#39;root&#39;));</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_10-2-src-history-tsx" tabindex="-1"><a class="header-anchor" href="#_10-2-src-history-tsx"><span>10.2 src\\history.tsx</span></a></h3><p>src\\history.tsx</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> createHashHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;history&#39;</span></span>
<span class="line"><span class="token keyword">let</span> history <span class="token operator">=</span> <span class="token function">createHashHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> history<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_10-3-store-index-tsx" tabindex="-1"><a class="header-anchor" href="#_10-3-store-index-tsx"><span>10.3 store\\index.tsx</span></a></h3><p>src\\store\\index.tsx</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">import { createStore, Store, AnyAction, applyMiddleware, StoreEnhancer, StoreEnhancerStoreCreator } from &#39;redux&#39;;</span>
<span class="line">import logger from &#39;redux-logger&#39;;</span>
<span class="line">import thunk from &#39;redux-thunk&#39;;</span>
<span class="line">import promise from &#39;redux-promise&#39;;</span>
<span class="line">import reducer from &#39;./reducers&#39;;</span>
<span class="line">import { CombinedState } from &#39;./reducers&#39;;</span>
<span class="line">+import { routerMiddleware } from &#39;connected-react-router&#39;;</span>
<span class="line">+import history from &#39;../history&#39;;</span>
<span class="line">+const storeEnhancer: StoreEnhancer = applyMiddleware(routerMiddleware(history), promise, thunk, logger);</span>
<span class="line">const storeEnhancerStoreCreator: StoreEnhancerStoreCreator = storeEnhancer(createStore);</span>
<span class="line">const store: Store&lt;CombinedState, AnyAction&gt; = storeEnhancerStoreCreator(reducer);</span>
<span class="line">export default store;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_10-4-reducers-index-tsx" tabindex="-1"><a class="header-anchor" href="#_10-4-reducers-index-tsx"><span>10.4 reducers\\index.tsx</span></a></h3><p>src\\store\\reducers\\index.tsx</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">import { combineReducers, ReducersMapObject, Reducer, AnyAction } from &#39;redux&#39;;</span>
<span class="line">import counter1, { Counter1State } from &#39;./counter1&#39;;</span>
<span class="line">import counter2, { Counter2State } from &#39;./counter2&#39;;</span>
<span class="line">+import { LocationState } from &#39;history&#39;;</span>
<span class="line">+import { connectRouter, RouterState } from &#39;connected-react-router&#39;;</span>
<span class="line">import history from &#39;../../history&#39;;</span>
<span class="line">interface Reducers {</span>
<span class="line">+    router: RouterState&lt;LocationState&gt;,</span>
<span class="line">    counter1: Counter1State;</span>
<span class="line">    counter2: Counter2State;</span>
<span class="line">}</span>
<span class="line">+let reducers: ReducersMapObject&lt;Reducers, any&gt; = {</span>
<span class="line">+    router: connectRouter(history),</span>
<span class="line">    counter1,</span>
<span class="line">    counter2</span>
<span class="line">};</span>
<span class="line">export type CombinedState = {</span>
<span class="line">    [key in keyof typeof reducers]: ReturnType&lt;typeof reducers[key]&gt;</span>
<span class="line">}</span>
<span class="line">let rootReducer: Reducer&lt;CombinedState, AnyAction&gt; = combineReducers&lt;CombinedState, AnyAction&gt;(reducers);</span>
<span class="line">export default rootReducer;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_10-5-store-actions-counter1-tsx" tabindex="-1"><a class="header-anchor" href="#_10-5-store-actions-counter1-tsx"><span>10.5 store\\actions\\counter1.tsx</span></a></h3><p>src\\store\\actions\\counter1.tsx</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">import * as types from &#39;../action-types&#39;;</span>
<span class="line">import { AnyAction, Dispatch, Store } from &#39;redux&#39;;</span>
<span class="line">+import { LocationDescriptorObject } from &#39;history&#39;;</span>
<span class="line">+import { push } from &#39;connected-react-router&#39;;</span>
<span class="line">const actions = {</span>
<span class="line">    increment1(): AnyAction {</span>
<span class="line">        return { type: types.INCREMENT1 };</span>
<span class="line">    },</span>
<span class="line">    promisePlus(): { type: string, payload: Promise&lt;undefined&gt; } {</span>
<span class="line">        return (</span>
<span class="line">            {</span>
<span class="line">                type: types.INCREMENT1,</span>
<span class="line">                payload: new Promise((resolve) =&gt; {</span>
<span class="line">                    setTimeout(() =&gt; {</span>
<span class="line">                        resolve();</span>
<span class="line">                    }, 1000);</span>
<span class="line">                })</span>
<span class="line">            }</span>
<span class="line">        )</span>
<span class="line">    },</span>
<span class="line">    thunkPlus(): Function {</span>
<span class="line">        return (dispatch: Dispatch, getState: Store[&#39;getState&#39;]) =&gt; {</span>
<span class="line">            setTimeout(() =&gt; {</span>
<span class="line">                dispatch({ type: types.INCREMENT1 });</span>
<span class="line">            }, 1000);</span>
<span class="line">        }</span>
<span class="line">    },</span>
<span class="line">+    goto(locationDescriptorObject: LocationDescriptorObject): AnyAction {</span>
<span class="line">+        return push(locationDescriptorObject);</span>
<span class="line">+    }</span>
<span class="line">}</span>
<span class="line">export default actions;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_10-6-components-counter1-tsx" tabindex="-1"><a class="header-anchor" href="#_10-6-components-counter1-tsx"><span>10.6 components\\Counter1.tsx</span></a></h3><p>src\\components\\Counter1.tsx</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">+import React, { Component, PropsWithChildren } from &#39;react&#39;;</span>
<span class="line">import actions from &#39;../store/actions/counter1&#39;;</span>
<span class="line">import { CombinedState } from &#39;../store/reducers&#39;;</span>
<span class="line">import { Counter1State } from &#39;../store/reducers/counter1&#39;;</span>
<span class="line">import { connect } from &#39;react-redux&#39;;</span>
<span class="line">+import { RouteComponentProps } from &#39;react-router&#39;;</span>
<span class="line">+interface IParams { }</span>
<span class="line">+type RouteProps = RouteComponentProps&lt;IParams&gt;;</span>
<span class="line">+type Props = PropsWithChildren&lt;RouteProps &amp; Counter1State &amp; typeof actions&gt;;</span>
<span class="line">class Counter1 extends Component&lt;Props&gt; {</span>
<span class="line">    render() {</span>
<span class="line">+        let { number, increment1, promisePlus, thunkPlus, goto } = this.props;</span>
<span class="line">        return (</span>
<span class="line">            &lt;div&gt;</span>
<span class="line">                &lt;p&gt;{number}&lt;/p&gt;</span>
<span class="line">                &lt;button onClick={increment1}&gt;+&lt;/button&gt;</span>
<span class="line">                &lt;button onClick={promisePlus}&gt;promise+&lt;/button&gt;</span>
<span class="line">                &lt;button onClick={thunkPlus}&gt;thunk+&lt;/button&gt;</span>
<span class="line">+                &lt;button onClick={() =&gt; goto({ pathname: &#39;/counter2&#39; })}&gt;/counter2&lt;/button&gt;</span>
<span class="line">            &lt;/div&gt;</span>
<span class="line">        )</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">let mapStateToProps = (state: CombinedState): Counter1State =&gt; state.counter1;</span>
<span class="line">export default connect(</span>
<span class="line">    mapStateToProps,</span>
<span class="line">    actions</span>
<span class="line">)(Counter1)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_10-7-components-counter2-tsx" tabindex="-1"><a class="header-anchor" href="#_10-7-components-counter2-tsx"><span>10.7 components\\Counter2.tsx</span></a></h3><p>src\\components\\Counter2.tsx</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">+import React, { Component, PropsWithChildren } from &#39;react&#39;;</span>
<span class="line">import actions from &#39;../store/actions/counter2&#39;;</span>
<span class="line">import { CombinedState } from &#39;../store/reducers&#39;;</span>
<span class="line">import { Counter2State } from &#39;../store/reducers/counter2&#39;;</span>
<span class="line">import { connect } from &#39;react-redux&#39;;</span>
<span class="line">+import { RouteComponentProps } from &#39;react-router&#39;;</span>
<span class="line">+interface IParams { }</span>
<span class="line">+type RouteProps = RouteComponentProps&lt;IParams&gt;;</span>
<span class="line">+type Props = PropsWithChildren&lt;RouteProps &amp; Counter2State &amp; typeof actions&gt;;</span>
<span class="line">class Counter2 extends Component&lt;Props&gt; {</span>
<span class="line">    render() {</span>
<span class="line">        let { number, increment2, decrement2 } = this.props;</span>
<span class="line">        return (</span>
<span class="line">            &lt;div&gt;</span>
<span class="line">                &lt;p&gt;{number}&lt;/p&gt;</span>
<span class="line">                &lt;button onClick={increment2}&gt;+&lt;/button&gt;</span>
<span class="line">                &lt;button onClick={decrement2}&gt;-&lt;/button&gt;</span>
<span class="line">            &lt;/div&gt;</span>
<span class="line">        )</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line">let mapStateToProps = (state: CombinedState): Counter2State =&gt; state.counter2;</span>
<span class="line">export default connect(</span>
<span class="line">    mapStateToProps,</span>
<span class="line">    actions</span>
<span class="line">)(Counter2)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_11-路由和antdesign" tabindex="-1"><a class="header-anchor" href="#_11-路由和antdesign"><span>11.路由和antdesign</span></a></h2><h3 id="_11-1-安装依赖" tabindex="-1"><a class="header-anchor" href="#_11-1-安装依赖"><span>11.1 安装依赖</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">cnpm i redux-thunk antd axios react-router-dom connected-react-router  -S</span>
<span class="line">cnpm i style-loader css-loader  @types/react-router-dom -D</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_11-2-config-webpack-base-js" tabindex="-1"><a class="header-anchor" href="#_11-2-config-webpack-base-js"><span>11.2 config\\webpack.base.js</span></a></h3><p>config\\webpack.base.js</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">    module: {</span>
<span class="line">        rules: [</span>
<span class="line">+            {</span>
<span class="line">+                test: /\\.css?$/,</span>
<span class="line">+                use: [</span>
<span class="line">+                    &#39;style-loader&#39;,</span>
<span class="line">+                    &#39;css-loader&#39;</span>
<span class="line">+                ]</span>
<span class="line">+            }</span>
<span class="line">+        ]</span>
<span class="line">    },</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_11-3-src-index-tsx" tabindex="-1"><a class="header-anchor" href="#_11-3-src-index-tsx"><span>11.3 src\\index.tsx</span></a></h3><p>src\\index.tsx</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">import React from &#39;react&#39;;</span>
<span class="line">import ReactDOM from &#39;react-dom&#39;;</span>
<span class="line">import Counter1 from &#39;./components/Counter1&#39;;</span>
<span class="line">import Counter2 from &#39;./components/Counter2&#39;;</span>
<span class="line">+import User from &#39;./components/User&#39;;</span>
<span class="line">import { Provider } from &#39;react-redux&#39;;</span>
<span class="line">import { Route, Link, Redirect, Switch } from &#39;react-router-dom&#39;;</span>
<span class="line">import { ConnectedRouter } from &#39;connected-react-router&#39;;</span>
<span class="line">import history from &#39;./history&#39;;</span>
<span class="line">import store from &#39;./store&#39;;</span>
<span class="line">+import { Layout } from &#39;antd&#39;;</span>
<span class="line">+import NavBar from &#39;./components/NavBar&#39;;</span>
<span class="line">+import &#39;antd/dist/antd.css&#39;;</span>
<span class="line">+const { Content } = Layout;</span>
<span class="line">ReactDOM.render(</span>
<span class="line">    &lt;Provider store={store}&gt;</span>
<span class="line">        &lt;ConnectedRouter history={history}&gt;</span>
<span class="line">+            &lt;Layout&gt;</span>
<span class="line">+                &lt;NavBar /&gt;</span>
<span class="line">+                &lt;Content&gt;</span>
<span class="line">+                    &lt;Switch&gt;</span>
<span class="line">+                        &lt;Route exact={true} path=&quot;/counter1&quot; component={Counter1} /&gt;</span>
<span class="line">+                        &lt;Route exact={true} path=&quot;/counter2&quot; component={Counter2} /&gt;</span>
<span class="line">+                        &lt;Route path=&quot;/user&quot; component={User} /&gt;</span>
<span class="line">+                        &lt;Redirect to=&quot;/counter1&quot; /&gt;</span>
<span class="line">+                    &lt;/Switch&gt;</span>
<span class="line">+                &lt;/Content&gt;</span>
<span class="line">+            &lt;/Layout&gt;</span>
<span class="line">        &lt;/ConnectedRouter&gt;</span>
<span class="line">    &lt;/Provider&gt;, document.getElementById(&#39;root&#39;));</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_11-4-action-types-tsx" tabindex="-1"><a class="header-anchor" href="#_11-4-action-types-tsx"><span>11.4 action-types.tsx</span></a></h3><p>src\\store\\action-types.tsx</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">+ export const SET_USERS = &#39;SET_USERS&#39;;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_11-5-reducers-index-tsx" tabindex="-1"><a class="header-anchor" href="#_11-5-reducers-index-tsx"><span>11.5 reducers\\index.tsx</span></a></h3><p>src\\store\\reducers\\index.tsx</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">import { combineReducers, ReducersMapObject, Reducer, AnyAction } from &#39;redux&#39;;</span>
<span class="line">import counter1, { Counter1State } from &#39;./counter1&#39;;</span>
<span class="line">import counter2, { Counter2State } from &#39;./counter2&#39;;</span>
<span class="line">+import user, { UserState } from &#39;./user&#39;;</span>
<span class="line">import { LocationState } from &#39;history&#39;;</span>
<span class="line">import { connectRouter, RouterState } from &#39;connected-react-router&#39;;</span>
<span class="line">import history from &#39;../../history&#39;;</span>
<span class="line">interface Reducers {</span>
<span class="line">    router: RouterState&lt;LocationState&gt;,</span>
<span class="line">    counter1: Counter1State;</span>
<span class="line">    counter2: Counter2State;</span>
<span class="line">+    user: UserState</span>
<span class="line">}</span>
<span class="line">let reducers: ReducersMapObject&lt;Reducers, any&gt; = {</span>
<span class="line">    router: connectRouter(history),</span>
<span class="line">    counter1,</span>
<span class="line">    counter2,</span>
<span class="line">+    user</span>
<span class="line">};</span>
<span class="line">export type CombinedState = {</span>
<span class="line">    [key in keyof typeof reducers]: ReturnType&lt;typeof reducers[key]&gt;</span>
<span class="line">}</span>
<span class="line">let rootReducer: Reducer&lt;CombinedState, AnyAction&gt; = combineReducers&lt;CombinedState, AnyAction&gt;(reducers);</span>
<span class="line">export default rootReducer;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_11-6-typings-response-tsx" tabindex="-1"><a class="header-anchor" href="#_11-6-typings-response-tsx"><span>11.6 typings\\response.tsx</span></a></h3><p>src\\typings\\response.tsx</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">User</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">_id</span><span class="token operator">:</span> string<span class="token punctuation">;</span></span>
<span class="line">    <span class="token literal-property property">username</span><span class="token operator">:</span> string</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">UserlistResponse</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">code</span><span class="token operator">:</span> number<span class="token punctuation">;</span></span>
<span class="line">    <span class="token literal-property property">data</span><span class="token operator">:</span> Array<span class="token operator">&lt;</span>User<span class="token operator">&gt;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">AddUserResponse</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">code</span><span class="token operator">:</span> number<span class="token punctuation">;</span></span>
<span class="line">    <span class="token literal-property property">data</span><span class="token operator">:</span> User</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_11-7-store-reducers-user-tsx" tabindex="-1"><a class="header-anchor" href="#_11-7-store-reducers-user-tsx"><span>11.7 store\\reducers\\user.tsx</span></a></h3><p>src\\store\\reducers\\user.tsx</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> types <span class="token keyword">from</span> <span class="token string">&#39;../action-types&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> AnyAction <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;redux&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> User <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;../../typings/response&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">UserState</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">list</span><span class="token operator">:</span> Array<span class="token operator">&lt;</span>User<span class="token operator">&gt;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">let</span> <span class="token literal-property property">initialState</span><span class="token operator">:</span> UserState <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">state</span><span class="token operator">:</span> UserState <span class="token operator">=</span> initialState<span class="token punctuation">,</span> <span class="token literal-property property">action</span><span class="token operator">:</span> AnyAction</span><span class="token punctuation">)</span><span class="token operator">:</span> UserState <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">case</span> types<span class="token punctuation">.</span><span class="token constant">SET_USERS</span><span class="token operator">:</span></span>
<span class="line">            <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>state<span class="token punctuation">,</span> <span class="token literal-property property">list</span><span class="token operator">:</span> action<span class="token punctuation">.</span>payload <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">default</span><span class="token operator">:</span></span>
<span class="line">            <span class="token keyword">return</span> state<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_11-8-store-actions-user-tsx" tabindex="-1"><a class="header-anchor" href="#_11-8-store-actions-user-tsx"><span>11.8 store\\actions\\user.tsx</span></a></h3><p>src\\store\\actions\\user.tsx</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> types <span class="token keyword">from</span> <span class="token string">&#39;../action-types&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> User <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;../../typings/response&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">setUsers</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">list</span><span class="token operator">:</span> Array<span class="token operator">&lt;</span>User<span class="token operator">&gt;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> types<span class="token punctuation">.</span><span class="token constant">SET_USERS</span><span class="token punctuation">,</span> <span class="token literal-property property">payload</span><span class="token operator">:</span> list <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_11-9-src-api-request-tsx" tabindex="-1"><a class="header-anchor" href="#_11-9-src-api-request-tsx"><span>11.9 src\\api\\request.tsx</span></a></h3><p>src\\api\\request.tsx</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&#39;axios&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> instance <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">timeout</span><span class="token operator">:</span> <span class="token number">20000</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">baseURL</span><span class="token operator">:</span> <span class="token string">&#39;http://localhost:4000&#39;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">&#39;axios&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> instance<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_11-10-src-components-navbar-tsx" tabindex="-1"><a class="header-anchor" href="#_11-10-src-components-navbar-tsx"><span>11.10 src\\components\\NavBar.tsx</span></a></h3><p>src\\components\\NavBar.tsx</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> PropsWithChildren <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Link<span class="token punctuation">,</span> withRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-router-dom&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Layout<span class="token punctuation">,</span> Menu <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;antd&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> RouteComponentProps <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-router&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">interface</span> <span class="token class-name">IParams</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span></span>
<span class="line">type RouteProps <span class="token operator">=</span> RouteComponentProps<span class="token operator">&lt;</span>IParams<span class="token operator">&gt;</span><span class="token punctuation">;</span></span>
<span class="line">type Props <span class="token operator">=</span> PropsWithChildren<span class="token operator">&lt;</span>RouteProps<span class="token operator">&gt;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">NavBar</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span><span class="token operator">&lt;</span>Props<span class="token operator">&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">            <span class="token operator">&lt;</span>Layout<span class="token punctuation">.</span>Header<span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>Menu</span>
<span class="line">                    theme<span class="token operator">=</span><span class="token string">&quot;dark&quot;</span></span>
<span class="line">                    style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">lineHeight</span><span class="token operator">:</span> <span class="token string">&#39;64px&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">                    mode<span class="token operator">=</span><span class="token string">&quot;horizontal&quot;</span></span>
<span class="line">                    selectedKeys<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>location<span class="token punctuation">.</span>pathname<span class="token punctuation">]</span><span class="token punctuation">}</span> <span class="token operator">&gt;</span></span>
<span class="line">                    <span class="token operator">&lt;</span>Menu<span class="token punctuation">.</span>Item key<span class="token operator">=</span><span class="token string">&quot;/counter1&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">&quot;/counter1&quot;</span><span class="token operator">&gt;</span>Counter1<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Menu<span class="token punctuation">.</span>Item<span class="token operator">&gt;</span></span>
<span class="line">                    <span class="token operator">&lt;</span>Menu<span class="token punctuation">.</span>Item key<span class="token operator">=</span><span class="token string">&quot;/counter2&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">&quot;/counter2&quot;</span><span class="token operator">&gt;</span>Counter2<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Menu<span class="token punctuation">.</span>Item<span class="token operator">&gt;</span></span>
<span class="line">                    <span class="token operator">&lt;</span>Menu<span class="token punctuation">.</span>Item key<span class="token operator">=</span><span class="token string">&quot;/user&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">&quot;/user&quot;</span><span class="token operator">&gt;</span>用户管理<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Menu<span class="token punctuation">.</span>Item<span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span><span class="token operator">/</span>Menu<span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span><span class="token operator">/</span>Layout<span class="token punctuation">.</span>Header<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">withRouter</span><span class="token punctuation">(</span>NavBar<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_11-11-components-user-tsx" tabindex="-1"><a class="header-anchor" href="#_11-11-components-user-tsx"><span>11.11 components\\User.tsx</span></a></h3><p>src\\components\\User.tsx</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> PropsWithChildren <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> actions <span class="token keyword">from</span> <span class="token string">&#39;../store/actions/user&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> CombinedState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;../store/reducers&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> UserState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;../store/reducers/user&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-redux&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> RouteComponentProps<span class="token punctuation">,</span> Link<span class="token punctuation">,</span> Route <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-router-dom&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Layout<span class="token punctuation">,</span> Menu<span class="token punctuation">,</span> Icon <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;antd&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> UserList <span class="token keyword">from</span> <span class="token string">&#39;./UserList&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> UserAdd <span class="token keyword">from</span> <span class="token string">&#39;./UserAdd&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> Sider<span class="token punctuation">,</span> Content <span class="token punctuation">}</span> <span class="token operator">=</span> Layout<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">interface</span> <span class="token class-name">IParams</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span></span>
<span class="line">type RouteProps <span class="token operator">=</span> RouteComponentProps<span class="token operator">&lt;</span>IParams<span class="token operator">&gt;</span><span class="token punctuation">;</span></span>
<span class="line">type Props <span class="token operator">=</span> PropsWithChildren<span class="token operator">&lt;</span>RouteProps <span class="token operator">&amp;</span> UserState <span class="token operator">&amp;</span> <span class="token keyword">typeof</span> actions<span class="token operator">&gt;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span><span class="token operator">&lt;</span>Props<span class="token operator">&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">            <span class="token operator">&lt;</span>Layout<span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>Sider<span class="token operator">&gt;</span></span>
<span class="line">                    <span class="token operator">&lt;</span>Menu</span>
<span class="line">                        theme<span class="token operator">=</span><span class="token string">&quot;dark&quot;</span></span>
<span class="line">                        defaultSelectedKeys<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token string">&#39;/user/list&#39;</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span>
<span class="line">                        mode<span class="token operator">=</span><span class="token string">&quot;inline&quot;</span></span>
<span class="line">                    <span class="token operator">&gt;</span></span>
<span class="line">                        <span class="token operator">&lt;</span>Menu<span class="token punctuation">.</span>Item key<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&#39;/user/add&#39;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span></span>
<span class="line">                            <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&#39;/user/add&#39;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>Icon type<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&#39;plus&#39;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>添加用户<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span></span>
<span class="line">                        <span class="token operator">&lt;</span><span class="token operator">/</span>Menu<span class="token punctuation">.</span>Item<span class="token operator">&gt;</span><span class="token punctuation">;</span></span>
<span class="line">                        <span class="token operator">&lt;</span>Menu<span class="token punctuation">.</span>Item key<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&#39;/user/list&#39;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span></span>
<span class="line">                            <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&#39;/user/list&#39;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>Icon type<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&#39;user&#39;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>用户列表<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span></span>
<span class="line">                        <span class="token operator">&lt;</span><span class="token operator">/</span>Menu<span class="token punctuation">.</span>Item<span class="token operator">&gt;</span><span class="token punctuation">;</span></span>
<span class="line">                    <span class="token operator">&lt;</span><span class="token operator">/</span>Menu<span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span><span class="token operator">/</span>Sider<span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>Content style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token string">&#39;20px&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span></span>
<span class="line">                    <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/user/list&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>UserList<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">                    <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/user/add&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>UserAdd<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span><span class="token operator">/</span>Content<span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span><span class="token operator">/</span>Layout<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">let</span> mapStateToProps <span class="token operator">=</span> <span class="token punctuation">(</span>state<span class="token operator">:</span> CombinedState<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token parameter">UserState</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>user<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span></span>
<span class="line">    mapStateToProps<span class="token punctuation">,</span></span>
<span class="line">    actions</span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">(</span>User<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_11-12-src-components-useradd-tsx" tabindex="-1"><a class="header-anchor" href="#_11-12-src-components-useradd-tsx"><span>11.12 src\\components\\UserAdd.tsx</span></a></h3><p>src\\components\\UserAdd.tsx</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> PropsWithChildren<span class="token punctuation">,</span> useState<span class="token punctuation">,</span> useCallback <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Link<span class="token punctuation">,</span> withRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-router-dom&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Layout<span class="token punctuation">,</span> Menu<span class="token punctuation">,</span> Form<span class="token punctuation">,</span> Input<span class="token punctuation">,</span> Button<span class="token punctuation">,</span> message <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;antd&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> RouteComponentProps <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-router&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> request<span class="token punctuation">,</span> <span class="token punctuation">{</span> AxiosResponse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;../api/request&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> User<span class="token punctuation">,</span> AddUserResponse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;../typings/response&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">interface</span> <span class="token class-name">IParams</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span></span>
<span class="line">type RouteProps <span class="token operator">=</span> RouteComponentProps<span class="token operator">&lt;</span>IParams<span class="token operator">&gt;</span><span class="token punctuation">;</span></span>
<span class="line">type Props <span class="token operator">=</span> PropsWithChildren<span class="token operator">&lt;</span>RouteProps<span class="token operator">&gt;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">UserAdd</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">props</span><span class="token operator">:</span> Props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> <span class="token punctuation">[</span>user<span class="token punctuation">,</span> setUser<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token operator">&lt;</span>User<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">as</span> User<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">const</span> handleSubmit <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">event</span><span class="token operator">:</span> React<span class="token punctuation">.</span>FormEvent<span class="token operator">&lt;</span>HTMLFormElement<span class="token operator">&gt;</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        request<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/api/users&#39;</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">response</span><span class="token operator">:</span> AxiosResponse<span class="token operator">&lt;</span>AddUserResponse<span class="token operator">&gt;</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">let</span> data <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>code <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#39;/user/list&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">                message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;添加用户失败!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>user<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">const</span> handleNameChange <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">event</span><span class="token operator">:</span> React<span class="token punctuation">.</span>ChangeEvent<span class="token operator">&lt;</span>HTMLInputElement<span class="token operator">&gt;</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">setUser</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token operator">...</span>user<span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">username</span><span class="token operator">:</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value</span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>user<span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token operator">&lt;</span>Form onSubmit<span class="token operator">=</span><span class="token punctuation">{</span>handleSubmit<span class="token punctuation">}</span><span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span>Form<span class="token punctuation">.</span>Item<span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>Input</span>
<span class="line">                    placeholder<span class="token operator">=</span><span class="token string">&quot;用户名&quot;</span></span>
<span class="line">                    style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">120</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">                    value<span class="token operator">=</span><span class="token punctuation">{</span>user<span class="token punctuation">.</span>username<span class="token punctuation">}</span></span>
<span class="line">                    onChange<span class="token operator">=</span><span class="token punctuation">{</span>handleNameChange<span class="token punctuation">}</span></span>
<span class="line">                <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span><span class="token operator">/</span>Form<span class="token punctuation">.</span>Item<span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span>Form<span class="token punctuation">.</span>Item<span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>Button type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span> htmlType<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span><span class="token operator">&gt;</span>添加<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span><span class="token operator">/</span>Form<span class="token punctuation">.</span>Item<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span><span class="token operator">/</span>Form<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> UserAdd<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_11-13-src-components-userlist-tsx" tabindex="-1"><a class="header-anchor" href="#_11-13-src-components-userlist-tsx"><span>11.13 src\\components\\UserList.tsx</span></a></h3><p>src\\components\\UserList.tsx</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> PropsWithChildren<span class="token punctuation">,</span> useState<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> RouteComponentProps <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-router-dom&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Table <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;antd&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> request<span class="token punctuation">,</span> <span class="token punctuation">{</span> AxiosResponse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;../api/request&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> actions <span class="token keyword">from</span> <span class="token string">&#39;../store/actions/user&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> User<span class="token punctuation">,</span> UserlistResponse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;../typings/response&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> CombinedState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;../store/reducers&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> UserState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;../store/reducers/user&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-redux&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">interface</span> <span class="token class-name">IParams</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span></span>
<span class="line">type RouteProps <span class="token operator">=</span> RouteComponentProps<span class="token operator">&lt;</span>IParams<span class="token operator">&gt;</span><span class="token punctuation">;</span></span>
<span class="line">type Props <span class="token operator">=</span> PropsWithChildren<span class="token operator">&lt;</span>RouteProps <span class="token operator">&amp;</span> UserState <span class="token operator">&amp;</span> <span class="token keyword">typeof</span> actions<span class="token operator">&gt;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> columns <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;用户名&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">dataIndex</span><span class="token operator">:</span> <span class="token string">&#39;username&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">&#39;username&#39;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">UserList</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">props</span><span class="token operator">:</span> Props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> <span class="token punctuation">[</span>users<span class="token punctuation">,</span> setUsers<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token operator">&lt;</span>Array<span class="token operator">&lt;</span>User<span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">if</span> <span class="token punctuation">(</span>users<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token keyword">let</span> <span class="token literal-property property">response</span><span class="token operator">:</span> AxiosResponse<span class="token operator">&lt;</span>UserlistResponse<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token keyword">await</span> request<span class="token punctuation">.</span>get<span class="token operator">&lt;</span>any<span class="token punctuation">,</span> AxiosResponse<span class="token operator">&lt;</span>UserlistResponse<span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span><span class="token string">&#39;/api/users&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token keyword">let</span> list <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">;</span></span>
<span class="line">                <span class="token function">setUsers</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                props<span class="token punctuation">.</span><span class="token function">setUsers</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token operator">&lt;</span>Table columns<span class="token operator">=</span><span class="token punctuation">{</span>columns<span class="token punctuation">}</span> dataSource<span class="token operator">=</span><span class="token punctuation">{</span>users<span class="token punctuation">}</span> rowKey<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">record</span><span class="token operator">:</span> User</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> record<span class="token punctuation">.</span>_id<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">let</span> mapStateToProps <span class="token operator">=</span> <span class="token punctuation">(</span>state<span class="token operator">:</span> CombinedState<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token parameter">UserState</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>user<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span></span>
<span class="line">    mapStateToProps<span class="token punctuation">,</span></span>
<span class="line">    actions</span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">(</span>UserList<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_12-后台接口" tabindex="-1"><a class="header-anchor" href="#_12-后台接口"><span>12. 后台接口</span></a></h2><h3 id="_12-1-初始化项目" tabindex="-1"><a class="header-anchor" href="#_12-1-初始化项目"><span>12.1. 初始化项目</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">mkdir C:\\vipdata\\prepare8\\zhufeng_ts_react_api</span>
<span class="line">cd zhufeng_ts_react_api</span>
<span class="line">cnpm init -y</span>
<span class="line">cnpm i @types/node express @types/express body-parser cors @types/cors mongoose @types/mongoose shelljs -S</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_12-2-tsconfig-json" tabindex="-1"><a class="header-anchor" href="#_12-2-tsconfig-json"><span>12.2 tsconfig.json</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token string-property property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token string-property property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token string">&quot;es5&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string-property property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;commonjs&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string-property property">&quot;lib&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">      <span class="token string">&quot;dom&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token string">&quot;es2015&quot;</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">,</span> </span>
<span class="line">    <span class="token string-property property">&quot;outDir&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./dist&quot;</span><span class="token punctuation">,</span> </span>
<span class="line">    <span class="token string-property property">&quot;strict&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> </span>
<span class="line">    <span class="token string-property property">&quot;baseUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./&quot;</span><span class="token punctuation">,</span> </span>
<span class="line">    <span class="token string-property property">&quot;paths&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token string-property property">&quot;*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">&quot;node_modules/*&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">&quot;typings/*&quot;</span></span>
<span class="line">      <span class="token punctuation">]</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span> </span>
<span class="line">    <span class="token string-property property">&quot;esModuleInterop&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_12-3-server-ts" tabindex="-1"><a class="header-anchor" href="#_12-3-server-ts"><span>12.3 server.ts</span></a></h3><p>server.ts</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> express<span class="token punctuation">,</span> <span class="token punctuation">{</span> Express<span class="token punctuation">,</span> Request<span class="token punctuation">,</span> Response <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;express&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> bodyParser <span class="token keyword">from</span> <span class="token string">&#39;body-parser&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> cors <span class="token keyword">from</span> <span class="token string">&#39;cors&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> Models <span class="token keyword">from</span> <span class="token string">&#39;./db&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> config <span class="token keyword">from</span> <span class="token string">&#39;./config&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> path <span class="token keyword">from</span> <span class="token string">&#39;path&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">let</span> <span class="token literal-property property">app</span><span class="token operator">:</span> Express <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span></span>
<span class="line">    <span class="token function">cors</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">origin</span><span class="token operator">:</span> config<span class="token punctuation">.</span>origin<span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">credentials</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">allowedHeaders</span><span class="token operator">:</span> <span class="token string">&quot;Content-Type,Authorization&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token string">&quot;GET,HEAD,PUT,PATCH,POST,DELETE,OPTIONS&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;public&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>bodyParser<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">extended</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>bodyParser<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/api/users&#39;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">req</span><span class="token operator">:</span> Request<span class="token punctuation">,</span> <span class="token literal-property property">res</span><span class="token operator">:</span> Response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> users <span class="token operator">=</span> <span class="token keyword">await</span> Models<span class="token punctuation">.</span>UserModel<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">data</span><span class="token operator">:</span> users</span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/api/users&#39;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">req</span><span class="token operator">:</span> Request<span class="token punctuation">,</span> <span class="token literal-property property">res</span><span class="token operator">:</span> Response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> user <span class="token operator">=</span> req<span class="token punctuation">.</span>body<span class="token punctuation">;</span></span>
<span class="line">    user <span class="token operator">=</span> <span class="token keyword">await</span> Models<span class="token punctuation">.</span>UserModel<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">data</span><span class="token operator">:</span> user</span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">4000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;服务器在4000端口启动!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_12-4-config-ts" tabindex="-1"><a class="header-anchor" href="#_12-4-config-ts"><span>12.4 config.ts</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">interface</span> <span class="token class-name">IConfig</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">secret</span><span class="token operator">:</span> string<span class="token punctuation">;</span></span>
<span class="line">    <span class="token literal-property property">dbUrl</span><span class="token operator">:</span> string<span class="token punctuation">;</span></span>
<span class="line">    <span class="token literal-property property">origin</span><span class="token operator">:</span> Array<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">let</span> <span class="token literal-property property">config</span><span class="token operator">:</span> IConfig <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">secret</span><span class="token operator">:</span> <span class="token string">&#39;zhufengcms&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">dbUrl</span><span class="token operator">:</span> <span class="token string">&quot;mongodb://localhost:27017/zhufengcms&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">origin</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;http://localhost:8080&quot;</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token operator">=</span>  config<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_12-5-db-ts" tabindex="-1"><a class="header-anchor" href="#_12-5-db-ts"><span>12.5 db.ts</span></a></h3><p>db.ts</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> mongoose<span class="token punctuation">,</span> <span class="token punctuation">{</span> Schema<span class="token punctuation">,</span> Connection<span class="token punctuation">,</span> Model <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;mongoose&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> config <span class="token keyword">from</span> <span class="token string">&#39;./config&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token literal-property property">conn</span><span class="token operator">:</span> Connection <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">createConnection</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>dbUrl<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">useNewUrlParser</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">useUnifiedTopology</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> UserModel <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">&#39;User&#39;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> String <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    UserModel</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_12-6-shelljs-index-d-ts" tabindex="-1"><a class="header-anchor" href="#_12-6-shelljs-index-d-ts"><span>12.6 shelljs\\index.d.ts</span></a></h3><p>typings\\shelljs\\index.d.ts</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">declare module <span class="token string">&#39;shelljs&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_12-7-copy-ts" tabindex="-1"><a class="header-anchor" href="#_12-7-copy-ts"><span>12.7 copy.ts</span></a></h3><p>copy.ts</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> shell <span class="token keyword">from</span> <span class="token string">&#39;shelljs&#39;</span><span class="token punctuation">;</span></span>
<span class="line">shell<span class="token punctuation">.</span><span class="token function">cp</span><span class="token punctuation">(</span><span class="token string">&quot;-R&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;./public/&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;./dist/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_12-8-package-json" tabindex="-1"><a class="header-anchor" href="#_12-8-package-json"><span>12.8 package.json</span></a></h3><p>package.json</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token punctuation">{</span></span>
<span class="line"><span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token string-property property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cross-env NODE_ENV=development nodemon -e ts,tsx --exec &#39;ts-node&#39; ./server.ts&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string-property property">&quot;serve&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cross-env NODE_ENV=production  tsc &amp;&amp; ts-node copy.ts &amp;&amp; nodemon ./dist/server.js&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_13-dva" tabindex="-1"><a class="header-anchor" href="#_13-dva"><span>13. dva</span></a></h2><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">import React from &#39;react&#39;;</span>
<span class="line">import { Dispatch } from &#39;redux&#39;;</span>
<span class="line">import dva, { connect } from &#39;dva&#39;;</span>
<span class="line">import keymaster from &#39;keymaster&#39;;</span>
<span class="line">import { RouterAPI } from &#39;dva&#39;;</span>
<span class="line">import { Router, Route } from &#39;dva/router&#39;;</span>
<span class="line">interface Counter1State {</span>
<span class="line">    number: 0</span>
<span class="line">}</span>
<span class="line">interface Counter2State {</span>
<span class="line">    number: 0</span>
<span class="line">}</span>
<span class="line">interface CombinedState {</span>
<span class="line">    counter1: Counter1State;</span>
<span class="line">    counter2: Counter2State;</span>
<span class="line">}</span>
<span class="line">const app = dva();</span>
<span class="line">const delay = (millseconds: number) =&gt; {</span>
<span class="line">    return new Promise(function (resolve, reject) {</span>
<span class="line">        setTimeout(function () {</span>
<span class="line">            resolve();</span>
<span class="line">        }, millseconds);</span>
<span class="line">    });</span>
<span class="line">}</span>
<span class="line">app.model({</span>
<span class="line">    namespace: &#39;counter1&#39;,</span>
<span class="line">    state: { number: 0 },</span>
<span class="line">    reducers: {//接收老状态，返回新状态</span>
<span class="line">        add(state) { //dispatch({type:&#39;add&#39;});</span>
<span class="line">            return { number: state.number + 1 };</span>
<span class="line">        },</span>
<span class="line">        minus(state) {//dispatch({type:&#39;minus&#39;})</span>
<span class="line">            return { number: state.number - 1 };</span>
<span class="line">        }</span>
<span class="line">    },</span>
<span class="line">    // 延时操作 调用接口  等待</span>
<span class="line">    effects: {</span>
<span class="line">        *asyncAdd(action, { put, call }) { //redux-saga/effects {put,call}</span>
<span class="line">            yield call(delay, 1000);//把100传给delay并调用，yield会等待promise完成</span>
<span class="line">            yield put({ type: &#39;add&#39; });</span>
<span class="line">        }</span>
<span class="line">    },</span>
<span class="line">    subscriptions: {</span>
<span class="line">        keyboard({ dispatch }) {</span>
<span class="line">            keymaster(&#39;space&#39;, () =&gt; {</span>
<span class="line">                dispatch({ type: &#39;add&#39; });</span>
<span class="line">            });</span>
<span class="line">        },</span>
<span class="line">        changeTitle({ history }) {</span>
<span class="line">            setTimeout(function () {</span>
<span class="line">                history.listen(({ pathname }) =&gt; {</span>
<span class="line">                    document.title = pathname;</span>
<span class="line">                });</span>
<span class="line">            }, 1000);</span>
<span class="line"></span>
<span class="line">        }</span>
<span class="line">    }</span>
<span class="line">});</span>
<span class="line">app.model({</span>
<span class="line">    namespace: &#39;counter2&#39;,</span>
<span class="line">    state: { number: 0 },</span>
<span class="line">    reducers: {//接收老状态，返回新状态</span>
<span class="line">        add(state) { //dispatch({type:&#39;add&#39;});</span>
<span class="line">            return { number: state.number + 1 };</span>
<span class="line">        },</span>
<span class="line">        minus(state) {//dispatch({type:&#39;minus&#39;})</span>
<span class="line">            return { number: state.number - 1 };</span>
<span class="line">        }</span>
<span class="line">    }</span>
<span class="line">});</span>
<span class="line">type Counter1Props = Counter1State &amp; { dispatch: Dispatch };</span>
<span class="line">const Counter1 = (props: Counter1Props) =&gt; {</span>
<span class="line">    return (</span>
<span class="line">        &lt;div&gt;</span>
<span class="line">            &lt;p&gt;{props.number}&lt;/p&gt;</span>
<span class="line">            &lt;button onClick={() =&gt; props.dispatch({ type: &#39;counter1/add&#39; })}&gt;add&lt;/button&gt;</span>
<span class="line">            &lt;button onClick={() =&gt; props.dispatch({ type: &#39;counter1/asyncAdd&#39; })}&gt;asyncAdd&lt;/button&gt;</span>
<span class="line">            &lt;button onClick={() =&gt; props.dispatch({ type: &#39;counter1/minus&#39; })}&gt;-&lt;/button&gt;</span>
<span class="line">        &lt;/div&gt;</span>
<span class="line">    )</span>
<span class="line">}</span>
<span class="line">type Counter2Props = Counter2State &amp; { dispatch: Dispatch };</span>
<span class="line">const Counter2 = (props: Counter2Props) =&gt; {</span>
<span class="line">    return (</span>
<span class="line">        &lt;div&gt;</span>
<span class="line">            &lt;p&gt;{props.number}&lt;/p&gt;</span>
<span class="line">            &lt;button onClick={() =&gt; props.dispatch({ type: &#39;counter2/add&#39; })}&gt;+&lt;/button&gt;</span>
<span class="line">            &lt;button onClick={() =&gt; props.dispatch({ type: &#39;counter2/minus&#39; })}&gt;-&lt;/button&gt;</span>
<span class="line">        &lt;/div&gt;</span>
<span class="line">    )</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">const mapStateToProps1 = (state: CombinedState): Counter1State =&gt; state.counter1;</span>
<span class="line">const ConnectedCounter = connect(</span>
<span class="line">    mapStateToProps1</span>
<span class="line">)(Counter1);</span>
<span class="line">const mapStateToProps2 = (state: CombinedState): Counter2State =&gt; state.counter2;</span>
<span class="line">const ConnectedCounter2 = connect(</span>
<span class="line">    mapStateToProps2</span>
<span class="line">)(Counter2);</span>
<span class="line">app.router(</span>
<span class="line">    (api?: RouterAPI) =&gt; {</span>
<span class="line">        let { history } = api!;</span>
<span class="line">        return (</span>
<span class="line">            (</span>
<span class="line">                &lt;Router history={history}&gt;</span>
<span class="line">                    &lt;&gt;</span>
<span class="line">                        &lt;Route path=&quot;/counter1&quot; component={ConnectedCounter} /&gt;</span>
<span class="line">                        &lt;Route path=&quot;/counter2&quot; component={ConnectedCounter2} /&gt;</span>
<span class="line">                    &lt;/&gt;</span>
<span class="line">                &lt;/Router&gt;</span>
<span class="line">            )</span>
<span class="line">        )</span>
<span class="line">    }</span>
<span class="line">);</span>
<span class="line"> app.start(&#39;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,197)])])}const i=n(p,[["render",l]]),r=JSON.parse('{"path":"/strong/91.react-ts.html","title":"","lang":"en-US","frontmatter":{},"git":{"updatedTime":1681290319000,"contributors":[{"name":"yutao","username":"yutao","email":"642231346@qq.com","commits":1,"url":"https://github.com/yutao"}],"changelog":[{"hash":"f5ab8c9d34991ec274f7f652439afe5b2afb6147","time":1681290319000,"email":"642231346@qq.com","author":"yutao","message":"modify"}]},"filePathRelative":"strong/91.react-ts.md"}');export{i as comp,r as data};
