import{_ as n,c as a,a as e,o as p}from"./app-CD1YpnS1.js";const l={};function t(i,s){return p(),a("div",null,[...s[0]||(s[0]=[e(`<blockquote><p>rollup（下一代ES模块捆绑器）是什么请查看<a href="%5Brollupjs.org/guide/en/%5D(http://rollupjs.org/guide/en/)">官网介绍</a></p></blockquote><blockquote><p>注意不要看Rollup.js <a href="https://www.rollupjs.com/" target="_blank" rel="noopener noreferrer">中文网</a>，因为这是别人翻译的，不是实时更新的，我之前看这个老是安装出错</p></blockquote><p><strong>之前在网络上查找过相关的rollup使用，有些文章很概念不易理解，没有具体步骤；有些文章步骤不够详细，没有来龙去脉。所以打算整理个文章给后来者减少弯路。我保证此文真的是手把手教学，很接地气，因为我是边建工程边使用边写文章，不是某个项目里的代码，所以代码清晰，没有冗余。</strong></p><h1 id="为什么不用webpack" tabindex="-1"><a class="header-anchor" href="#为什么不用webpack"><span>为什么不用webpack</span></a></h1><p>一说到打包工具大家都想到webpack，因为我们用到的vue，react脚手架都是基于webpack的，他有各种loader，帮助我们解决各种问题，这针对于开发项目是很有效的，但是他生成代码有很多不是我们所写的逻辑代码, 比如一些他自有的模块加载功能:</p><p><img src="https://gitee.com/yutao618/images/raw/master/images/ThirdPartyImage16196034788090.png" alt=""></p><p>如果你要开发js库，那webpack的繁琐和打包后的文件体积就不太适用了。有需求就有工具，所以rollup的产生就是针对开发js库的。</p><p>rollup生成代码只是把我们的代码转码成目标js并无其他,同时如果需要,他可以同时帮我们生成支持umd/commonjs/es的js代码,vue/react/angular都在用他作为打包工具。查看他们的官网代码都可以看到rollup的影子。</p><h1 id="快速入门" tabindex="-1"><a class="header-anchor" href="#快速入门"><span>快速入门</span></a></h1><h2 id="_1-新建工程" tabindex="-1"><a class="header-anchor" href="#_1-新建工程"><span>1.新建工程</span></a></h2><p>新建一个空文件夹，比如rollupDemo,执行项目初始化</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">npm</span> init <span class="token parameter variable">-y</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_2-安装rollup" tabindex="-1"><a class="header-anchor" href="#_2-安装rollup"><span>2.安装rollup</span></a></h2><p>用vscode打开这个工程，执行命令安装</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">npm</span> <span class="token function">install</span> rollup --save-dev</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>执行后我们发现项目自动生产了一些文件，并看到package包里有了rollup。</p><h3 id="添加gitignore-忽略不用上传的文件" tabindex="-1"><a class="header-anchor" href="#添加gitignore-忽略不用上传的文件"><span>添加gitignore，忽略不用上传的文件</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">.DS_Store</span>
<span class="line">node_modules</span>
<span class="line">/dist</span>
<span class="line"></span>
<span class="line"></span>
<span class="line"># local env files</span>
<span class="line">.env.local</span>
<span class="line">.env.*.local</span>
<span class="line"></span>
<span class="line"># Log files</span>
<span class="line">npm-debug.log*</span>
<span class="line">yarn-debug.log*</span>
<span class="line">yarn-error.log*</span>
<span class="line">pnpm-debug.log*</span>
<span class="line"></span>
<span class="line"># Editor directories and files</span>
<span class="line">.idea</span>
<span class="line">.vscode</span>
<span class="line">*.suo</span>
<span class="line">*.ntvs*</span>
<span class="line">*.njsproj</span>
<span class="line">*.sln</span>
<span class="line">*.sw?</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-创建rollup-config-js" tabindex="-1"><a class="header-anchor" href="#_3-创建rollup-config-js"><span>3.创建rollup.config.js</span></a></h2><blockquote><p>我们也可以不用配置文件直接用cli命令来打包，但是如果添加更多的选项，这种命令行的方式就显得麻烦。为此，我们可以创建配置文件来囊括所需的选项。配置文件由 JavaScript 写成，比 CLI 更加灵活。（cli命令打包请看官网介绍）</p></blockquote><p>配置文件是一个ES6模块，它对外暴露一个对象，这个对象包含了一些Rollup需要的一些选项。通常，我们把这个配置文件叫做<code>rollup.config.js</code>，它通常位于项目的根目录,下面是一些配置选项</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">// rollup.config.js</span>
<span class="line">export default {</span>
<span class="line">  // 核心选项</span>
<span class="line">  input,     // 必须</span>
<span class="line">  external,</span>
<span class="line">  plugins,</span>
<span class="line"></span>
<span class="line">  // 额外选项</span>
<span class="line">  onwarn,</span>
<span class="line"></span>
<span class="line">  // danger zone</span>
<span class="line">  acorn,</span>
<span class="line">  context,</span>
<span class="line">  moduleContext,</span>
<span class="line">  legacy</span>
<span class="line"></span>
<span class="line">  output: {  // 必须 (如果要输出多个，可以是一个数组)</span>
<span class="line">    // 核心选项</span>
<span class="line">    file,    // 必须</span>
<span class="line">    format,  // 必须</span>
<span class="line">    name,</span>
<span class="line">    globals,</span>
<span class="line"></span>
<span class="line">    // 额外选项</span>
<span class="line">    paths,</span>
<span class="line">    banner,</span>
<span class="line">    footer,</span>
<span class="line">    intro,</span>
<span class="line">    outro,</span>
<span class="line">    sourcemap,</span>
<span class="line">    sourcemapFile,</span>
<span class="line">    interop,</span>
<span class="line"></span>
<span class="line">    // 高危选项</span>
<span class="line">    exports,</span>
<span class="line">    amd,</span>
<span class="line">    indent</span>
<span class="line">    strict</span>
<span class="line">  },</span>
<span class="line">};</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>rollup.config.js当前配置</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">input</span><span class="token operator">:</span><span class="token string">&#39;./src/main.js&#39;</span><span class="token punctuation">,</span><span class="token comment">//入口文件</span></span>
<span class="line">  <span class="token literal-property property">output</span><span class="token operator">:</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">file</span><span class="token operator">:</span><span class="token string">&#39;./dist/bundle.js&#39;</span><span class="token punctuation">,</span><span class="token comment">//打包后的存放文件</span></span>
<span class="line">    <span class="token literal-property property">format</span><span class="token operator">:</span><span class="token string">&#39;cjs&#39;</span><span class="token punctuation">,</span><span class="token comment">//输出格式 amd es6 iife umd cjs</span></span>
<span class="line">    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;bundleName&#39;</span><span class="token comment">//如果iife,umd需要指定一个全局变量</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span></span>
<span class="line">    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">commonjs</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-编写要打包的文件" tabindex="-1"><a class="header-anchor" href="#_4-编写要打包的文件"><span>4.编写要打包的文件</span></a></h2><h3 id="_1-新建src文件夹-并新建main-js-应用程序入口" tabindex="-1"><a class="header-anchor" href="#_1-新建src文件夹-并新建main-js-应用程序入口"><span>1.新建src文件夹，并新建main.js(应用程序入口)</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> name <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./modules/myModole&#39;</span><span class="token punctuation">;</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-新建modules文件夹-代表模块文件" tabindex="-1"><a class="header-anchor" href="#_2-新建modules文件夹-代表模块文件"><span>2.新建modules文件夹（代表模块文件）</span></a></h3><blockquote><p>modules的作用的区分模块和主入口，modules中可根据你自己的js库设计文件目录结构。</p></blockquote><p>modules/myModole 文件内容</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">&#39;jiaHang&#39;</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> age <span class="token operator">=</span> <span class="token number">18</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-编写package-json中的打包命令" tabindex="-1"><a class="header-anchor" href="#_5-编写package-json中的打包命令"><span>5.编写package.json中的打包命令</span></a></h2><p>在package.json中加一条script语句</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre><code class="language-json"><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;rollupDemo&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index.js&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;rollup --config&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;keywords&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ISC&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;rollup&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.45.2&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-执行npm-run-build-查看文件输出结果" tabindex="-1"><a class="header-anchor" href="#_6-执行npm-run-build-查看文件输出结果"><span>6.执行npm run build 查看文件输出结果</span></a></h2><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token string">&#39;use strict&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">&#39;jiaHang&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>我们看到输出的结果十分的清晰，没有像webpack那样多余的代码，而且myMoudule中的有没有被打包过来，这就是rollup最大的亮点tree-shaking,这个我们稍后再说。</p></blockquote><h2 id="_7-使用打包后的文件" tabindex="-1"><a class="header-anchor" href="#_7-使用打包后的文件"><span>7.使用打包后的文件</span></a></h2><p>在src下面新建一个index.html,并引入打包之后的bundle.js就可以看到控制台中打印的log</p><blockquote><p>打开这个网页后我们看到弹窗内容Hello from Rollup</p></blockquote><h1 id="常用配置" tabindex="-1"><a class="header-anchor" href="#常用配置"><span>常用配置</span></a></h1><h2 id="_1-input" tabindex="-1"><a class="header-anchor" href="#_1-input"><span>1.input</span></a></h2><p>入口文件地址</p><h2 id="_2-output" tabindex="-1"><a class="header-anchor" href="#_2-output"><span>2.output</span></a></h2><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">output:{</span>
<span class="line">    file:&#39;bundle.js&#39;, // 输出文件</span>
<span class="line">    format: &#39;cjs,  //  五种输出格式：amd /  es6 / iife / umd / cjs</span>
<span class="line">    name:&#39;A&#39;,  //当format为iife和umd时必须提供，将作为全局变量挂在window(浏览器环境)下：window.A=...</span>
<span class="line">    sourcemap:true  //生成bundle.map.js文件，方便调试</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-plugins" tabindex="-1"><a class="header-anchor" href="#_3-plugins"><span>3.plugins</span></a></h2><p>各种插件使用的配置</p><h2 id="_4-external" tabindex="-1"><a class="header-anchor" href="#_4-external"><span>4.external</span></a></h2><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">external:[&#39;lodash&#39;] //告诉rollup不要将此lodash打包，而作为外部依赖</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_5-global" tabindex="-1"><a class="header-anchor" href="#_5-global"><span>5.global</span></a></h2><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">global:{</span>
<span class="line">    &#39;jquery&#39;:&#39;$&#39; //告诉rollup 全局变量$即是jquery</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="深入使用" tabindex="-1"><a class="header-anchor" href="#深入使用"><span>深入使用</span></a></h1><h2 id="_1-使用babel" tabindex="-1"><a class="header-anchor" href="#_1-使用babel"><span>1.使用Babel</span></a></h2><blockquote><p>为了正确解析我们的模块并使其与旧版浏览器兼容，我们应该包括babel来编译输出。许多开发人员在他们的项目中使用 Babel ，以便他们可以使用未被浏览器和 Node.js 支持的将来版本的 JavaScript 特性。</p></blockquote><h3 id="_1-1-安装-rollup-plugin-babel" tabindex="-1"><a class="header-anchor" href="#_1-1-安装-rollup-plugin-babel"><span>1.1 安装 rollup-plugin-babel</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">npm install rollup-plugin-babel --save-dev</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_1-2-配置rollup-config-js" tabindex="-1"><a class="header-anchor" href="#_1-2-配置rollup-config-js"><span>1.2 配置rollup.config.js</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> babel <span class="token keyword">from</span> <span class="token string">&#39;rollup-plugin-babel&#39;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">input</span><span class="token operator">:</span> <span class="token string">&#39;./src/main&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">file</span><span class="token operator">:</span> <span class="token string">&#39;./dist/bundle.js&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">&#39;cjs&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;bundleName&#39;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token function">babel</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token string">&#39;node_modules/**&#39;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-3-添加babel配置文件-babelrc" tabindex="-1"><a class="header-anchor" href="#_1-3-添加babel配置文件-babelrc"><span>1.3 添加Babel配置文件.babelrc</span></a></h3><blockquote><p>在src文件夹下添加.babelrc</p></blockquote><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre><code class="language-json"><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">[</span></span>
<span class="line">      <span class="token string">&quot;@babel/env&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;modules&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token comment">// 设置为false,否则babel会在rollup有机会执行其操作之前导致我们的模块转化为commonjs</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这个设置有一些不寻常的地方。</p><blockquote><p>首先，我们设置 &quot;modules&quot;: false ，否则 Babel 会在 Rollup 有机会做处理之前，将我们的模块转成 CommonJS ，导致 Rollup 的一些处理失败。</p></blockquote><blockquote><p>第二，我们将 .babelrc 文件放在 src 中，而不是根目录下。 这允许我们对于不同的任务有不同的 .babelrc 配置，比如像测试，如果我们以后需要的话 - 通常为单独的任务单独配置会更好。</p></blockquote><h3 id="_1-4-安装-babel-core-和-babel-preset-env" tabindex="-1"><a class="header-anchor" href="#_1-4-安装-babel-core-和-babel-preset-env"><span>1.4 安装@babel/core 和 @babel/preset-env</span></a></h3><blockquote><p>@babel/core是babel的核心，我们看到babelrc配置了 preset env，所以要安装这两个插件</p></blockquote><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">npm install @babel/core @babel/preset-env --save-dev</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>最后运行npm run build,我们看到打包后出来的文件内容经过babel转换后有es6语法变成了es5语法</strong></p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token string">&#39;use strict&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&#39;jiaHang&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-node模块的引用" tabindex="-1"><a class="header-anchor" href="#_2-node模块的引用"><span>2.node模块的引用</span></a></h2><blockquote><p>在某些时候，您的项目可能取决于从NPM安装到node_modules文件夹中的软件包。</p></blockquote><p>与Webpack和Browserify等其他捆绑软件不同，Rollup不知道如何\`\`开箱即用&#39;&#39;如何处理这些依赖项-我们需要添加一些插件配置。</p><blockquote><p>rollup.js编译源码中的模块引用默认只支持 ES6+的模块方式import/export。然而大量的npm模块是基于CommonJS模块方式，这就导致了大量 npm 模块不能直接编译使用。所以辅助rollup.js编译支持 npm模块和CommonJS模块方式的插件就应运而生。</p></blockquote><ul><li>rollup-plugin-node-resolve 插件允许我们加载第三方模块</li><li>@rollup/plugin-commons 插件将它们转换为ES6版本</li></ul><h3 id="_2-1-安装-rollup-plugin-node-resolve和-rollup-plugin-commonjs" tabindex="-1"><a class="header-anchor" href="#_2-1-安装-rollup-plugin-node-resolve和-rollup-plugin-commonjs"><span>2.1 安装@rollup/plugin-node-resolve和@rollup/plugin-commonjs</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">npm install @rollup/plugin-node-resolve @rollup/plugin-commonjs --save-dev</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_2-2-配置rollup-config-js" tabindex="-1"><a class="header-anchor" href="#_2-2-配置rollup-config-js"><span>2.2 配置rollup.config.js</span></a></h3><h3 id="_2-3-使用一个第三方库lodash" tabindex="-1"><a class="header-anchor" href="#_2-3-使用一个第三方库lodash"><span>2.3 使用一个第三方库lodash</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">npm install lodash --save-dev</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>打开src/main.js使用lodash</p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> name <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./modules/myModole&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">&#39;lodash&#39;</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> arr <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>执行npm run build 后我们看打包后的文件多了很多内容，这些代码就是lodash的代码，被我们打包整合进来了。</p><h3 id="_2-4-额外补充" tabindex="-1"><a class="header-anchor" href="#_2-4-额外补充"><span>2.4 额外补充</span></a></h3><blockquote><p>如果你不想第三方库被打包进来，而可以在外面引入，配合使用的话，可以在rollup.config.js中配置external</p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> babel <span class="token keyword">from</span> <span class="token string">&#39;rollup-plugin-babel&#39;</span></span>
<span class="line"><span class="token keyword">import</span> resolve <span class="token keyword">from</span> <span class="token string">&#39;@rollup/plugin-node-resolve&#39;</span></span>
<span class="line"><span class="token keyword">import</span> commonjs <span class="token keyword">from</span> <span class="token string">&#39;@rollup/plugin-typescript&#39;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">input</span><span class="token operator">:</span> <span class="token string">&#39;./src/main&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">file</span><span class="token operator">:</span> <span class="token string">&#39;./dist/bundle.js&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">&#39;cjs&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;bundleName&#39;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">commonjs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">babel</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token string">&#39;node_modules/**&#39;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">external</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;lodash&#39;</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>执行npm run build 后发现打包出来的内容变少了</p></blockquote><p>​</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token string">&#39;use strict&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">var</span> _ <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;lodash&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">_interopDefaultLegacy</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> e <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> e <span class="token operator">===</span> <span class="token string">&#39;object&#39;</span> <span class="token operator">&amp;&amp;</span> <span class="token string">&#39;default&#39;</span> <span class="token keyword">in</span> e <span class="token operator">?</span> e <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&#39;default&#39;</span><span class="token operator">:</span> e <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">var</span> ___default <span class="token operator">=</span> <span class="token comment">/*#__PURE__*/</span><span class="token function">_interopDefaultLegacy</span><span class="token punctuation">(</span>_<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&#39;jiaHang&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">var</span> arr <span class="token operator">=</span> ___default<span class="token punctuation">[</span><span class="token string">&#39;default&#39;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>然后页面里使用也稍作修改，script引入lodash，使用iife打包出来的文件（因为我们这里使用页面引用的方式），查看页面可以正常输出。</p></blockquote><h2 id="_3-使用typescript" tabindex="-1"><a class="header-anchor" href="#_3-使用typescript"><span>3.使用typescript</span></a></h2><blockquote><p>我们在开发大型项目时，一般都会使用typescript来增强代码的可维护性。所以在rollup中使用typescript也是必不可少的。</p></blockquote><h3 id="_3-1-安装-rollup-plugin-typescript" tabindex="-1"><a class="header-anchor" href="#_3-1-安装-rollup-plugin-typescript"><span>3.1 安装@rollup/plugin-typescript</span></a></h3><blockquote><p>我之前使用的时候用的是rollup-plugin-typescript，今天写这篇文章时发现此插件不维护更新了，模块移植到了@rollup/plugin-typescript</p></blockquote><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">npm install @rollup/plugin-typescript --save-dev</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>安装后发现有报错,提示我们要安装tslib和typescript</p></blockquote><h3 id="_3-2-安装tslib-和-typescript" tabindex="-1"><a class="header-anchor" href="#_3-2-安装tslib-和-typescript"><span>3.2 安装tslib 和 typescript</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">npm install tslib typescript --save-dev</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_3-3-配置rollup-config-js" tabindex="-1"><a class="header-anchor" href="#_3-3-配置rollup-config-js"><span>3.3 配置rollup.config.js</span></a></h3><blockquote><p>引入使用插件</p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> babel <span class="token keyword">from</span> <span class="token string">&#39;rollup-plugin-babel&#39;</span></span>
<span class="line"><span class="token keyword">import</span> resolve <span class="token keyword">from</span> <span class="token string">&#39;@rollup/plugin-node-resolve&#39;</span></span>
<span class="line"><span class="token keyword">import</span> commonjs <span class="token keyword">from</span> <span class="token string">&#39;@rollup/plugin-typescript&#39;</span></span>
<span class="line"><span class="token keyword">import</span> typescript <span class="token keyword">from</span> <span class="token string">&#39;@rollup/plugin-commonjs&#39;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">input</span><span class="token operator">:</span> <span class="token string">&#39;./src/main&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">file</span><span class="token operator">:</span> <span class="token string">&#39;./dist/bundle.js&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">&#39;cjs&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;bundleName&#39;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token function">typescript</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">commonjs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">babel</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token string">&#39;node_modules/**&#39;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">external</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;lodash&#39;</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-4-配置tsconfig-json" tabindex="-1"><a class="header-anchor" href="#_3-4-配置tsconfig-json"><span>3.4 配置tsconfig.json</span></a></h3><blockquote><p>如果不配置直接运行npm run build 会有提示让我们新建tsconfig配置,简单配置下tsconfig</p></blockquote><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre><code class="language-json"><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;lib&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">      <span class="token string">&quot;es6&quot;</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ESNext&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;allowJs&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;exclude&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token string">&quot;node_modules&quot;</span></span>
<span class="line">  <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;include&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token string">&quot;src/**/*&quot;</span></span>
<span class="line">  <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-5-编写ts文件" tabindex="-1"><a class="header-anchor" href="#_3-5-编写ts文件"><span>3.5 编写ts文件</span></a></h3><p>Greeter.ts</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">class</span> <span class="token class-name">Greeter</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">greeter</span><span class="token operator">:</span> string<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">message</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>greeter <span class="token operator">=</span> message</span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;hello ts&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> Greeter</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>main.js</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">import { name } from &#39;./modules/myModole&#39;;</span>
<span class="line">import Greeter from &#39;./modules/Greeter&#39;;</span>
<span class="line">import _ from &#39;lodash&#39;;</span>
<span class="line"></span>
<span class="line">const a = new Greeter(&#39;ss&#39;);</span>
<span class="line">a.greet()</span>
<span class="line">console.log(&#39;hello&#39; + name);</span>
<span class="line">const arr = _.concat([1, 2], 3, 4, [5]);</span>
<span class="line">console.log(arr);</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-压缩代码" tabindex="-1"><a class="header-anchor" href="#_4-压缩代码"><span>4.压缩代码</span></a></h2><blockquote><p>为了时代码体积更小，我们都会使用代码压缩插件</p></blockquote><h3 id="_4-1-安装rollup-plugin-terser" tabindex="-1"><a class="header-anchor" href="#_4-1-安装rollup-plugin-terser"><span>4.1 安装rollup-plugin-terser</span></a></h3><blockquote><p>terser是什么，它是适用于ES6 +的JavaScript解析器，mangler和压缩器工具包</p></blockquote><blockquote><p>我们比较熟悉的是uglify，因为我们在webpack中使用过，rollup中也有rollup-plugin-uglify插件</p></blockquote><p><img src="https://gitee.com/yutao618/images/raw/master/images/ThirdPartyImage161960347880930.png" alt=""></p><blockquote><p>我们看到 注意：uglify-js只能翻译es5语法。如果要转译es6+语法，请改用terser</p></blockquote><blockquote><p>所以我们使用rollup-plugin-terser</p></blockquote><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">npm install rollup-plugin-terser --save-dev</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_4-2-配置rollup-config-js" tabindex="-1"><a class="header-anchor" href="#_4-2-配置rollup-config-js"><span>4.2 配置rollup.config.js</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> babel <span class="token keyword">from</span> <span class="token string">&#39;rollup-plugin-babel&#39;</span></span>
<span class="line"><span class="token keyword">import</span> resolve <span class="token keyword">from</span> <span class="token string">&#39;@rollup/plugin-node-resolve&#39;</span></span>
<span class="line"><span class="token keyword">import</span> commonjs <span class="token keyword">from</span> <span class="token string">&#39;@rollup/plugin-typescript&#39;</span></span>
<span class="line"><span class="token keyword">import</span> typescript <span class="token keyword">from</span> <span class="token string">&#39;@rollup/plugin-commonjs&#39;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> terser <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;rollup-plugin-terser&#39;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">input</span><span class="token operator">:</span> <span class="token string">&#39;./src/main&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">file</span><span class="token operator">:</span> <span class="token string">&#39;./dist/bundle.js&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">&#39;cjs&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;bundleName&#39;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token function">typescript</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">commonjs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">babel</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token string">&#39;node_modules/**&#39;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token function">terser</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">external</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;lodash&#39;</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-编译css" tabindex="-1"><a class="header-anchor" href="#_5-编译css"><span>5.编译css</span></a></h2><blockquote><p>开发项目我们用webpack，开发js类库，rollup比webpack强。开发js类库一般是不写css，如果你要写大量的css，那可能你开发的是项目，优先选择webpack，webpack里也有开发library的配置。</p></blockquote><blockquote><p>如果你的js类库里还是必不可少要写些css的话，rollup也是有插件编译css的</p></blockquote><h3 id="_5-1-安装rollup-plugin-postcss" tabindex="-1"><a class="header-anchor" href="#_5-1-安装rollup-plugin-postcss"><span>5.1 安装rollup-plugin-postcss</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">npm install rollup-plugin-postcss --save-dev</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_5-2-配置rollup-config-js" tabindex="-1"><a class="header-anchor" href="#_5-2-配置rollup-config-js"><span>5.2 配置rollup.config.js</span></a></h3><blockquote><p>引入postcss插件并使用，先注释掉压缩插件，让我们能看看打包出来的css会是什么样的。</p></blockquote><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line"></span>
<span class="line">import babel from &#39;rollup-plugin-babel&#39;</span>
<span class="line">import resolve from &#39;@rollup/plugin-node-resolve&#39;</span>
<span class="line">import commonjs from &#39;@rollup/plugin-typescript&#39;</span>
<span class="line">import typescript from &#39;@rollup/plugin-commonjs&#39;</span>
<span class="line">import { terser } from &#39;rollup-plugin-terser&#39;</span>
<span class="line">import postcss from &#39;rollup-plugin-postcss&#39;</span>
<span class="line"></span>
<span class="line">export default {</span>
<span class="line">  input: &#39;./src/main&#39;,</span>
<span class="line">  output: {</span>
<span class="line">    file: &#39;./dist/bundle.js&#39;,</span>
<span class="line">    format: &#39;cjs&#39;,</span>
<span class="line">    name: &#39;bundleName&#39;</span>
<span class="line">  },</span>
<span class="line">  plugins: [</span>
<span class="line">    typescript(),</span>
<span class="line">    resolve(),</span>
<span class="line">    commonjs(),</span>
<span class="line">    babel({</span>
<span class="line">      exclude: &#39;node_modules/**&#39;</span>
<span class="line">    }),</span>
<span class="line">    // terser(),</span>
<span class="line">    postcss()</span>
<span class="line">  ],</span>
<span class="line">  external: [&#39;lodash&#39;]</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-3-编写使用css" tabindex="-1"><a class="header-anchor" href="#_5-3-编写使用css"><span>5.3 编写使用css</span></a></h3><blockquote><p>1.在src目录下写入style.css文件</p></blockquote><p><img src="https://gitee.com/yutao618/images/raw/master/images/ThirdPartyImage161960347880934.png" alt=""></p><blockquote><p>2.main.js中写入相关的css使用代码</p></blockquote><p><img src="https://gitee.com/yutao618/images/raw/master/images/ThirdPartyImage161960347880935.png" alt=""></p><blockquote><p>3.执行npm run build 查看打包后的文件内容。我们看到css通过这块代码动态引入了</p></blockquote><p><img src="https://gitee.com/yutao618/images/raw/master/images/ThirdPartyImage161960347880936.png" alt=""></p><blockquote><p>4.打开页面查看html代码</p></blockquote><p><img src="https://gitee.com/yutao618/images/raw/master/images/ThirdPartyImage161960347880937.png" alt=""></p><blockquote><p>使用less等预编译也是可以的，如有需要，向我提问我再更新。</p></blockquote><h2 id="_6-开启本地服务器" tabindex="-1"><a class="header-anchor" href="#_6-开启本地服务器"><span>6.开启本地服务器</span></a></h2><blockquote><p>在实际开发过程中，我们肯定要运行代码，查看页面，这时有个本地服务器就很重要，这样可以调试代码。</p></blockquote><h3 id="_6-1-安装rollup-plugin-serve" tabindex="-1"><a class="header-anchor" href="#_6-1-安装rollup-plugin-serve"><span>6.1 安装rollup-plugin-serve</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">npm install rollup-plugin-serve --save-dev</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_6-2-配置rollup-config-js" tabindex="-1"><a class="header-anchor" href="#_6-2-配置rollup-config-js"><span>6.2 配置rollup.config.js</span></a></h3><p>记得配置sourcemap: true,这样调试代码方便。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> babel <span class="token keyword">from</span> <span class="token string">&#39;rollup-plugin-babel&#39;</span></span>
<span class="line"><span class="token keyword">import</span> resolve <span class="token keyword">from</span> <span class="token string">&#39;@rollup/plugin-node-resolve&#39;</span></span>
<span class="line"><span class="token keyword">import</span> commonjs <span class="token keyword">from</span> <span class="token string">&#39;@rollup/plugin-typescript&#39;</span></span>
<span class="line"><span class="token keyword">import</span> typescript <span class="token keyword">from</span> <span class="token string">&#39;@rollup/plugin-commonjs&#39;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> terser <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;rollup-plugin-terser&#39;</span></span>
<span class="line"><span class="token keyword">import</span> postcss <span class="token keyword">from</span> <span class="token string">&#39;rollup-plugin-postcss&#39;</span></span>
<span class="line"><span class="token keyword">import</span> serve <span class="token keyword">from</span> <span class="token string">&#39;rollup-plugin-serve&#39;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">input</span><span class="token operator">:</span> <span class="token string">&#39;./src/main&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">file</span><span class="token operator">:</span> <span class="token string">&#39;./dist/bundle.js&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">&#39;cjs&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;bundleName&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">sourcemap</span><span class="token operator">:</span> <span class="token boolean">true</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token function">typescript</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">commonjs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">babel</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token string">&#39;node_modules/**&#39;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">terser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">postcss</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">serve</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">open</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">contentBase</span><span class="token operator">:</span> <span class="token string">&#39;dist&#39;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">external</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;lodash&#39;</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_7-开启热更新" tabindex="-1"><a class="header-anchor" href="#_7-开启热更新"><span>7.开启热更新</span></a></h2><blockquote><p>现在本地服务器有了，但是每次修改代码，还要重新启动才能生效，很不方便，所以需要热更新。</p></blockquote><h3 id="_7-1-安装rollup-plugin-livereload" tabindex="-1"><a class="header-anchor" href="#_7-1-安装rollup-plugin-livereload"><span>7.1 安装rollup-plugin-livereload</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">npm install rollup-plugin-livereload --save-dev</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_7-2-配置rollup-config-js" tabindex="-1"><a class="header-anchor" href="#_7-2-配置rollup-config-js"><span>7.2 配置rollup.config.js</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> babel <span class="token keyword">from</span> <span class="token string">&#39;rollup-plugin-babel&#39;</span></span>
<span class="line"><span class="token keyword">import</span> resolve <span class="token keyword">from</span> <span class="token string">&#39;@rollup/plugin-node-resolve&#39;</span></span>
<span class="line"><span class="token keyword">import</span> commonjs <span class="token keyword">from</span> <span class="token string">&#39;@rollup/plugin-typescript&#39;</span></span>
<span class="line"><span class="token keyword">import</span> typescript <span class="token keyword">from</span> <span class="token string">&#39;@rollup/plugin-commonjs&#39;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> terser <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;rollup-plugin-terser&#39;</span></span>
<span class="line"><span class="token keyword">import</span> postcss <span class="token keyword">from</span> <span class="token string">&#39;rollup-plugin-postcss&#39;</span></span>
<span class="line"><span class="token keyword">import</span> serve <span class="token keyword">from</span> <span class="token string">&#39;rollup-plugin-serve&#39;</span></span>
<span class="line"><span class="token keyword">import</span> livereload <span class="token keyword">from</span> <span class="token string">&#39;rollup-plugin-livereload&#39;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">input</span><span class="token operator">:</span> <span class="token string">&#39;./src/main&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">file</span><span class="token operator">:</span> <span class="token string">&#39;./dist/bundle.js&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">&#39;cjs&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;bundleName&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">sourcemap</span><span class="token operator">:</span> <span class="token boolean">true</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token function">typescript</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">commonjs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">babel</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token string">&#39;node_modules/**&#39;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">terser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">postcss</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">livereload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">serve</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">open</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">contentBase</span><span class="token operator">:</span> <span class="token string">&#39;dist&#39;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">external</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;lodash&#39;</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-3增加script语句" tabindex="-1"><a class="header-anchor" href="#_7-3增加script语句"><span>7.3增加script语句</span></a></h3><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre><code class="language-json"><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;rollupDemo&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index.js&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;rollup --config&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;rollup --config -w&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;keywords&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ISC&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;@babel/core&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^7.13.16&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;@babel/preset-env&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^7.13.15&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;@rollup/plugin-commonjs&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^18.0.0&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;@rollup/plugin-node-resolve&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^11.2.1&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;@rollup/plugin-typescript&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^8.2.1&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;lodash&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.17.21&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;postcss&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^8.2.13&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;rollup&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.45.2&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;rollup-plugin-babel&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.4.0&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;rollup-plugin-livereload&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.0.0&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;rollup-plugin-postcss&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.0.0&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;rollup-plugin-serve&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.1.0&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;rollup-plugin-terser&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^7.0.2&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;tslib&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.2.0&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;typescript&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.2.4&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_8-区分开发环境和生产环境" tabindex="-1"><a class="header-anchor" href="#_8-区分开发环境和生产环境"><span>8.区分开发环境和生产环境</span></a></h2><blockquote><p>在开发环境我们需要sourcemap开启，配置热更新和本地服务，在生产环境我们需要sourcemap关闭，不需要热更新和本地服务，需要代码压缩等，所以需要区分。</p></blockquote><p>将rollup.config.js拆分成两个rollup.config.dev.js和rollup.config.build.js,再结合我们项目实际情况来编写配置文件。</p><h2 id="_9-相关rollup插件地址" tabindex="-1"><a class="header-anchor" href="#_9-相关rollup插件地址"><span>9.相关rollup插件地址</span></a></h2><ul><li><a href="https://github.com/rollup/awesome" target="_blank" rel="noopener noreferrer">awesome</a></li><li><a href="https://github.com/rollup/plugins" target="_blank" rel="noopener noreferrer">https://github.com/rollup/plugins</a></li></ul><h1 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结</span></a></h1><p>rollup基本使用差不多都是这样了，有很多插件都能解决相关配置需求，具体可以参考下文档，接下来我们就需要深入的去理解rollup的打包机制是怎么样。</p>`,159)])])}const c=n(l,[["render",t]]),r=JSON.parse('{"path":"/web/rollup/rollupUse.html","title":"为什么不用webpack","lang":"en-US","frontmatter":{},"git":{"updatedTime":1619685881000,"contributors":[{"name":"yutao","username":"yutao","email":"642231346@qq.com","commits":2,"url":"https://github.com/yutao"}],"changelog":[{"hash":"178798a0ad3af176d86b63eadc6fd49ebed269d0","time":1619685881000,"email":"642231346@qq.com","author":"yutao","message":"modify"},{"hash":"c718f789632995243723be6917edd41728c5fa5b","time":1619684306000,"email":"642231346@qq.com","author":"yutao","message":"modify"}]},"filePathRelative":"web/rollup/rollupUse.md"}');export{c as comp,r as data};
