import{_ as n,c as a,a as e,o as p}from"./app-CD1YpnS1.js";const l={};function t(i,s){return p(),a("div",null,[...s[0]||(s[0]=[e(`<h2 id="_1-webpack5新特性介绍" tabindex="-1"><a class="header-anchor" href="#_1-webpack5新特性介绍"><span>1. webpack5新特性介绍</span></a></h2><ul><li>持久化缓存</li><li>资源模块</li><li><code>moduleIds</code> &amp; <code>chunkIds</code>的优化</li><li>更智能的<code>tree shaking</code></li><li>nodeJs的<code>polyfill</code>脚本被移除</li><li>支持生成<code>e6/es2015</code>的代码</li><li><code>SplitChunk</code>和模块大小</li><li><code>Module Federation</code></li></ul><h2 id="_2-持久化缓存" tabindex="-1"><a class="header-anchor" href="#_2-持久化缓存"><span>2.持久化缓存</span></a></h2><ul><li>[缓存](https://webpack.docschina.org/configuration/other-options/</li><li>cache 会在开发模式被设置成 <code>type: &#39;memory&#39;</code> 而且在 生产 模式 中被禁用</li><li>在webpack5中默认开启，缓存默认是在内存里,但可以对<code>cache</code>进行设置</li><li>当设置<code>cache.type: &quot;filesystem&quot;</code>的时候,webpack会在内部启用文件缓存和内存缓存，写入的时候会同时写入内存和文件，读取缓存的时候会先读内存，如果内存里没有才会读取文件</li><li>每个缓存最大资源占用不超过500MB,当逼近或超过500MB时，会优先删除最老的缓存，并且缓存的有效期最长为2周</li><li><a href="node_modules_webpack@5.10.1@webpack%5Clib%5Cserialization%5CFileMiddleware.js">FileMiddleware.js</a></li><li><a href="node_modules_webpack@5.10.1@webpack%5Clib%5Ccache%5CPackFileCacheStrategy.js">PackFileCacheStrategy.js:1036</a></li><li><a href="node_modules_webpack@5.10.3@webpack%5Clib%5CFileSystemInfo.js">FileSystemInfo.js:1691</a></li><li>默认情况下，webpack 假定 webpack 所在的 node_modules 目录只被包管理器修改。对 node_modules 来说，哈希值和时间戳会被跳过</li></ul><h3 id="_2-1-安装" tabindex="-1"><a class="header-anchor" href="#_2-1-安装"><span>2.1 安装</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">cnpm i webpack webpack-cli webpack-dev-server babel-loader @babel/core  @babel/preset-env -D</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_2-2-webpack-config-js" tabindex="-1"><a class="header-anchor" href="#_2-2-webpack-config-js"><span>2.2 webpack.config.js</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;development&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;filesystem&#39;</span><span class="token punctuation">,</span>  <span class="token comment">//  &#39;memory&#39; | &#39;filesystem&#39;</span></span>
<span class="line">        <span class="token literal-property property">cacheDirectory</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;node_modules/.cache/webpack&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 默认将缓存存储在 node_modules/.cache/webpack</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">watch</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">            <span class="token punctuation">{</span></span>
<span class="line">                <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">                    <span class="token punctuation">{</span></span>
<span class="line">                        <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;babel-loader&#39;</span><span class="token punctuation">,</span></span>
<span class="line">                        <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">                            <span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">                                <span class="token string">&quot;@babel/preset-env&quot;</span></span>
<span class="line">                            <span class="token punctuation">]</span></span>
<span class="line">                        <span class="token punctuation">}</span></span>
<span class="line">                    <span class="token punctuation">}</span></span>
<span class="line">                <span class="token punctuation">]</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">]</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-3-package-json" tabindex="-1"><a class="header-anchor" href="#_2-3-package-json"><span>2.3 package.json</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">  &quot;scripts&quot;: {</span>
<span class="line">    &quot;build&quot;: &quot;webpack&quot;,</span>
<span class="line">    &quot;debug&quot;: &quot;webpack&quot;</span>
<span class="line">  },</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-资源模块" tabindex="-1"><a class="header-anchor" href="#_3-资源模块"><span>3.资源模块</span></a></h2><ul><li>资源模块(asset module)是一种模块类型，它允许使用资源文件（字体，图标等）而无需配置额外 loader</li><li>在 webpack 5 之前，通常使用： <ul><li>raw-loader 将文件导入为字符串</li><li>url-loader 将文件作为 data URI 内联到 bundle 中</li><li>file-loader 将文件发送到输出目录</li></ul></li><li>资源模块类型(asset module type)，通过添加 4 种新的模块类型，来替换所有这些 loader <ul><li>asset/resource 发送一个单独的文件并导出 URL。之前通过使用 file-loader 实现。</li><li>asset/inline 导出一个资源的 data URI。之前通过使用 url-loader 实现。</li><li>asset/source 导出资源的源代码。之前通过使用 raw-loader 实现。</li><li>asset 在导出一个 data URI 和发送一个单独的文件之间自动选择。之前通过使用 url-loader，并且配置资源体积限制实现</li></ul></li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span> </span>
<span class="line">      <span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.png$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset/resource&#39;</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.ico$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset/inline&#39;</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.txt$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset/source&#39;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">experiments</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">asset</span><span class="token operator">:</span> <span class="token boolean">true</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-1-老方式" tabindex="-1"><a class="header-anchor" href="#_3-1-老方式"><span>3.1 老方式</span></a></h3><h4 id="_3-1-1-src-index-js" tabindex="-1"><a class="header-anchor" href="#_3-1-1-src-index-js"><span>3.1.1 src\\index.js</span></a></h4><p>src\\index.js</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> url <span class="token keyword">from</span> <span class="token string">&#39;./images/kf.jpg&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">let</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">img<span class="token punctuation">.</span>src <span class="token operator">=</span> url<span class="token punctuation">;</span></span>
<span class="line">document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-1-2-webpack-config-js" tabindex="-1"><a class="header-anchor" href="#_3-1-2-webpack-config-js"><span>3.1.2 webpack.config.js</span></a></h4><p>webpack.config.js</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">            <span class="token punctuation">{</span></span>
<span class="line">                <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.(jpg|png|gif)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">&#39;asset&#39;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-2-新方式" tabindex="-1"><a class="header-anchor" href="#_3-2-新方式"><span>3.2 新方式</span></a></h3><ul><li>新的方式语法是为了允许在没有打包工具的情况下运行代码。这种语法也可以在浏览器中的原生 ECMAScript 模块中使用</li></ul><h4 id="_3-2-1-src-index-js" tabindex="-1"><a class="header-anchor" href="#_3-2-1-src-index-js"><span>3.2.1 src\\index.js</span></a></h4><p>src\\index.js</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">&#39;./images/kf.jpg&#39;</span><span class="token punctuation">,</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">let</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">img<span class="token punctuation">.</span>src <span class="token operator">=</span> url<span class="token punctuation">;</span></span>
<span class="line">document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-uris" tabindex="-1"><a class="header-anchor" href="#_4-uris"><span>4.URIs</span></a></h2><ul><li>Webpack 5 支持在请求中处理协议</li><li>支持data 支持 Base64 或原始编码,MimeType可以在<code>module.rule</code>中被映射到加载器和模块类型</li><li>支持http(s)</li></ul><p>src\\index.js</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> data <span class="token keyword">from</span> <span class="token string">&quot;data:text/javascript,export default &#39;title&#39;&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> url <span class="token keyword">from</span> <span class="token string">&#39;https://img.zhufengpeixun.com/zfjg.png&#39;</span><span class="token punctuation">;</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>webpack.config.js</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;html-webpack-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;es6&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span></span>
<span class="line">        <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>experiments<span class="token punctuation">.</span>schemes<span class="token punctuation">.</span>HttpsUriPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-moduleids-chunkids的优化" tabindex="-1"><a class="header-anchor" href="#_5-moduleids-chunkids的优化"><span>5.moduleIds &amp; chunkIds的优化</span></a></h2><h3 id="_5-1-概念" tabindex="-1"><a class="header-anchor" href="#_5-1-概念"><span>5.1 概念</span></a></h3><ul><li>module: 每一个文件其实都可以看成一个 module</li><li>chunk: webpack打包最终生成的代码块，代码块会生成文件，一个文件对应一个chunk</li></ul><h3 id="_5-2-优化" tabindex="-1"><a class="header-anchor" href="#_5-2-优化"><span>5.2 优化</span></a></h3><ul><li>在webpack5之前，没有从entry打包的chunk文件，都会以1、2、3...的文件命名方式输出,删除某些些文件可能会导致缓存失效</li><li>在生产模式下，默认启用这些功能chunkIds: &quot;deterministic&quot;, moduleIds: &quot;deterministic&quot;，此算法采用确定性的方式将短数字 ID(3 或 4 个字符)短hash值分配给 modules 和 chunks</li></ul><table><thead><tr><th style="text-align:left;">可选值</th><th style="text-align:left;">含义</th><th style="text-align:left;">示例</th></tr></thead><tbody><tr><td style="text-align:left;">false</td><td style="text-align:left;">不应使用任何内置算法,插件提供自定义算法</td><td style="text-align:left;">Path variable [name] not implemented in this context: [name].js</td></tr><tr><td style="text-align:left;">natural</td><td style="text-align:left;">按使用顺序的数字ID</td><td style="text-align:left;">1</td></tr><tr><td style="text-align:left;">named</td><td style="text-align:left;">方便调试的高可读性id</td><td style="text-align:left;">src_two_js.js</td></tr><tr><td style="text-align:left;">deterministic</td><td style="text-align:left;">根据模块名称生成简短的hash值</td><td style="text-align:left;">915</td></tr><tr><td style="text-align:left;">size</td><td style="text-align:left;">根据模块大小生成的数字id</td><td style="text-align:left;">0</td></tr></tbody></table><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">const path = require(&#39;path&#39;);</span>
<span class="line">module.exports = {</span>
<span class="line">    mode: &#39;development&#39;,</span>
<span class="line">    devtool:false,</span>
<span class="line">+    optimization:{</span>
<span class="line">+        moduleIds:&#39;deterministic&#39;,</span>
<span class="line">+        chunkIds:&#39;size&#39;</span>
<span class="line">+    },</span>
<span class="line">    module: {</span>
<span class="line">        rules: [</span>
<span class="line">            {</span>
<span class="line">                test: /\\.js$/,</span>
<span class="line">                use: [</span>
<span class="line">                    {</span>
<span class="line">                        loader: &#39;babel-loader&#39;,</span>
<span class="line">                        options: {</span>
<span class="line">                            presets: [</span>
<span class="line">                                &quot;@babel/preset-env&quot;</span>
<span class="line">                            ]</span>
<span class="line">                        }</span>
<span class="line">                    }</span>
<span class="line">                ]</span>
<span class="line">            }</span>
<span class="line">        ]</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-移除node-js的polyfill" tabindex="-1"><a class="header-anchor" href="#_6-移除node-js的polyfill"><span>6.移除Node.js的polyfill</span></a></h2><ul><li><code>webpack4</code>带了许多Node.js核心模块的<code>polyfill</code>,一旦模块中使用了任何核心模块(如crypto)，这些模块就会被自动启用</li><li><code>webpack5</code>不再自动引入这些<code>polyfill</code></li></ul><h3 id="_6-1-安装" tabindex="-1"><a class="header-anchor" href="#_6-1-安装"><span>6.1 安装</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">cnpm i crypto-js crypto-browserify stream-browserify buffer -D</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_6-2-src-index-js" tabindex="-1"><a class="header-anchor" href="#_6-2-src-index-js"><span>6.2 src\\index.js</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> CryptoJS <span class="token keyword">from</span> <span class="token string">&#39;crypto-js&#39;</span><span class="token punctuation">;</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>CryptoJS<span class="token punctuation">.</span><span class="token constant">MD5</span><span class="token punctuation">(</span><span class="token string">&#39;zhufeng&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-3-webpack-config-js" tabindex="-1"><a class="header-anchor" href="#_6-3-webpack-config-js"><span>6.3 webpack.config.js</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">    <span class="token literal-property property">resolve</span><span class="token operator">:</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">/* fallback:{ </span>
<span class="line">            &quot;crypto&quot;: require.resolve(&quot;crypto-browserify&quot;),</span>
<span class="line">            &quot;buffer&quot;: require.resolve(&quot;buffer&quot;),</span>
<span class="line">            &quot;stream&quot;:require.resolve(&quot;stream-browserify&quot;)</span>
<span class="line">        }, */</span></span>
<span class="line">        <span class="token literal-property property">fallback</span><span class="token operator">:</span><span class="token punctuation">{</span> </span>
<span class="line">            <span class="token string-property property">&quot;crypto&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token string-property property">&quot;buffer&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token string-property property">&quot;stream&quot;</span><span class="token operator">:</span><span class="token boolean">false</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_7-更强大的tree-shaking" tabindex="-1"><a class="header-anchor" href="#_7-更强大的tree-shaking"><span>7.更强大的tree-shaking</span></a></h2><ul><li>[tree-shaking](https://webpack.js.org/guides/tree-shaking/</li><li>webpack4 本身的 tree shaking 比较简单，主要是找一个 import 进来的变量是否在这个模块内出现过，非常简单粗暴</li></ul><p><img src="https://img.zhufengpeixun.com/1608717220311" alt="1608717220311"></p><h3 id="_7-1-原理" tabindex="-1"><a class="header-anchor" href="#_7-1-原理"><span>7.1 原理</span></a></h3><ul><li>webpack从入口遍历所有模块的形成依赖图,webpack知道那些导出被使用</li><li>遍历所有的作用域并将其进行分析，消除未使用的范围和模块的方法</li><li><a href="https://diverse.space/webpack-deep-scope-demo/" target="_blank" rel="noopener noreferrer">webpack-deep-scope-demo</a></li><li><a href="https://github.com/vincentdchan/webpack-deep-scope-analysis-plugin" target="_blank" rel="noopener noreferrer">webpack-deep-scope-analysis-plugin</a></li></ul><p><img src="https://img.zhufengpeixun.com/1608717379363" alt="1608717379363"></p><h4 id="_7-1-1-作用域" tabindex="-1"><a class="header-anchor" href="#_7-1-1-作用域"><span>7.1.1 作用域</span></a></h4><ul><li>而对于一个模块来说，只有 <code>class</code> 和 <code>function</code> 的作用域是可以导出到其他模块的</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token comment">// module scope start</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// Block</span></span>
<span class="line"></span>
<span class="line">    <span class="token punctuation">{</span> <span class="token comment">// &lt;- scope start</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token comment">// &lt;- scope end</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// Class</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token punctuation">{</span> <span class="token comment">// &lt;- scope start</span></span>
<span class="line">        <span class="token comment">//   |       </span></span>
<span class="line">    <span class="token punctuation">}</span>       <span class="token comment">// &lt;- scope end</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// If else</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// &lt;- scope start</span></span>
<span class="line"></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token comment">/* &lt;- scope end */</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// &lt;- scope start</span></span>
<span class="line"></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token comment">// &lt;- scope end</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// For</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// &lt;- scope start</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token comment">// &lt;- scope end</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// Catch</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// &lt;- scope start</span></span>
<span class="line"></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token comment">// &lt;- scope end</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// Function</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// &lt;- scope start</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token comment">// &lt;- scope end</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// Scope</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">switch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// &lt;- scope start</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token comment">// &lt;- scope end</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// module scope end</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-1-2-工作过程" tabindex="-1"><a class="header-anchor" href="#_7-1-2-工作过程"><span>7.1.2 工作过程</span></a></h4><p><img src="https://img.zhufengpeixun.com/1608717689228" alt="1608717689228"></p><h3 id="_7-2-开启" tabindex="-1"><a class="header-anchor" href="#_7-2-开启"><span>7.2 开启</span></a></h3><h4 id="_7-2-1-开发环境" tabindex="-1"><a class="header-anchor" href="#_7-2-1-开发环境"><span>7.2.1 开发环境</span></a></h4><p>webpack.config.js</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&#39;./src/index.js&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;bundle.js&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;dist&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;development&#39;</span><span class="token punctuation">,</span></span>
<span class="line">   <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">   <span class="token literal-property property">usedExports</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-2-2-生产环境" tabindex="-1"><a class="header-anchor" href="#_7-2-2-生产环境"><span>7.2.2 生产环境</span></a></h4><ul><li>生产环境默认开启</li></ul><h4 id="_7-2-3-sideeffects" tabindex="-1"><a class="header-anchor" href="#_7-2-3-sideeffects"><span>7.2.3 sideEffects</span></a></h4><ul><li><code>&quot;sideEffects&quot;: false</code>,意思就是对所有的模块都进行<code>Tree Shaking</code></li><li>也就是将没有引入的方法等不进行打包到打包输出文件中</li></ul><p>package.json</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token punctuation">{</span><span class="token string-property property">&quot;sideEffects&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@babel/polyfill&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token string-property property">&quot;sideEffects&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;*.css&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-3-嵌套的-tree-shaking" tabindex="-1"><a class="header-anchor" href="#_7-3-嵌套的-tree-shaking"><span>7.3 嵌套的 tree-shaking</span></a></h3><ul><li>webpack 现在能够跟踪对导出的嵌套属性的访问</li><li>这可以改善重新导出命名空间对象时的Tree Shaking(清除未使用的导出和混淆导出)</li></ul><h4 id="_7-3-1-src-index-js" tabindex="-1"><a class="header-anchor" href="#_7-3-1-src-index-js"><span>7.3.1 src\\index.js</span></a></h4><p>src\\index.js</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> calculator <span class="token keyword">from</span> <span class="token string">&quot;./calculator&quot;</span><span class="token punctuation">;</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>calculator<span class="token punctuation">.</span>operators<span class="token punctuation">.</span>add<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-3-2-src-calculator-js" tabindex="-1"><a class="header-anchor" href="#_7-3-2-src-calculator-js"><span>7.3.2 src\\calculator.js</span></a></h4><p>src\\calculator.js</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> operators <span class="token keyword">from</span> <span class="token string">&quot;./operators&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token punctuation">{</span> operators <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-3-3-src-operators-js" tabindex="-1"><a class="header-anchor" href="#_7-3-3-src-operators-js"><span>7.3.3 src\\operators.js</span></a></h4><p>src\\operators.js</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> add <span class="token operator">=</span> <span class="token string">&#39;add&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> minus <span class="token operator">=</span> <span class="token string">&#39;minus&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-3-4-webpack-config-js" tabindex="-1"><a class="header-anchor" href="#_7-3-4-webpack-config-js"><span>7.3.4 webpack.config.js</span></a></h4><p>webpack.config.js</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;production&#39;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-4-内部模块-tree-shaking" tabindex="-1"><a class="header-anchor" href="#_7-4-内部模块-tree-shaking"><span>7.4 内部模块 tree-shaking</span></a></h3><ul><li>webpack 4 没有分析模块的导出和引用之间的依赖关系</li><li>webpack 5 可以对模块中的标志进行分析，找出导出和引用之间的依赖关系</li></ul><h4 id="_7-4-1-src-index-js" tabindex="-1"><a class="header-anchor" href="#_7-4-1-src-index-js"><span>7.4.1 src\\index.js</span></a></h4><p>src\\index.js</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> getPostUrl <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./api&#39;</span><span class="token punctuation">;</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;getPostUrl&#39;</span><span class="token punctuation">,</span>getPostUrl<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-4-2-src-api-js" tabindex="-1"><a class="header-anchor" href="#_7-4-2-src-api-js"><span>7.4.2 src\\api.js</span></a></h4><p>src\\api.js</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> host <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./constants&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">useHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> host<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getUserUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token function">useHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&#39;/user&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getPostUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token string">&#39;/post&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-4-3-src-api-js" tabindex="-1"><a class="header-anchor" href="#_7-4-3-src-api-js"><span>7.4.3 src\\api.js</span></a></h4><p>src\\api.js</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> host <span class="token operator">=</span> <span class="token string">&#39;http://localhost&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_7-5-commonjs-tree-shaking" tabindex="-1"><a class="header-anchor" href="#_7-5-commonjs-tree-shaking"><span>7.5 CommonJs Tree Shaking</span></a></h3><ul><li><p>webpack 曾经不进行对 <code>CommonJS</code> 导出和 <code>require()</code>调用时的导出使用分析</p></li><li><p>webpack 5 增加了对一些 <code>CommonJS</code> 构造的支持，允许消除未使用的 CommonJs 导出，并从 require() 调用中跟踪引用的导出名称 支持以下构造：</p></li><li><p>exports|this|module.exports.xxx = ...</p></li><li><p>exports|this|module.exports = require(&quot;...&quot;) (reexport)</p></li><li><p>exports|this|module.exports.xxx = require(&quot;...&quot;).xxx (reexport)</p></li><li><p>Object.defineProperty(exports|this|module.exports, &quot;xxx&quot;, ...)</p></li><li><p>require(&quot;abc&quot;).xxx</p></li><li><p>require(&quot;abc&quot;).xxx()</p></li></ul><h4 id="_7-5-1-src-index-js" tabindex="-1"><a class="header-anchor" href="#_7-5-1-src-index-js"><span>7.5.1 src\\index.js</span></a></h4><p>src\\index.js</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">let</span> api <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./api&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>getPostUrl<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-5-2-src-api-js" tabindex="-1"><a class="header-anchor" href="#_7-5-2-src-api-js"><span>7.5.2 src\\api.js</span></a></h4><p>src\\api.js</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">function</span> <span class="token function">getUserUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token string">&#39;/user&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">getPostUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token string">&#39;/post&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">exports<span class="token punctuation">.</span>getPostUrl<span class="token operator">=</span>getPostUrl<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_8-splitchunks" tabindex="-1"><a class="header-anchor" href="#_8-splitchunks"><span>8.splitChunks</span></a></h2><ul><li>[split-chunks-plugin](https://webpack.js.org/plugins/split-chunks-plugin/</li></ul><h2 id="参考" tabindex="-1"><a class="header-anchor" href="#参考"><span>参考</span></a></h2><ul><li><a href="https://github.com/webpack/changelog-v5/blob/master/README.md" target="_blank" rel="noopener noreferrer">changelog-v5</a></li></ul>`,104)])])}const o=n(l,[["render",t]]),r=JSON.parse('{"path":"/strong/103.11.webpack5.html","title":"","lang":"en-US","frontmatter":{},"git":{"updatedTime":1681290319000,"contributors":[{"name":"yutao","username":"yutao","email":"642231346@qq.com","commits":1,"url":"https://github.com/yutao"}],"changelog":[{"hash":"f5ab8c9d34991ec274f7f652439afe5b2afb6147","time":1681290319000,"email":"642231346@qq.com","author":"yutao","message":"modify"}]},"filePathRelative":"strong/103.11.webpack5.md"}');export{o as comp,r as data};
