import{_ as s,c as a,a as t,o as e}from"./app-CD1YpnS1.js";const p={};function l(c,n){return e(),a("div",null,[...n[0]||(n[0]=[t(`<h2 id="_1-数据库能够做什么" tabindex="-1"><a class="header-anchor" href="#_1-数据库能够做什么"><span>1. 数据库能够做什么</span></a></h2><ul><li>存储大量数据，方便检索和访问</li><li>保持数据信息的一致、完整</li><li>共享和安全</li><li>通过组合分析，产生新的有用信息</li></ul><h2 id="_2-数据库的基本概念" tabindex="-1"><a class="header-anchor" href="#_2-数据库的基本概念"><span>2. 数据库的基本概念</span></a></h2><h3 id="_2-1-实体" tabindex="-1"><a class="header-anchor" href="#_2-1-实体"><span>2.1 实体</span></a></h3><p>只要是在客观世界存在的、可以被描述出来的都是实体</p><h3 id="_2-2-数据库-db" tabindex="-1"><a class="header-anchor" href="#_2-2-数据库-db"><span>2.2 数据库(DB)</span></a></h3><ul><li>数据库就是数据的仓库，可以存放结构化的数据</li></ul><h3 id="_2-3-数据库管理系统-dbms" tabindex="-1"><a class="header-anchor" href="#_2-3-数据库管理系统-dbms"><span>2.3 数据库管理系统(DBMS)</span></a></h3><p>是一种系统软件，提供操作数据库的环境，可以通过数据库管理系统对数据进行插入、修改、删除和查询等操作。</p><h3 id="_2-4-sql" tabindex="-1"><a class="header-anchor" href="#_2-4-sql"><span>2.4 SQL</span></a></h3><p>结构化查询语言 专门用来和数据库进行交流的语言,几乎所有的DBMS都支持SQL</p><p><img src="http://img.zhufengpeixun.cn/dbmspng.png" alt="dbms"></p><h3 id="_2-5-sql规范" tabindex="-1"><a class="header-anchor" href="#_2-5-sql规范"><span>2.5 SQL规范</span></a></h3><ol><li>SQL语句不区分大小写，建议SQL关键字大写，表名和列表小写</li><li>命令用分号结尾</li><li>命令可以缩进和换行，一种类型的关键字放在一行</li><li>可以写单行和多行注释 ,</li></ol><h2 id="_3-数据表" tabindex="-1"><a class="header-anchor" href="#_3-数据表"><span>3. 数据表</span></a></h2><ul><li>表是数据库中包含所有数据的数据库对象，也是其它对象的基础。</li><li>表定义是一个列的集合，数据在表中是按行和列的格式组织的，用来存放数据</li><li>行也称为记录用来存放一个个实体，列称为字段用来描述实体的某一个属性 学生管理系统</li></ul><p><img src="http://img.zhufengpeixun.cn/table.png" alt="table"></p><h2 id="_4-mysql简介" tabindex="-1"><a class="header-anchor" href="#_4-mysql简介"><span>4.MYSQL简介</span></a></h2><h3 id="_4-1-mysql特点" tabindex="-1"><a class="header-anchor" href="#_4-1-mysql特点"><span>4.1 MYSQL特点</span></a></h3><ul><li>开源免费</li><li>性能高</li><li>安装使用都简单</li></ul><h3 id="_4-2-mysql安装" tabindex="-1"><a class="header-anchor" href="#_4-2-mysql安装"><span>4.2 MYSQL安装</span></a></h3><ul><li><a href="https://dev.mysql.com/downloads/mysql/5.5.html" target="_blank" rel="noopener noreferrer">mysql下载</a></li><li>安装MYSQL</li></ul><h3 id="_4-3-mysql配置" tabindex="-1"><a class="header-anchor" href="#_4-3-mysql配置"><span>4.3 MYSQL配置</span></a></h3><p>C:\\Program Files\\MySQL\\MySQL Server 5.5\\my.ini</p><ul><li>port 端口号</li><li>basedir 安装目录</li><li>datadir 数据存放访目录</li><li>character_set_server 字符集</li><li>default-storage-engine 存储引擎</li><li>sql-mode 语法模式</li><li>max-connections 最大连接数</li></ul><h3 id="_4-4-mysql启动和停止" tabindex="-1"><a class="header-anchor" href="#_4-4-mysql启动和停止"><span>4.4 MYSQL启动和停止</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">net start MySQL</span>
<span class="line">net stop MySQL</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-5-通过命令行连接mysql" tabindex="-1"><a class="header-anchor" href="#_4-5-通过命令行连接mysql"><span>4.5 通过命令行连接MYSQL</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">mysql <span class="token operator">-</span>h <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span> <span class="token operator">-</span><span class="token constant">P</span> <span class="token number">3306</span> <span class="token operator">-</span>uroot <span class="token operator">-</span>p123456</span>
<span class="line">exit</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-6-切换数据库" tabindex="-1"><a class="header-anchor" href="#_4-6-切换数据库"><span>4.6 切换数据库</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">use test;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_4-7-显示有哪些表" tabindex="-1"><a class="header-anchor" href="#_4-7-显示有哪些表"><span>4.7 显示有哪些表</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">show tables<span class="token punctuation">;</span></span>
<span class="line">show tables from mysql<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-8-显示当前数据库" tabindex="-1"><a class="header-anchor" href="#_4-8-显示当前数据库"><span>4.8 显示当前数据库</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">select database();</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_4-9-查询表结构" tabindex="-1"><a class="header-anchor" href="#_4-9-查询表结构"><span>4.9 查询表结构</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">DESC user;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_5-创建表" tabindex="-1"><a class="header-anchor" href="#_5-创建表"><span>5. 创建表</span></a></h2><p><img src="http://img.zhufengpeixun.cn/students.png" alt="student"> <img src="http://img.zhufengpeixun.cn/course.png" alt="course"> <img src="http://img.zhufengpeixun.cn/score.png" alt="score"></p><h2 id="_6-数据完整性" tabindex="-1"><a class="header-anchor" href="#_6-数据完整性"><span>6. 数据完整性</span></a></h2><ul><li>为了实现数据完整性，需要检验数据库表中的每行和每列数据是否符合要求</li><li>在创建表的时候，应该保证以后的数据输入是正确的，错误的数据不允许输入</li></ul><h3 id="_6-1-域完整性" tabindex="-1"><a class="header-anchor" href="#_6-1-域完整性"><span>6.1 域完整性</span></a></h3><p>不同的字段需要设置为各种合适的类型，比如年龄就是整数类型</p><p><img src="http://img.zhufengpeixun.cn/datatype.jpg" alt="datatype"></p><p><img src="http://img.zhufengpeixun.cn/mysqlint.jpg" alt="mysqlint"></p><p><img src="http://img.zhufengpeixun.cn/mysqlnumber.jpg" alt="mysqlnumber"></p><h3 id="_6-2-默认值" tabindex="-1"><a class="header-anchor" href="#_6-2-默认值"><span>6.2 默认值</span></a></h3><p>默认值是指如果用户没有指定值的情况下会记录的此字段指定一个提供一个预先设定的值</p><blockquote><p>可以把居住地默认值设置为北京</p></blockquote><h3 id="_6-3-非空约束" tabindex="-1"><a class="header-anchor" href="#_6-3-非空约束"><span>6.3 非空约束</span></a></h3><p>我们可以指定某个字段不能不输入，必须提供一个非空的值</p><blockquote><p>姓名字段不能为空</p></blockquote><h2 id="_7-实体完整性" tabindex="-1"><a class="header-anchor" href="#_7-实体完整性"><span>7.实体完整性</span></a></h2><h3 id="_7-1-主键约束" tabindex="-1"><a class="header-anchor" href="#_7-1-主键约束"><span>7.1 主键约束</span></a></h3><ul><li>表中一列或者几列组合的值能用来唯一标识表中的每一行，这样的列或者列组合称为表的主键，主键表的数据不同重复。</li><li>如果两列或者多列组合起来唯一标识表中的每一行，则该主键又称为&quot;组合键&quot;</li></ul><p><strong>主键的选择标准</strong></p><ol><li>最少性 尽量选择单个键作为主键</li><li>稳定性 ，由于主键是用来在两个表间建立联接的，所以不能经常更新，最好就不更新</li></ol><h3 id="_7-2-外键" tabindex="-1"><a class="header-anchor" href="#_7-2-外键"><span>7.2 外键</span></a></h3><p>成绩表中的学生ID应该在学生表中是存在的 我们应该让成绩表中的ID只能引用学生表中的ID，它们的值应该是一一对应的，也就是说成绩表中的ID是成绩表中的外键，对应学生表的主键 ，这样就可以保证数据的引用完整性</p><h3 id="_7-3-唯一约束" tabindex="-1"><a class="header-anchor" href="#_7-3-唯一约束"><span>7.3 唯一约束</span></a></h3><p>唯一约束是指某个字段值是唯一的，在所有的记录中不能有重复的值.</p><blockquote><p>学生的身份证号可以设置为唯一约束</p></blockquote><h3 id="_7-4-标识列" tabindex="-1"><a class="header-anchor" href="#_7-4-标识列"><span>7.4 标识列</span></a></h3><ul><li>当表中没有合适的列作为主键时可以考虑增加标识列，标识列是一个无实际业务含义的列，仅仅用来区分每条记录。</li><li>标识列的值是自动生成的，不能在该列上输入数据</li></ul><h3 id="_7-5-外键约束" tabindex="-1"><a class="header-anchor" href="#_7-5-外键约束"><span>7.5 外键约束</span></a></h3><p>一个表的外键必须引用另一个表的主键,比如成绩表中的学生ID会引用学生表的主键，课程ID会引用成绩表的主键</p><ul><li>主表没有记录，子表中不能添加相应的记录</li><li>修改和删除主表记录不能让子表记录孤立，必须相应修改和删除</li></ul><h2 id="_8-数据操作" tabindex="-1"><a class="header-anchor" href="#_8-数据操作"><span>8. 数据操作</span></a></h2><h3 id="_8-1-创建学生表" tabindex="-1"><a class="header-anchor" href="#_8-1-创建学生表"><span>8.1 创建学生表</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">CREATE</span> <span class="token constant">TABLE</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">student</span><span class="token template-punctuation string">\`</span></span> <span class="token punctuation">(</span></span>
<span class="line"><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">id</span><span class="token template-punctuation string">\`</span></span>  <span class="token function">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token constant">NOT</span> <span class="token constant">NULL</span> <span class="token constant">PRIMARY</span> <span class="token constant">KEY</span> <span class="token constant">AUTO_INCREMENT</span>   <span class="token punctuation">,</span></span>
<span class="line"><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">name</span><span class="token template-punctuation string">\`</span></span>  <span class="token function">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token constant">NOT</span> <span class="token constant">NULL</span> <span class="token punctuation">,</span></span>
<span class="line"><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">age</span><span class="token template-punctuation string">\`</span></span>  <span class="token function">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token constant">NULL</span> <span class="token constant">DEFAULT</span> <span class="token constant">NULL</span> <span class="token punctuation">,</span></span>
<span class="line"><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">city</span><span class="token template-punctuation string">\`</span></span>  <span class="token function">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token constant">DEFAULT</span> <span class="token string">&#39;北京&#39;</span> <span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8-2-增加身份证号字段" tabindex="-1"><a class="header-anchor" href="#_8-2-增加身份证号字段"><span>8.2 增加身份证号字段</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">ALTER</span> <span class="token constant">TABLE</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">student</span><span class="token template-punctuation string">\`</span></span> <span class="token constant">ADD</span> <span class="token constant">COLUMN</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">idcard</span><span class="token template-punctuation string">\`</span></span>  <span class="token function">varchar</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span> <span class="token constant">NULL</span> <span class="token constant">AFTER</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">city</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span> <span class="token operator">--</span>增加身份证字段</span>
<span class="line"><span class="token constant">ALTER</span> <span class="token constant">TABLE</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">student</span><span class="token template-punctuation string">\`</span></span> <span class="token constant">MODIFY</span> <span class="token constant">COLUMN</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">idcard</span><span class="token template-punctuation string">\`</span></span>  <span class="token function">varchar</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span> <span class="token constant">DEFAULT</span> <span class="token constant">NULL</span> <span class="token constant">AFTER</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">name</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span> <span class="token operator">--</span>修改身份证字段</span>
<span class="line"><span class="token constant">ALTER</span> <span class="token constant">TABLE</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">student</span><span class="token template-punctuation string">\`</span></span><span class="token constant">DROP</span> <span class="token constant">COLUMN</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">idcard</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span> <span class="token operator">--</span>删除身份证字段</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8-3-添加约束" tabindex="-1"><a class="header-anchor" href="#_8-3-添加约束"><span>8.3 添加约束</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token operator">--</span> 主键约束</span>
<span class="line"><span class="token constant">ALTER</span> <span class="token constant">TABLE</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">student</span><span class="token template-punctuation string">\`</span></span> <span class="token constant">ADD</span> <span class="token constant">PRIMARY</span> <span class="token constant">KEY</span> <span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">id</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token operator">--</span> 唯一约束</span>
<span class="line"><span class="token constant">ALTER</span> <span class="token constant">TABLE</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">student</span><span class="token template-punctuation string">\`</span></span> <span class="token constant">ADD</span> <span class="token constant">UNIQUE</span> <span class="token constant">INDEX</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">uq_idcard</span><span class="token template-punctuation string">\`</span></span> <span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">idcard</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span> <span class="token punctuation">;</span></span>
<span class="line"><span class="token operator">--</span> 默认约束</span>
<span class="line"><span class="token constant">ALTER</span> <span class="token constant">TABLE</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">student</span><span class="token template-punctuation string">\`</span></span> <span class="token constant">MODIFY</span> <span class="token constant">COLUMN</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">city</span><span class="token template-punctuation string">\`</span></span>  <span class="token function">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>  <span class="token constant">DEFAULT</span> <span class="token string">&#39;北京&#39;</span> <span class="token constant">AFTER</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">age</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token operator">--</span> 外键约束</span>
<span class="line"><span class="token constant">ALTER</span> <span class="token constant">TABLE</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">score</span><span class="token template-punctuation string">\`</span></span> <span class="token constant">ADD</span> <span class="token constant">CONSTRAINT</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">fk_stuid</span><span class="token template-punctuation string">\`</span></span> <span class="token constant">FOREIGN</span> <span class="token constant">KEY</span> <span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">student_id</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span> <span class="token constant">REFERENCES</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">student</span><span class="token template-punctuation string">\`</span></span> <span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">id</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token operator">--</span> 删除约束</span>
<span class="line"><span class="token constant">ALTER</span> <span class="token constant">TABLE</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">score</span><span class="token template-punctuation string">\`</span></span> <span class="token constant">DROP</span> <span class="token constant">FOREIGN</span> <span class="token constant">KEY</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">fk_stuid</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8-4-准备数据" tabindex="-1"><a class="header-anchor" href="#_8-4-准备数据"><span>8.4 准备数据</span></a></h3><p><img src="http://img.zhufengpeixun.cn/relations.png" alt="relations"></p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">CREATE</span> <span class="token constant">TABLE</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">student</span><span class="token template-punctuation string">\`</span></span> <span class="token punctuation">(</span></span>
<span class="line">  <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">id</span><span class="token template-punctuation string">\`</span></span> <span class="token function">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token constant">NOT</span> <span class="token constant">NULL</span> <span class="token constant">AUTO_INCREMENT</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">name</span><span class="token template-punctuation string">\`</span></span> <span class="token function">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token constant">NOT</span> <span class="token constant">NULL</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">idcard</span><span class="token template-punctuation string">\`</span></span> <span class="token function">varchar</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span> <span class="token constant">DEFAULT</span> <span class="token constant">NULL</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">age</span><span class="token template-punctuation string">\`</span></span> <span class="token function">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token constant">DEFAULT</span> <span class="token constant">NULL</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">city</span><span class="token template-punctuation string">\`</span></span> <span class="token function">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token constant">DEFAULT</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token constant">PRIMARY</span> <span class="token constant">KEY</span> <span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">id</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token constant">CREATE</span> <span class="token constant">TABLE</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">course</span><span class="token template-punctuation string">\`</span></span> <span class="token punctuation">(</span></span>
<span class="line">  <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">id</span><span class="token template-punctuation string">\`</span></span> <span class="token function">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token constant">NOT</span> <span class="token constant">NULL</span> <span class="token constant">AUTO_INCREMENT</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">name</span><span class="token template-punctuation string">\`</span></span> <span class="token function">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token constant">DEFAULT</span> <span class="token constant">NULL</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token constant">PRIMARY</span> <span class="token constant">KEY</span> <span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">id</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token constant">CREATE</span> <span class="token constant">TABLE</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">score</span><span class="token template-punctuation string">\`</span></span> <span class="token punctuation">(</span></span>
<span class="line">  <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">student_id</span><span class="token template-punctuation string">\`</span></span> <span class="token function">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token constant">NOT</span> <span class="token constant">NULL</span> <span class="token constant">DEFAULT</span> <span class="token string">&#39;0&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">course_id</span><span class="token template-punctuation string">\`</span></span> <span class="token function">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token constant">NOT</span> <span class="token constant">NULL</span> <span class="token constant">DEFAULT</span> <span class="token string">&#39;0&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">grade</span><span class="token template-punctuation string">\`</span></span> float <span class="token constant">DEFAULT</span> <span class="token constant">NULL</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token constant">PRIMARY</span> <span class="token constant">KEY</span> <span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">student_id</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">course_id</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token constant">KEY</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">fk_courseid</span><span class="token template-punctuation string">\`</span></span> <span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">course_id</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token constant">CONSTRAINT</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">fk_courseid</span><span class="token template-punctuation string">\`</span></span> <span class="token constant">FOREIGN</span> <span class="token constant">KEY</span> <span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">course_id</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span> <span class="token constant">REFERENCES</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">course</span><span class="token template-punctuation string">\`</span></span> <span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">id</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token constant">CONSTRAINT</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">fk_stuid</span><span class="token template-punctuation string">\`</span></span> <span class="token constant">FOREIGN</span> <span class="token constant">KEY</span> <span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">student_id</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span> <span class="token constant">REFERENCES</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">student</span><span class="token template-punctuation string">\`</span></span> <span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">id</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span> <span class="token constant">ENGINE</span><span class="token operator">=</span>InnoDB <span class="token constant">DEFAULT</span> <span class="token constant">CHARSET</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_9-sql" tabindex="-1"><a class="header-anchor" href="#_9-sql"><span>9. SQL</span></a></h2><h3 id="_9-1-sql是什么" tabindex="-1"><a class="header-anchor" href="#_9-1-sql是什么"><span>9.1 SQL是什么</span></a></h3><p>Structured Query Language：结构化查询语言</p><h3 id="_9-2-为什么要用sql" tabindex="-1"><a class="header-anchor" href="#_9-2-为什么要用sql"><span>9.2 为什么要用SQL</span></a></h3><ol><li>使用界面操作数据库不方便</li><li>我们需要通过应用程序去操作数据库</li></ol><h3 id="_9-3-sql组成" tabindex="-1"><a class="header-anchor" href="#_9-3-sql组成"><span>9.3 SQL组成</span></a></h3><h4 id="_9-3-1-ddl-data-definition-language-是数据定义语言" tabindex="-1"><a class="header-anchor" href="#_9-3-1-ddl-data-definition-language-是数据定义语言"><span>9.3.1 DDL（data definition language）是数据定义语言</span></a></h4><p>主要的命令有<code>CREATE</code>、<code>ALTER</code>、<code>DROP</code>等，<strong>DDL</strong>主要是用在定义或改变表（TABLE）的结构，数据类型，表之间的链接和约束等初始化工作上，他们大多在建立表时使用</p><h4 id="_9-3-2-dml-data-manipulation-language-是数据操纵语言" tabindex="-1"><a class="header-anchor" href="#_9-3-2-dml-data-manipulation-language-是数据操纵语言"><span>9.3.2 DML（data manipulation language）是数据操纵语言</span></a></h4><p>它们是<code>SELECT</code>、<code>UPDATE、</code>INSERT<code>、</code>DELETE\`，就象它的名字一样，这4条命令是用来对数据库里的数据进行操作的语言</p><h4 id="_9-3-3-dcl-datacontrollanguage-是数据库控制语言" tabindex="-1"><a class="header-anchor" href="#_9-3-3-dcl-datacontrollanguage-是数据库控制语言"><span>9.3.3 DCL（DataControlLanguage）是数据库控制语言</span></a></h4><p>是用来设置或更改数据库用户或角色权限的语句，包括（<code>grant</code>,<code>revoke</code>等）语句</p><h3 id="_9-4-sql运算符" tabindex="-1"><a class="header-anchor" href="#_9-4-sql运算符"><span>9.4 SQL运算符</span></a></h3><p>是一种符号，它是用来进行列间或者变量之间的比较和数学运算的</p><h3 id="_9-4-1-算术运算符" tabindex="-1"><a class="header-anchor" href="#_9-4-1-算术运算符"><span>9.4.1 算术运算符</span></a></h3><table><thead><tr><th style="text-align:left;">运算符</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">+</td><td style="text-align:left;">加运算，求两个数或表达式相加的和，如1+1</td></tr><tr><td style="text-align:left;">-</td><td style="text-align:left;">减少减运算，求两个数或表达式相减的差，如4-1</td></tr><tr><td style="text-align:left;">*</td><td style="text-align:left;">乘运算，求两个数或表达式相乘的积，如2*2</td></tr><tr><td style="text-align:left;">/</td><td style="text-align:left;">除运算，求两个数或表达式相除的商，如6/4的值为1</td></tr><tr><td style="text-align:left;">%</td><td style="text-align:left;">取模运算，求两个数或表达式相除的余数，如：6%4的值为2</td></tr></tbody></table><ul><li>查询姓名全称</li></ul><h3 id="_9-4-2-逻辑运算符" tabindex="-1"><a class="header-anchor" href="#_9-4-2-逻辑运算符"><span>9.4.2 逻辑运算符</span></a></h3><table><thead><tr><th style="text-align:left;">运算符</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">AND</td><td style="text-align:left;">当且仅当两个布尔表达式都为true时，返回TRUE</td></tr><tr><td style="text-align:left;">OR</td><td style="text-align:left;">当且仅当两个布尔表达式都为false，返回FALSE</td></tr><tr><td style="text-align:left;">NOT</td><td style="text-align:left;">布尔表达式的值取反</td></tr></tbody></table><h3 id="_9-4-3-比较运算符" tabindex="-1"><a class="header-anchor" href="#_9-4-3-比较运算符"><span>9.4.3 比较运算符</span></a></h3><table><thead><tr><th style="text-align:left;">运算符</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">=</td><td style="text-align:left;">等于</td></tr><tr><td style="text-align:left;">&gt;</td><td style="text-align:left;">大于</td></tr><tr><td style="text-align:left;">&lt;</td><td style="text-align:left;">小于</td></tr><tr><td style="text-align:left;">&lt;&gt;</td><td style="text-align:left;">不等于</td></tr><tr><td style="text-align:left;">&gt;=</td><td style="text-align:left;">大于等于</td></tr><tr><td style="text-align:left;">&lt;=</td><td style="text-align:left;">小于等于</td></tr><tr><td style="text-align:left;">!=</td><td style="text-align:left;">不等于</td></tr></tbody></table><h2 id="_9-5-查询窗口" tabindex="-1"><a class="header-anchor" href="#_9-5-查询窗口"><span>9.5 查询窗口</span></a></h2><p><img src="http://img.zhufengpeixun.cn/query.png" alt="query"></p><h2 id="_9-6-数据操作语言" tabindex="-1"><a class="header-anchor" href="#_9-6-数据操作语言"><span>9.6 数据操作语言</span></a></h2><h3 id="_9-6-1-插入数据行" tabindex="-1"><a class="header-anchor" href="#_9-6-1-插入数据行"><span>9.6.1 插入数据行</span></a></h3><h4 id="_9-6-1-1-语法" tabindex="-1"><a class="header-anchor" href="#_9-6-1-1-语法"><span>9.6.1.1 语法</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"> <span class="token constant">INSERT</span>  <span class="token punctuation">[</span><span class="token constant">INTO</span><span class="token punctuation">]</span>  表名  <span class="token punctuation">[</span><span class="token punctuation">(</span>列名<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token constant">VALUES</span>  <span class="token punctuation">(</span>值列表<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_9-6-1-2-插入记录" tabindex="-1"><a class="header-anchor" href="#_9-6-1-2-插入记录"><span>9.6.1.2 插入记录</span></a></h4><p>向学生表插入一条记录, 姓名张三,身份证号123456,年龄30,城市北京</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">INSERT</span> <span class="token constant">INTO</span> <span class="token punctuation">[</span>school<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">[</span>student<span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">(</span>name<span class="token punctuation">,</span>idcard<span class="token punctuation">,</span>age<span class="token punctuation">,</span>city<span class="token punctuation">)</span></span>
<span class="line"><span class="token constant">VALUES</span></span>
<span class="line"><span class="token punctuation">(</span><span class="token string">&#39;张三&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;123456&#39;</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token string">&#39;北京&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_9-6-1-3-注意事项" tabindex="-1"><a class="header-anchor" href="#_9-6-1-3-注意事项"><span>9.6.1.3 注意事项</span></a></h4><ul><li>每次插入一行数据，不能只插入一部分数据，插入的数据是否有效将按照整行的完整性要求来检验</li><li>每个数据值的数据类型、精度、位数必须与要应的列名精确匹配</li><li>不能为标识符指定值</li><li>如果某字段设置为不能为空，则必须插入数据</li><li>插入数据时还要符合检查性约束的要求</li><li>有缺省值的列，可以使用DEFAULT关键字来代替插入实际的值</li></ul><h3 id="_9-6-2-更新数据行" tabindex="-1"><a class="header-anchor" href="#_9-6-2-更新数据行"><span>9.6.2 更新数据行</span></a></h3><h4 id="_9-6-2-1-语法" tabindex="-1"><a class="header-anchor" href="#_9-6-2-1-语法"><span>9.6.2.1 语法</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">UPDATE</span> 表名 <span class="token constant">SET</span> 列名 <span class="token operator">=</span> 更新值 <span class="token punctuation">[</span><span class="token constant">WHERE</span> 更新条件<span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_9-6-2-2-更新记录" tabindex="-1"><a class="header-anchor" href="#_9-6-2-2-更新记录"><span>9.6.2.2 更新记录</span></a></h4><ul><li>更新ID等于7的学生年龄改为40，城市改为上海<div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">UPDATE</span> <span class="token punctuation">[</span>school<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">[</span>student<span class="token punctuation">]</span></span>
<span class="line"> <span class="token constant">SET</span> age <span class="token operator">=</span> <span class="token number">40</span><span class="token punctuation">,</span>city <span class="token operator">=</span> <span class="token string">&#39;上海&#39;</span></span>
<span class="line"><span class="token constant">WHERE</span> id<span class="token operator">=</span><span class="token number">7</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h4 id="_9-6-2-3-注意" tabindex="-1"><a class="header-anchor" href="#_9-6-2-3-注意"><span>9.6.2.3 注意</span></a></h4><ul><li>多列时用逗号隔开，一定要加更新条件以免错误更新</li><li>多个联合条件使用 AND <code>id=7 and idcard=&#39;410787&#39;</code></li><li>判断某字段是否为空 <code>email is null or email = &#39;&#39;</code></li></ul><h3 id="_9-6-3-删除数据" tabindex="-1"><a class="header-anchor" href="#_9-6-3-删除数据"><span>9.6.3 删除数据</span></a></h3><h4 id="_9-6-3-1-语法" tabindex="-1"><a class="header-anchor" href="#_9-6-3-1-语法"><span>9.6.3.1 语法</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">DELETE</span> <span class="token punctuation">[</span><span class="token constant">FROM</span><span class="token punctuation">]</span>  表名 <span class="token punctuation">[</span><span class="token constant">WHERE</span> <span class="token operator">&lt;</span>删除条件<span class="token operator">&gt;</span><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_9-6-3-2-删除记录" tabindex="-1"><a class="header-anchor" href="#_9-6-3-2-删除记录"><span>9.6.3.2 删除记录</span></a></h4><ul><li>删除ID=7的学生记录<div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">DELETE</span> <span class="token constant">FROM</span> <span class="token punctuation">[</span>school<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">[</span>student<span class="token punctuation">]</span> <span class="token constant">WHERE</span> id<span class="token operator">=</span><span class="token number">7</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ul><h4 id="_9-6-3-3-注意" tabindex="-1"><a class="header-anchor" href="#_9-6-3-3-注意"><span>9.6.3.3 注意</span></a></h4><ul><li>Delete语句是对整行进行操作，因此不需要提供列名</li><li>如果要删除主表数据，则要先删除子表记录</li></ul><h3 id="_9-6-4-truncate-截断表" tabindex="-1"><a class="header-anchor" href="#_9-6-4-truncate-截断表"><span>9.6.4 TRUNCATE 截断表</span></a></h3><p>截断整个表中的数据</p><h4 id="_9-6-4-1-语法" tabindex="-1"><a class="header-anchor" href="#_9-6-4-1-语法"><span>9.6.4.1 语法</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">TRUNCATE</span>  <span class="token constant">TABLE</span>  表名</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_9-6-4-2-截断学生表" tabindex="-1"><a class="header-anchor" href="#_9-6-4-2-截断学生表"><span>9.6.4.2 截断学生表</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">TRUNCATE</span> <span class="token constant">TABLE</span> student</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>数据全部清空,但表结构、列、约束等不被改动 不能用于有外键约束引用的表 标识列重新开始编号 因为要删除的数据不会写入日志，数据也不能恢复，所以工作中请尽量不要使用此命令</p></blockquote><h2 id="_9-7-数据查询" tabindex="-1"><a class="header-anchor" href="#_9-7-数据查询"><span>9.7 数据查询</span></a></h2><ul><li>查询就是从客户端 发出查询请求数据库服务器，并从数据库返回查询结果的过程</li><li>每次执行查询只是从数据表中提取数据，并按表的方式呈现出来</li><li>查询产生的是虚拟表,并不会保存起来</li></ul><h3 id="_9-7-1-查询" tabindex="-1"><a class="header-anchor" href="#_9-7-1-查询"><span>9.7.1 查询</span></a></h3><h4 id="_9-7-1-1-语法" tabindex="-1"><a class="header-anchor" href="#_9-7-1-1-语法"><span>9.7.1.1 语法</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span>    <span class="token operator">&lt;</span>列名<span class="token operator">&gt;</span> </span>
<span class="line"><span class="token constant">FROM</span>      <span class="token operator">&lt;</span>表名<span class="token operator">&gt;</span> </span>
<span class="line"><span class="token punctuation">[</span><span class="token constant">WHERE</span>    <span class="token operator">&lt;</span>查询条件表达式<span class="token operator">&gt;</span><span class="token punctuation">]</span> </span>
<span class="line"><span class="token punctuation">[</span><span class="token constant">ORDER</span> <span class="token constant">BY</span> <span class="token operator">&lt;</span>排序的列名<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token constant">ASC</span>或<span class="token constant">DESC</span><span class="token punctuation">]</span><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_9-7-1-2-排序" tabindex="-1"><a class="header-anchor" href="#_9-7-1-2-排序"><span>9.7.1.2 排序</span></a></h4><ul><li>查询北京的学生信息，并按ID正序排列<div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>idcard<span class="token punctuation">,</span>age<span class="token punctuation">,</span>city</span>
<span class="line"><span class="token constant">FROM</span> student</span>
<span class="line"><span class="token constant">WHERE</span> home<span class="token operator">=</span> <span class="token string">&#39;北京&#39;</span></span>
<span class="line"><span class="token constant">ORDER</span> <span class="token constant">BY</span> id asc</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p><img src="http://img.zhufengpeixun.cn/selectquery.png" alt="selectquery"></p><h4 id="_9-7-1-3-别名" tabindex="-1"><a class="header-anchor" href="#_9-7-1-3-别名"><span>9.7.1.3 别名</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>idcard<span class="token punctuation">,</span>age<span class="token punctuation">,</span>city <span class="token constant">AS</span> home</span>
<span class="line"><span class="token constant">FROM</span> student</span>
<span class="line"><span class="token constant">WHERE</span> city<span class="token operator">=</span> <span class="token string">&#39;山东&#39;</span></span>
<span class="line"><span class="token constant">ORDER</span> <span class="token constant">BY</span> id asc</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_9-7-1-4-查询空行" tabindex="-1"><a class="header-anchor" href="#_9-7-1-4-查询空行"><span>9.7.1.4 查询空行</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>city</span>
<span class="line"><span class="token constant">FROM</span> student</span>
<span class="line"><span class="token constant">WHERE</span> city is <span class="token keyword">null</span> or city <span class="token operator">=</span><span class="token string">&#39;&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_9-7-1-5-常量列" tabindex="-1"><a class="header-anchor" href="#_9-7-1-5-常量列"><span>9.7.1.5 常量列</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>city<span class="token punctuation">,</span><span class="token string">&#39;中国&#39;</span> <span class="token keyword">as</span> country</span>
<span class="line"><span class="token constant">FROM</span> student</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_9-7-1-6-限制返回的行数" tabindex="-1"><a class="header-anchor" href="#_9-7-1-6-限制返回的行数"><span>9.7.1.6 限制返回的行数</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>city<span class="token punctuation">,</span><span class="token string">&#39;中国&#39;</span> <span class="token keyword">as</span> country</span>
<span class="line"><span class="token constant">FROM</span> student limit <span class="token number">2</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_9-7-1-7-distinct" tabindex="-1"><a class="header-anchor" href="#_9-7-1-7-distinct"><span>9.7.1.7 DISTINCT</span></a></h4><ul><li>查询同学们一共来自哪些不同的城市<div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>age<span class="token punctuation">,</span><span class="token constant">DISTINCT</span> city<span class="token punctuation">,</span><span class="token string">&#39;中国&#39;</span> <span class="token keyword">as</span> country</span>
<span class="line"><span class="token constant">FROM</span> student </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h4 id="_9-7-1-8" tabindex="-1"><a class="header-anchor" href="#_9-7-1-8"><span>9.7.1.8 +</span></a></h4><ul><li>在MYSQL中+号只能用作于数字<div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> <span class="token number">1</span><span class="token operator">+</span><span class="token number">1</span></span>
<span class="line"><span class="token constant">SELECT</span> <span class="token number">1</span><span class="token operator">+</span><span class="token string">&#39;1&#39;</span></span>
<span class="line"><span class="token constant">SELECT</span> <span class="token number">1</span><span class="token operator">+</span><span class="token string">&#39;zfpx&#39;</span>  </span>
<span class="line"><span class="token constant">SELECT</span> <span class="token number">1</span><span class="token operator">+</span><span class="token keyword">null</span></span>
<span class="line"><span class="token constant">SELECT</span> <span class="token constant">CONCAT</span><span class="token punctuation">(</span>last_name<span class="token punctuation">,</span>first_name<span class="token punctuation">)</span> <span class="token constant">FROM</span> user<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="_9-7-1-7-练习" tabindex="-1"><a class="header-anchor" href="#_9-7-1-7-练习"><span>9.7.1.7 练习</span></a></h3><h4 id="_9-7-1-7-1-准备数据" tabindex="-1"><a class="header-anchor" href="#_9-7-1-7-1-准备数据"><span>9.7.1.7.1 准备数据</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">ALTER</span> <span class="token constant">TABLE</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">student</span><span class="token template-punctuation string">\`</span></span></span>
<span class="line"><span class="token constant">ADD</span> <span class="token constant">COLUMN</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">province</span><span class="token template-punctuation string">\`</span></span>  <span class="token function">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token constant">NULL</span> <span class="token constant">AFTER</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">city</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span></span>
<span class="line"><span class="token constant">ADD</span> <span class="token constant">COLUMN</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">birthday</span><span class="token template-punctuation string">\`</span></span>  date <span class="token constant">NULL</span> <span class="token constant">AFTER</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">province</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span></span>
<span class="line"><span class="token constant">ADD</span> <span class="token constant">COLUMN</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">gender</span><span class="token template-punctuation string">\`</span></span>   <span class="token function">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token constant">NULL</span> <span class="token constant">AFTER</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">birthday</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span></span>
<span class="line"><span class="token constant">ADD</span> <span class="token constant">COLUMN</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">email</span><span class="token template-punctuation string">\`</span></span>  <span class="token function">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token constant">NULL</span> <span class="token constant">AFTER</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">gender</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="http://img.zhufengpeixun.cn/studenttable.png" alt="studenttable"> <img src="http://img.zhufengpeixun.cn/coursetable.png" alt="coursetable"> <img src="http://img.zhufengpeixun.cn/scoretable.png" alt="scoretable"></p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">INSERT</span> <span class="token constant">INTO</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">student</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>gender<span class="token punctuation">,</span>age<span class="token punctuation">,</span>city<span class="token punctuation">,</span>province<span class="token punctuation">,</span>birthday<span class="token punctuation">,</span>idcard<span class="token punctuation">,</span>email<span class="token punctuation">)</span> <span class="token constant">VALUES</span> <span class="token punctuation">(</span><span class="token string">&#39;1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;郭靖&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;济南&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;山东省&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;1982-09-03&#39;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;1@qq.com&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token constant">INSERT</span> <span class="token constant">INTO</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">student</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>gender<span class="token punctuation">,</span>age<span class="token punctuation">,</span>city<span class="token punctuation">,</span>province<span class="token punctuation">,</span>birthday<span class="token punctuation">,</span>idcard<span class="token punctuation">,</span>email<span class="token punctuation">)</span> <span class="token constant">VALUES</span> <span class="token punctuation">(</span><span class="token string">&#39;2&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;黄蓉&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;2&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;2&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;济南&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;山东省&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;1982-09-03&#39;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&#39;2@qq.com&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token constant">INSERT</span> <span class="token constant">INTO</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">student</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>gender<span class="token punctuation">,</span>age<span class="token punctuation">,</span>city<span class="token punctuation">,</span>province<span class="token punctuation">,</span>birthday<span class="token punctuation">,</span>idcard<span class="token punctuation">,</span>email<span class="token punctuation">)</span> <span class="token constant">VALUES</span> <span class="token punctuation">(</span><span class="token string">&#39;3&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;杨过&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;3&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;3&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;终南山&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;陕西省&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;1979-09-03&#39;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;3@qq.com&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token constant">INSERT</span> <span class="token constant">INTO</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">student</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>gender<span class="token punctuation">,</span>age<span class="token punctuation">,</span>city<span class="token punctuation">,</span>province<span class="token punctuation">,</span>birthday<span class="token punctuation">,</span>idcard<span class="token punctuation">,</span>email<span class="token punctuation">)</span> <span class="token constant">VALUES</span> <span class="token punctuation">(</span><span class="token string">&#39;4&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;小龙女&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;4&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;4&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;终南山&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;陕西省&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;1970-09-03&#39;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&#39;4@qq.com&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token constant">INSERT</span> <span class="token constant">INTO</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">student</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>gender<span class="token punctuation">,</span>age<span class="token punctuation">,</span>city<span class="token punctuation">,</span>province<span class="token punctuation">,</span>birthday<span class="token punctuation">,</span>idcard<span class="token punctuation">,</span>email<span class="token punctuation">)</span> <span class="token constant">VALUES</span> <span class="token punctuation">(</span><span class="token string">&#39;5&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;欧阳锋&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;5&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;5&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;白驼山&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;新疆&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;1989-09-09&#39;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;5@qq.com&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token constant">INSERT</span> <span class="token constant">INTO</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">course</span><span class="token template-punctuation string">\`</span></span> <span class="token constant">VALUES</span> <span class="token punctuation">(</span><span class="token string">&#39;1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;语文&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token constant">INSERT</span> <span class="token constant">INTO</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">course</span><span class="token template-punctuation string">\`</span></span> <span class="token constant">VALUES</span> <span class="token punctuation">(</span><span class="token string">&#39;2&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;数学&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token constant">INSERT</span> <span class="token constant">INTO</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">course</span><span class="token template-punctuation string">\`</span></span> <span class="token constant">VALUES</span> <span class="token punctuation">(</span><span class="token string">&#39;3&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;英语&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token constant">INSERT</span> <span class="token constant">INTO</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">score</span><span class="token template-punctuation string">\`</span></span> <span class="token constant">VALUES</span> <span class="token punctuation">(</span><span class="token string">&#39;1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;100&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token constant">INSERT</span> <span class="token constant">INTO</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">score</span><span class="token template-punctuation string">\`</span></span> <span class="token constant">VALUES</span> <span class="token punctuation">(</span><span class="token string">&#39;1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;2&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;90&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token constant">INSERT</span> <span class="token constant">INTO</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">score</span><span class="token template-punctuation string">\`</span></span> <span class="token constant">VALUES</span> <span class="token punctuation">(</span><span class="token string">&#39;1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;3&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;70&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token constant">INSERT</span> <span class="token constant">INTO</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">score</span><span class="token template-punctuation string">\`</span></span> <span class="token constant">VALUES</span> <span class="token punctuation">(</span><span class="token string">&#39;2&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;100&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token constant">INSERT</span> <span class="token constant">INTO</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">score</span><span class="token template-punctuation string">\`</span></span> <span class="token constant">VALUES</span> <span class="token punctuation">(</span><span class="token string">&#39;2&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;2&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;90&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token constant">INSERT</span> <span class="token constant">INTO</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">score</span><span class="token template-punctuation string">\`</span></span> <span class="token constant">VALUES</span> <span class="token punctuation">(</span><span class="token string">&#39;2&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;3&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;80&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token constant">INSERT</span> <span class="token constant">INTO</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">score</span><span class="token template-punctuation string">\`</span></span> <span class="token constant">VALUES</span> <span class="token punctuation">(</span><span class="token string">&#39;3&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;100&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token constant">INSERT</span> <span class="token constant">INTO</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">score</span><span class="token template-punctuation string">\`</span></span> <span class="token constant">VALUES</span> <span class="token punctuation">(</span><span class="token string">&#39;3&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;2&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;90&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token constant">INSERT</span> <span class="token constant">INTO</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">score</span><span class="token template-punctuation string">\`</span></span> <span class="token constant">VALUES</span> <span class="token punctuation">(</span><span class="token string">&#39;3&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;3&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;80&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_9-7-1-7-2-查询山东省的同学全部信息" tabindex="-1"><a class="header-anchor" href="#_9-7-1-7-2-查询山东省的同学全部信息"><span>9.7.1.7.2 查询山东省的同学全部信息</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">select <span class="token operator">*</span> from student where province <span class="token operator">=</span> <span class="token string">&#39;山东&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_9-7-1-7-3-查询山东省的男同学的全部信息" tabindex="-1"><a class="header-anchor" href="#_9-7-1-7-3-查询山东省的男同学的全部信息"><span>9.7.1.7.3 查询山东省的男同学的全部信息</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">select <span class="token operator">*</span> from student where province <span class="token operator">=</span> <span class="token string">&#39;山东&#39;</span> and gender<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_9-7-1-7-4-查询没有填写电子邮箱的同学的姓名和身份证号" tabindex="-1"><a class="header-anchor" href="#_9-7-1-7-4-查询没有填写电子邮箱的同学的姓名和身份证号"><span>9.7.1.7.4 查询没有填写电子邮箱的同学的姓名和身份证号</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> name<span class="token punctuation">,</span>idcard <span class="token constant">FROM</span> student <span class="token constant">WHERE</span> email <span class="token constant">IS</span> <span class="token constant">NULL</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_9-7-1-8-排序" tabindex="-1"><a class="header-anchor" href="#_9-7-1-8-排序"><span>9.7.1.8 排序</span></a></h3><h4 id="_9-7-1-8-1-把学生的分数按升序排列" tabindex="-1"><a class="header-anchor" href="#_9-7-1-8-1-把学生的分数按升序排列"><span>9.7.1.8.1 把学生的分数按升序排列</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">select <span class="token operator">*</span> from score order by grade asc<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_9-7-1-8-2-把学生的分数按降序排列" tabindex="-1"><a class="header-anchor" href="#_9-7-1-8-2-把学生的分数按降序排列"><span>9.7.1.8.2 把学生的分数按降序排列</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">select <span class="token operator">*</span> from score order by grade desc<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_9-7-1-8-3-课程编号按升序-成绩按降序" tabindex="-1"><a class="header-anchor" href="#_9-7-1-8-3-课程编号按升序-成绩按降序"><span>9.7.1.8.3 课程编号按升序，成绩按降序</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">select <span class="token operator">*</span> from score order by course_id asc<span class="token punctuation">,</span> grade desc<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_9-8-函数" tabindex="-1"><a class="header-anchor" href="#_9-8-函数"><span>9.8 函数</span></a></h2><h3 id="_9-8-1-字符函数" tabindex="-1"><a class="header-anchor" href="#_9-8-1-字符函数"><span>9.8.1 字符函数</span></a></h3><table><thead><tr><th style="text-align:left;">函数名称</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:left;">CONCAT</td><td style="text-align:left;">字符串连接</td></tr><tr><td style="text-align:left;">CONCAT_WS</td><td style="text-align:left;">使用指定的分隔符进行字符连接</td></tr><tr><td style="text-align:left;">FORMAT</td><td style="text-align:left;">数字格式化</td></tr><tr><td style="text-align:left;">LOWER</td><td style="text-align:left;">转小写字母</td></tr><tr><td style="text-align:left;">UPPER</td><td style="text-align:left;">转大写字母</td></tr><tr><td style="text-align:left;">LEFT</td><td style="text-align:left;">返回字符串s开始的最左边n个字符</td></tr><tr><td style="text-align:left;">RIGHT</td><td style="text-align:left;">返回字符串s开始的最左边n个字符</td></tr></tbody></table><h4 id="_9-8-1-1-length" tabindex="-1"><a class="header-anchor" href="#_9-8-1-1-length"><span>9.8.1.1 LENGTH</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> <span class="token constant">LENGTH</span><span class="token punctuation">(</span><span class="token string">&#39;zfpx&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token constant">SELECT</span> <span class="token constant">LENGTH</span><span class="token punctuation">(</span><span class="token string">&#39;珠峰培训&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token constant">SHOW</span> <span class="token constant">VARIABLES</span> like <span class="token string">&#39;%char%&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_9-8-1-2-拼接字符串-concat" tabindex="-1"><a class="header-anchor" href="#_9-8-1-2-拼接字符串-concat"><span>9.8.1.2 拼接字符串 [CONCAT]</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> <span class="token constant">CONCAT</span><span class="token punctuation">(</span>last_name<span class="token punctuation">,</span><span class="token string">&#39;_&#39;</span><span class="token punctuation">,</span>first_name<span class="token punctuation">)</span> <span class="token constant">FROM</span> employees<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_9-8-1-3-拼接字符串-upper" tabindex="-1"><a class="header-anchor" href="#_9-8-1-3-拼接字符串-upper"><span>9.8.1.3 拼接字符串 [UPPER]</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> <span class="token constant">UPPER</span><span class="token punctuation">(</span><span class="token string">&#39;zfpx&#39;</span><span class="token punctuation">)</span> <span class="token constant">FROM</span> employees<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_9-8-1-4-拼接字符串-lower" tabindex="-1"><a class="header-anchor" href="#_9-8-1-4-拼接字符串-lower"><span>9.8.1.4 拼接字符串 [LOWER]</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> <span class="token constant">LOWER</span><span class="token punctuation">(</span><span class="token string">&#39;ZFPX&#39;</span><span class="token punctuation">)</span> <span class="token constant">FROM</span> employees<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_9-8-1-5-截取字符串-substr" tabindex="-1"><a class="header-anchor" href="#_9-8-1-5-截取字符串-substr"><span>9.8.1.5 截取字符串 [SUBSTR]</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> <span class="token constant">SUBSTR</span><span class="token punctuation">(</span><span class="token string">&#39;zfpx&#39;</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">--</span> 截取从指定索引处开始的所有的字符</span>
<span class="line"><span class="token constant">SELECT</span> <span class="token constant">SUBSTR</span><span class="token punctuation">(</span><span class="token string">&#39;zfpx&#39;</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">--</span>截取从指定索引处开始的指定数量的字符</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_9-8-1-6-姓名的首字符大写-其它字符小写然后用-拼接" tabindex="-1"><a class="header-anchor" href="#_9-8-1-6-姓名的首字符大写-其它字符小写然后用-拼接"><span>9.8.1.6 姓名的首字符大写，其它字符小写然后用_拼接</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"> <span class="token constant">SELECT</span> <span class="token constant">CONCAT</span><span class="token punctuation">(</span><span class="token constant">UPPER</span><span class="token punctuation">(</span><span class="token constant">SUBSTR</span><span class="token punctuation">(</span>last_name<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&#39;_&#39;</span><span class="token punctuation">,</span><span class="token constant">LOWER</span><span class="token punctuation">(</span><span class="token constant">SUBSTR</span><span class="token punctuation">(</span>last_name<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_9-8-1-7-返回子串在原始字符串的起始索引" tabindex="-1"><a class="header-anchor" href="#_9-8-1-7-返回子串在原始字符串的起始索引"><span>9.8.1.7 返回子串在原始字符串的起始索引</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> <span class="token constant">INSTR</span><span class="token punctuation">(</span><span class="token string">&#39;zfpx&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;f&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_9-8-1-8-去掉左右空格-trim" tabindex="-1"><a class="header-anchor" href="#_9-8-1-8-去掉左右空格-trim"><span>9.8.1.8 去掉左右空格[TRIM]</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> <span class="token constant">TRIM</span><span class="token punctuation">(</span><span class="token string">&#39;  zfpx  &#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token constant">SELECT</span> <span class="token constant">LTRIM</span><span class="token punctuation">(</span><span class="token string">&#39;  zfpx  &#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token constant">SELECT</span> <span class="token constant">RTRIM</span><span class="token punctuation">(</span><span class="token string">&#39;  zfpx  &#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token constant">SELECT</span> <span class="token constant">TRIM</span><span class="token punctuation">(</span><span class="token string">&#39;x&#39;</span> <span class="token constant">FROM</span> <span class="token string">&#39;xxzfpxxx&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_9-8-1-9-用空格补齐-lpad" tabindex="-1"><a class="header-anchor" href="#_9-8-1-9-用空格补齐-lpad"><span>9.8.1.9 用空格补齐[LPAD]</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> <span class="token constant">LPAD</span><span class="token punctuation">(</span><span class="token string">&#39;zfpx&#39;</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">&#39;@&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token constant">SELECT</span> <span class="token constant">LPAD</span><span class="token punctuation">(</span><span class="token string">&#39;1&#39;</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token string">&#39;0&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token constant">SELECT</span> <span class="token constant">RPAD</span><span class="token punctuation">(</span><span class="token string">&#39;1&#39;</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token string">&#39;0&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_9-8-1-10-替换" tabindex="-1"><a class="header-anchor" href="#_9-8-1-10-替换"><span>9.8.1.10 替换</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> <span class="token constant">REPLACE</span><span class="token punctuation">(</span><span class="token string">&#39;zfpx&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;f&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;q&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_9-8-1-11-format" tabindex="-1"><a class="header-anchor" href="#_9-8-1-11-format"><span>9.8.1.11 FORMAT</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> <span class="token constant">FORMAT</span><span class="token punctuation">(</span><span class="token number">100000</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token number">100</span><span class="token punctuation">,</span><span class="token number">000.00</span></span>
<span class="line">select <span class="token function">format</span><span class="token punctuation">(</span><span class="token number">100.31111</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token number">100.31</span></span>
<span class="line">select <span class="token function">format</span><span class="token punctuation">(</span><span class="token number">100.31111</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token number">100</span></span>
<span class="line"><span class="token constant">SELECT</span> <span class="token constant">FORMAT</span><span class="token punctuation">(</span><span class="token number">423423234.65534453</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token number">423</span><span class="token punctuation">,</span><span class="token number">423</span><span class="token punctuation">,</span><span class="token number">234.66</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_9-8-1-12-left-right" tabindex="-1"><a class="header-anchor" href="#_9-8-1-12-left-right"><span>9.8.1.12 LEFT RIGHT</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">select <span class="token function">left</span><span class="token punctuation">(</span><span class="token string">&#39;abcde12345&#39;</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//abcde</span></span>
<span class="line">select <span class="token function">left</span><span class="token punctuation">(</span><span class="token string">&#39;abcde12345&#39;</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//12345</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_9-8-2-数学函数" tabindex="-1"><a class="header-anchor" href="#_9-8-2-数学函数"><span>9.8.2 数学函数</span></a></h3><table><thead><tr><th style="text-align:left;">函数名称</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:left;">CEIL</td><td style="text-align:left;">向上取整</td></tr><tr><td style="text-align:left;">FLOOR</td><td style="text-align:left;">向下取整数</td></tr><tr><td style="text-align:left;">DIV</td><td style="text-align:left;">整数取</td></tr><tr><td style="text-align:left;">MOD</td><td style="text-align:left;">取余(取模)</td></tr><tr><td style="text-align:left;">POWER</td><td style="text-align:left;">幂运算</td></tr><tr><td style="text-align:left;">ROUND</td><td style="text-align:left;">四舍五入</td></tr><tr><td style="text-align:left;">TRUNCATE</td><td style="text-align:left;">数字截取</td></tr></tbody></table><h4 id="_9-8-2-1-四舍五入" tabindex="-1"><a class="header-anchor" href="#_9-8-2-1-四舍五入"><span>9.8.2.1 四舍五入</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> <span class="token constant">ROUND</span><span class="token punctuation">(</span><span class="token number">2.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token constant">SELECT</span> <span class="token constant">ROUND</span><span class="token punctuation">(</span><span class="token number">2.555</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_9-8-2-2-向上取整" tabindex="-1"><a class="header-anchor" href="#_9-8-2-2-向上取整"><span>9.8.2.2 向上取整</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> <span class="token constant">CEIL</span><span class="token punctuation">(</span><span class="token number">1.00</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_9-8-2-3-向下取整" tabindex="-1"><a class="header-anchor" href="#_9-8-2-3-向下取整"><span>9.8.2.3 向下取整</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> <span class="token constant">FLOOR</span><span class="token punctuation">(</span><span class="token number">1.00</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_9-8-2-4-截断" tabindex="-1"><a class="header-anchor" href="#_9-8-2-4-截断"><span>9.8.2.4 截断</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> <span class="token constant">TRUNCATE</span><span class="token punctuation">(</span><span class="token number">1.66</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_9-8-2-5-取余" tabindex="-1"><a class="header-anchor" href="#_9-8-2-5-取余"><span>9.8.2.5 取余</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> <span class="token function">mod</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_9-8-3-日期函数" tabindex="-1"><a class="header-anchor" href="#_9-8-3-日期函数"><span>9.8.3 日期函数</span></a></h3><table><thead><tr><th style="text-align:left;">函数名称</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:left;">NOW</td><td style="text-align:left;">当前日期和时间</td></tr><tr><td style="text-align:left;">CURDATE</td><td style="text-align:left;">当前日期</td></tr><tr><td style="text-align:left;">CURTIME</td><td style="text-align:left;">当前时间</td></tr><tr><td style="text-align:left;">DATE_ADD</td><td style="text-align:left;">日期变化</td></tr><tr><td style="text-align:left;">DATEDIFF</td><td style="text-align:left;">计算日期差</td></tr><tr><td style="text-align:left;">DATE_FORMAT</td><td style="text-align:left;">日期格式化</td></tr></tbody></table><h4 id="_9-8-3-1-返回日期时间" tabindex="-1"><a class="header-anchor" href="#_9-8-3-1-返回日期时间"><span>9.8.3.1 返回日期时间</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> <span class="token constant">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_9-8-3-2-返回日期" tabindex="-1"><a class="header-anchor" href="#_9-8-3-2-返回日期"><span>9.8.3.2 返回日期</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> <span class="token constant">CURDATE</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_9-8-3-3-返回日期" tabindex="-1"><a class="header-anchor" href="#_9-8-3-3-返回日期"><span>9.8.3.3 返回日期</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> <span class="token constant">CURTIME</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_9-8-3-4-返回日期中指定的部分" tabindex="-1"><a class="header-anchor" href="#_9-8-3-4-返回日期中指定的部分"><span>9.8.3.4 返回日期中指定的部分</span></a></h4><p>年 月 日 小时 分钟 秒</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> <span class="token constant">YEAR</span><span class="token punctuation">(</span><span class="token constant">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token constant">SELECT</span> <span class="token constant">MONTH</span><span class="token punctuation">(</span><span class="token constant">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token constant">SELECT</span> <span class="token constant">MONTHNAME</span><span class="token punctuation">(</span><span class="token constant">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token constant">SELECT</span> <span class="token constant">DAY</span><span class="token punctuation">(</span><span class="token constant">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token constant">SELECT</span> <span class="token constant">HOUR</span><span class="token punctuation">(</span><span class="token constant">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token constant">SELECT</span> <span class="token constant">MINUTE</span><span class="token punctuation">(</span><span class="token constant">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token constant">SELECT</span> <span class="token constant">SECOND</span><span class="token punctuation">(</span><span class="token constant">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_9-8-3-5-str-to-date" tabindex="-1"><a class="header-anchor" href="#_9-8-3-5-str-to-date"><span>9.8.3.5 str_to_date</span></a></h4><p>将日期格式的字符串转成指定格式的日期</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> <span class="token constant">STR_TO_DATE</span><span class="token punctuation">(</span><span class="token string">&#39;2018-09-09&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;%Y-%m-%d&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><table><thead><tr><th style="text-align:left;">序号</th><th style="text-align:left;">格式符</th><th>功能</th></tr></thead><tbody><tr><td style="text-align:left;">1</td><td style="text-align:left;">%Y</td><td>4位的年份</td></tr><tr><td style="text-align:left;">2</td><td style="text-align:left;">%y</td><td>2位的年份</td></tr><tr><td style="text-align:left;">3</td><td style="text-align:left;">%m</td><td>月份(01,02)</td></tr><tr><td style="text-align:left;">4</td><td style="text-align:left;">%c</td><td>月份(1,2)</td></tr><tr><td style="text-align:left;">5</td><td style="text-align:left;">%d</td><td>日(01,02)</td></tr><tr><td style="text-align:left;">6</td><td style="text-align:left;">%H</td><td>小时(24小时制)</td></tr><tr><td style="text-align:left;">7</td><td style="text-align:left;">%h</td><td>小时(12小时制)</td></tr><tr><td style="text-align:left;">8</td><td style="text-align:left;">%i</td><td>分钟(00,01)</td></tr><tr><td style="text-align:left;">9</td><td style="text-align:left;">%s</td><td>秒(00,01)</td></tr></tbody></table><h4 id="_9-8-3-6" tabindex="-1"><a class="header-anchor" href="#_9-8-3-6"><span>9.8.3.6</span></a></h4><p>查询入职日期为1984-8-4的员工信息</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> <span class="token operator">*</span> <span class="token constant">FROM</span> employees <span class="token constant">WHERE</span> hiredate <span class="token operator">=</span> <span class="token constant">STR_TO_DATE</span><span class="token punctuation">(</span><span class="token string">&#39;12-30 1984&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;%m-%d %Y&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_9-8-3-7-date-format" tabindex="-1"><a class="header-anchor" href="#_9-8-3-7-date-format"><span>9.8.3.7 DATE_FORMAT</span></a></h4><p>将日期转换成指定字符串</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> <span class="token constant">DATE_FORMAT</span><span class="token punctuation">(</span><span class="token constant">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&#39;%Y年%m月%d日&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_9-8-3-8-date-add" tabindex="-1"><a class="header-anchor" href="#_9-8-3-8-date-add"><span>9.8.3.8 DATE_ADD</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> <span class="token constant">DATE_ADD</span><span class="token punctuation">(</span><span class="token constant">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token constant">INTERVAL</span> <span class="token number">365</span> <span class="token constant">DAY</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token constant">SELECT</span> <span class="token constant">DATE_ADD</span><span class="token punctuation">(</span><span class="token constant">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token constant">INTERVAL</span> <span class="token number">1</span> <span class="token constant">MONTH</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token constant">SELECT</span> <span class="token constant">DATE_ADD</span><span class="token punctuation">(</span><span class="token constant">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token constant">INTERVAL</span> <span class="token number">1</span> <span class="token constant">YEAR</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_9-8-3-9-datediff" tabindex="-1"><a class="header-anchor" href="#_9-8-3-9-datediff"><span>9.8.3.9 DATEDIFF</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> <span class="token constant">DATEDIFF</span><span class="token punctuation">(</span><span class="token string">&#39;2019-1-1&#39;</span><span class="token punctuation">,</span><span class="token constant">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_9-8-4-其它函数" tabindex="-1"><a class="header-anchor" href="#_9-8-4-其它函数"><span>9.8.4 其它函数</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> <span class="token constant">CONNECTION_ID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token constant">SELECT</span> <span class="token constant">DATABASE</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token constant">SELECT</span> <span class="token constant">VERSION</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">select <span class="token constant">LAST_INSERT_ID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token constant">SELECT</span> <span class="token constant">USER</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token constant">SELECT</span> <span class="token constant">MD5</span><span class="token punctuation">(</span><span class="token string">&#39;123456&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//摘要算法</span></span>
<span class="line"><span class="token constant">SELECT</span> <span class="token constant">PASSWORD</span><span class="token punctuation">(</span><span class="token string">&#39;123456&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//修改当前用户的密码</span></span>
<span class="line"><span class="token constant">SELECT</span> User<span class="token punctuation">,</span>Password from mysql<span class="token punctuation">.</span>user<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_9-8-5-流程控制函数" tabindex="-1"><a class="header-anchor" href="#_9-8-5-流程控制函数"><span>9.8.5 流程控制函数</span></a></h3><h4 id="_9-8-5-1-if" tabindex="-1"><a class="header-anchor" href="#_9-8-5-1-if"><span>9.8.5.1 IF</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> <span class="token constant">IF</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">&#39;A&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;B&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_9-8-5-2-case函数" tabindex="-1"><a class="header-anchor" href="#_9-8-5-2-case函数"><span>9.8.5.2 CASE函数</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">CASE</span> 要判断的字段和表达式</span>
<span class="line"><span class="token constant">WHEN</span> 常量<span class="token number">1</span> then 要显示的值或语句<span class="token number">1</span></span>
<span class="line"><span class="token constant">WHEN</span> 常量<span class="token number">2</span> then 要显示的值或语句<span class="token number">2</span></span>
<span class="line"><span class="token constant">ELSE</span> 要显示的值</span>
<span class="line"><span class="token constant">END</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> </span>
<span class="line"><span class="token constant">CASE</span> </span>
<span class="line"><span class="token constant">WHEN</span> grade<span class="token operator">&lt;</span><span class="token number">60</span> then <span class="token string">&#39;不及格&#39;</span></span>
<span class="line"><span class="token constant">WHEN</span> grade<span class="token operator">&gt;=</span><span class="token number">60</span> then <span class="token string">&#39;及格&#39;</span></span>
<span class="line"><span class="token constant">ELSE</span> <span class="token string">&#39;未知&#39;</span></span>
<span class="line"><span class="token constant">END</span></span>
<span class="line"><span class="token constant">FROM</span> score<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">SELECT</span> </span>
<span class="line"><span class="token constant">CASE</span> level</span>
<span class="line"><span class="token constant">WHEN</span> <span class="token string">&#39;A&#39;</span> then <span class="token string">&#39;优秀&#39;</span></span>
<span class="line"><span class="token constant">WHEN</span> <span class="token string">&#39;B&#39;</span> then <span class="token string">&#39;良好&#39;</span></span>
<span class="line"><span class="token constant">ELSE</span> <span class="token string">&#39;未知&#39;</span></span>
<span class="line"><span class="token constant">END</span></span>
<span class="line"><span class="token constant">FROM</span> score<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_9-9-自定义函数" tabindex="-1"><a class="header-anchor" href="#_9-9-自定义函数"><span>9.9 自定义函数</span></a></h3><ul><li>自定义函数是对MySQL的扩展，使用方式和内置函数相同</li><li>函数必须要有参数和返回值</li><li>函数可以接收任意类型的值，也可以接收这些类型的参数</li><li>函数体由合法的SQL语句组成</li><li>函数体可以是简单的SELECT语句或INSERT语句，如果是复合结构要用BEGIN...END</li><li>函数体也可以包含声明，循环和流程控制</li><li>返回值只能有一个</li></ul><h4 id="_9-9-1-语法" tabindex="-1"><a class="header-anchor" href="#_9-9-1-语法"><span>9.9.1 语法</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">CREATE</span> <span class="token constant">FUNCTION</span> <span class="token function">func_name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token constant">RETURNS</span>  <span class="token constant">VARCHAR</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span></span>
<span class="line">body</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_9-9-2-znow" tabindex="-1"><a class="header-anchor" href="#_9-9-2-znow"><span>9.9.2 znow</span></a></h4><ul><li>注意函数名一定要跟着小括号表示参数</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">CREATE</span> <span class="token constant">FUNCTION</span> <span class="token function">znow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token constant">RETURNS</span> <span class="token constant">VARCHAR</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token constant">RETURN</span> <span class="token constant">DATE_FORMAT</span><span class="token punctuation">(</span><span class="token constant">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&#39;%Y年%m月%d日 %H点:%i分%s秒&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_9-9-3-zadd" tabindex="-1"><a class="header-anchor" href="#_9-9-3-zadd"><span>9.9.3 zadd</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">CREATE</span> <span class="token constant">FUNCTION</span> <span class="token function">zadd</span><span class="token punctuation">(</span>num1 <span class="token constant">INT</span><span class="token punctuation">,</span>num2 <span class="token constant">INT</span><span class="token punctuation">)</span> <span class="token constant">RETURNS</span> <span class="token constant">INT</span></span>
<span class="line"><span class="token constant">RETURN</span> num1<span class="token operator">+</span>num2<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_9-9-4-adduser" tabindex="-1"><a class="header-anchor" href="#_9-9-4-adduser"><span>9.9.4 addUser</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">CREATE</span> <span class="token constant">TABLE</span> <span class="token function">stu</span><span class="token punctuation">(</span>id int <span class="token constant">PRIMARY</span> <span class="token constant">KEY</span> <span class="token constant">AUTO_INCREMENT</span><span class="token punctuation">,</span>name <span class="token constant">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token constant">CREATE</span> <span class="token constant">FUNCTION</span> <span class="token function">addUser</span><span class="token punctuation">(</span>name <span class="token constant">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token constant">RETURNS</span> <span class="token constant">INT</span></span>
<span class="line"><span class="token constant">BEGIN</span></span>
<span class="line">  <span class="token constant">INSERT</span> <span class="token constant">INTO</span> <span class="token function">stu</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token constant">VALUES</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token constant">RETURN</span> <span class="token constant">LAST_INSERT_ID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token constant">END</span></span>
<span class="line"></span>
<span class="line"><span class="token constant">SELECT</span> <span class="token function">addUser</span><span class="token punctuation">(</span><span class="token string">&#39;zfpx&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token constant">DROP</span> <span class="token constant">FUNCTION</span> addUser</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_9-10-模糊查询" tabindex="-1"><a class="header-anchor" href="#_9-10-模糊查询"><span>9.10 模糊查询</span></a></h3><p>就是查询的条件是模糊的，不是特别明确的</p><h4 id="_9-10-1-通配符" tabindex="-1"><a class="header-anchor" href="#_9-10-1-通配符"><span>9.10.1 通配符</span></a></h4><p>代替一个或多个真正的字符，与LIKE 关键字一起使用</p><ul><li><code>_</code>表示一个任意字符</li><li><code>%</code>表示任意长度的字符串</li></ul><h4 id="_9-10-2-between-and" tabindex="-1"><a class="header-anchor" href="#_9-10-2-between-and"><span>9.10.2 BETWEEN AND</span></a></h4><p>查询某一列在指定的规范内的记录，包括两个边界</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">select <span class="token operator">*</span> from score where grade between <span class="token number">80</span> and <span class="token number">100</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_9-10-3-in" tabindex="-1"><a class="header-anchor" href="#_9-10-3-in"><span>9.10.3 IN</span></a></h4><p>查询某一列中的值在列出的内容列表中</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">select <span class="token operator">*</span> from student where city <span class="token keyword">in</span> <span class="token punctuation">(</span><span class="token string">&#39;北京&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;上海&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;广东&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_9-10-4-is-nul" tabindex="-1"><a class="header-anchor" href="#_9-10-4-is-nul"><span>9.10.4 IS NUL</span></a></h4><ul><li>查询没有邮箱的 IS NUL</li><li>查询有邮箱的 IS NOT NULL</li></ul><h2 id="_10-dcl" tabindex="-1"><a class="header-anchor" href="#_10-dcl"><span>10. DCL</span></a></h2><h3 id="_10-1-创建用户" tabindex="-1"><a class="header-anchor" href="#_10-1-创建用户"><span>10.1 创建用户</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">CREATE</span> <span class="token constant">USER</span> 用户名@访问地址 <span class="token constant">IDENTIFIED</span> <span class="token constant">BY</span> <span class="token string">&#39;密码&#39;</span></span>
<span class="line"><span class="token constant">CREATE</span> <span class="token constant">USER</span> user1@localhost <span class="token constant">IDENTIFIED</span> <span class="token constant">BY</span> <span class="token string">&#39;123456&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_10-2-授予权限" tabindex="-1"><a class="header-anchor" href="#_10-2-授予权限"><span>10.2 授予权限</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">GRANT</span> 权限<span class="token number">1</span><span class="token punctuation">,</span>权限<span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">,</span><span class="token punctuation">,</span> <span class="token constant">ON</span> 数据库<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token constant">TO</span> 用户名</span>
<span class="line"></span>
<span class="line"><span class="token constant">GRANT</span> <span class="token constant">CREATE</span><span class="token punctuation">,</span><span class="token constant">DROP</span> <span class="token constant">ON</span> db1<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token constant">TO</span> user1@localhost<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_10-3-授予权限" tabindex="-1"><a class="header-anchor" href="#_10-3-授予权限"><span>10.3 授予权限</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">REVOKE</span> 权限<span class="token number">1</span>，权限<span class="token number">2</span>，，，<span class="token constant">ON</span> 数据库<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token constant">FROM</span> 用户名<span class="token punctuation">;</span></span>
<span class="line"><span class="token constant">REVOKE</span> <span class="token constant">CREATE</span><span class="token punctuation">,</span><span class="token constant">DROP</span> <span class="token constant">ONT</span> db1<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token constant">FROM</span> user1@localhost<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_10-4-查看用户权限" tabindex="-1"><a class="header-anchor" href="#_10-4-查看用户权限"><span>10.4 查看用户权限</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">SHOW GRANTS FROM 用户名</span>
<span class="line">SHOW GRANTS FROM user1@localhost;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_10-5-删除用户" tabindex="-1"><a class="header-anchor" href="#_10-5-删除用户"><span>10.5 删除用户</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">DROP USER 用户名</span>
<span class="line">DROP USER user1@localhost;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_10-6-修改密码" tabindex="-1"><a class="header-anchor" href="#_10-6-修改密码"><span>10.6 修改密码</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">UPDATE</span> <span class="token constant">USER</span> <span class="token constant">SET</span> <span class="token constant">PASSWORD</span><span class="token operator">=</span><span class="token constant">PASSWORD</span><span class="token punctuation">(</span><span class="token string">&#39;password&#39;</span><span class="token punctuation">)</span> <span class="token constant">WHERE</span> User<span class="token operator">=</span><span class="token string">&#39;username&#39;</span> and Host<span class="token operator">=</span><span class="token string">&#39;localhost&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token constant">FLUSH</span> <span class="token constant">PRIVILEGES</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_11-存储过程" tabindex="-1"><a class="header-anchor" href="#_11-存储过程"><span>11. 存储过程</span></a></h2><ul><li>大多数SQL语句都是针对一个或多个表的单条语句。但是并不是所有的操作都是可以用一条语句来完成的，经常有一些操作是需要多条语句配合才能完成。我们引入的存储过程（Stored Procedure）是一组为了完成特定功能的SQL语句集，经编译后存储在数据库中，用户通过指定存储过程的名字并给定参数（如果该存储过程带有参数）来调用执行它</li></ul><h3 id="_11-1-语法" tabindex="-1"><a class="header-anchor" href="#_11-1-语法"><span>11.1 语法</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">CREATE PROCEDURE([[IN |OUT |INOUT ] 参数名 数据类形...])</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_11-2-调用" tabindex="-1"><a class="header-anchor" href="#_11-2-调用"><span>11.2 调用</span></a></h3><ul><li>因为存储过程实际上是一种函数,所以存储过程名后需要有 () 符号(即使不传递参数也需要)<div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">CALL Avg_Price()</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ul><h3 id="_11-3-删除" tabindex="-1"><a class="header-anchor" href="#_11-3-删除"><span>11.3 删除</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">DROP PROCEDURE IF EXISTS Avg_Price;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_11-4-参数" tabindex="-1"><a class="header-anchor" href="#_11-4-参数"><span>11.4 参数</span></a></h3><ul><li>存储过程并不显示结果，而是把结果返回给你指定的变量</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">create procedure <span class="token function">sum</span> <span class="token punctuation">(</span><span class="token keyword">in</span> a int<span class="token punctuation">,</span><span class="token keyword">in</span> b int<span class="token punctuation">,</span>out result int<span class="token punctuation">)</span></span>
<span class="line">begin</span>
<span class="line">select a<span class="token operator">+</span>b <span class="token constant">INTO</span> result<span class="token punctuation">;</span></span>
<span class="line">end</span>
<span class="line"></span>
<span class="line">call <span class="token function">sum5</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span>@result<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">select @result<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_12-索引" tabindex="-1"><a class="header-anchor" href="#_12-索引"><span>12. 索引</span></a></h2><ul><li>索引可以提高数据库的查询速度</li></ul><p><img src="http://img.zhufengpeixun.cn/treeindex.jpg" alt="treeindex"></p><h3 id="_12-1-准备数据" tabindex="-1"><a class="header-anchor" href="#_12-1-准备数据"><span>12.1 准备数据</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token operator">--</span> 构建一个<span class="token number">8388608</span>条记录的数据 </span>
<span class="line"></span>
<span class="line"><span class="token operator">--</span> 创建用户表</span>
<span class="line">create table <span class="token function">user</span><span class="token punctuation">(</span></span>
<span class="line">  id int<span class="token punctuation">,</span></span>
<span class="line">    username <span class="token function">varchar</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    userno int</span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token operator">--</span> 创建生成随机字符串的函数</span>
<span class="line"><span class="token constant">CREATE</span> <span class="token constant">FUNCTION</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">rand_string</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">(</span>n <span class="token constant">INT</span><span class="token punctuation">)</span> <span class="token constant">RETURNS</span> <span class="token function">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token constant">BEGIN</span> </span>
<span class="line"><span class="token constant">DECLARE</span> chars_str <span class="token function">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token constant">DEFAULT</span> <span class="token string">&#39;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789&#39;</span><span class="token punctuation">;</span> </span>
<span class="line"><span class="token constant">DECLARE</span> return_str <span class="token function">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token constant">DEFAULT</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">;</span> </span>
<span class="line"><span class="token constant">DECLARE</span> i <span class="token constant">INT</span> <span class="token constant">DEFAULT</span> <span class="token number">0</span><span class="token punctuation">;</span> </span>
<span class="line"><span class="token constant">WHILE</span> i <span class="token operator">&lt;</span> n <span class="token constant">DO</span> </span>
<span class="line"><span class="token constant">SET</span> return_str <span class="token operator">=</span> <span class="token function">concat</span><span class="token punctuation">(</span>return_str<span class="token punctuation">,</span><span class="token function">substring</span><span class="token punctuation">(</span>chars_str <span class="token punctuation">,</span> <span class="token constant">FLOOR</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> <span class="token constant">RAND</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">62</span> <span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </span>
<span class="line"><span class="token constant">SET</span> i <span class="token operator">=</span> i <span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span> </span>
<span class="line"><span class="token constant">END</span> <span class="token constant">WHILE</span><span class="token punctuation">;</span> </span>
<span class="line"><span class="token constant">RETURN</span> return_str<span class="token punctuation">;</span> </span>
<span class="line"><span class="token constant">END</span><span class="token punctuation">;</span> </span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token operator">--</span> 产生随机数字 </span>
<span class="line">create <span class="token keyword">function</span> <span class="token function">rand_num</span><span class="token punctuation">(</span><span class="token punctuation">)</span> </span>
<span class="line">returns <span class="token function">int</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> </span>
<span class="line">begin  </span>
<span class="line">declare i int <span class="token keyword">default</span> <span class="token number">0</span><span class="token punctuation">;</span> </span>
<span class="line"><span class="token keyword">set</span> i <span class="token operator">=</span> <span class="token function">floor</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token operator">+</span><span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </span>
<span class="line"><span class="token keyword">return</span> i<span class="token punctuation">;</span> </span>
<span class="line">end</span>
<span class="line"></span>
<span class="line"><span class="token operator">--</span> 创建存储过程，向用户表添加海量数据 </span>
<span class="line"></span>
<span class="line">create procedure <span class="token function">insert_user</span><span class="token punctuation">(</span><span class="token keyword">in</span> start <span class="token function">int</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">in</span> max_num <span class="token function">int</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"> begin</span>
<span class="line">   declare i int<span class="token punctuation">;</span></span>
<span class="line">   <span class="token keyword">set</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line">   <span class="token keyword">while</span> i<span class="token operator">&lt;</span>max_num <span class="token keyword">do</span></span>
<span class="line">     <span class="token keyword">set</span> i<span class="token operator">=</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line">         insert into <span class="token function">user</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>username<span class="token punctuation">,</span>userno<span class="token punctuation">)</span> <span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">(</span>start<span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">rand_string</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">rand_num</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">   end <span class="token keyword">while</span><span class="token punctuation">;</span></span>
<span class="line"> end<span class="token punctuation">;</span></span>
<span class="line">call <span class="token function">insert_user</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">8388608</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_12-2-创建普通索引" tabindex="-1"><a class="header-anchor" href="#_12-2-创建普通索引"><span>12.2 创建普通索引</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">create table <span class="token function">user</span><span class="token punctuation">(</span>id int primary key<span class="token punctuation">,</span>name <span class="token function">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">,</span>email <span class="token function">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">alter table user add <span class="token function">index</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">create index idx_name on  <span class="token function">user</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_12-3-查看索引" tabindex="-1"><a class="header-anchor" href="#_12-3-查看索引"><span>12.3 查看索引</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">show index from 表名<span class="token punctuation">;</span></span>
<span class="line">show index from user</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_12-4-删除索引" tabindex="-1"><a class="header-anchor" href="#_12-4-删除索引"><span>12.4 删除索引</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">alter table 表名 drop primary;</span>
<span class="line">alter table 表名 drop index 索引名;</span>
<span class="line">drop index 索引名 on 表名;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_12-5-慢查询" tabindex="-1"><a class="header-anchor" href="#_12-5-慢查询"><span>12.5 慢查询</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">explain</span>
<span class="line">select <span class="token operator">*</span> from users where userno<span class="token operator">=</span><span class="token number">4593</span><span class="token punctuation">;</span></span>
<span class="line">alter table users add <span class="token function">index</span><span class="token punctuation">(</span>userno<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="http://img.zhufengpeixun.cn/mysqlexplain.jpg" alt="mysqlexplain"></p><h3 id="_12-6-索引创建的原则" tabindex="-1"><a class="header-anchor" href="#_12-6-索引创建的原则"><span>12.6 索引创建的原则</span></a></h3><ul><li>比较频繁作为查询条件的字段应该创建索引</li><li>唯一性太差的字段不适合单独创建索引，即使频繁作为查询条件</li><li>更新非常频繁的字段不适合作创建索引</li><li>不会出现在where子句中的字段不该创建索引</li></ul>`,305)])])}const o=s(p,[["render",l]]),u=JSON.parse('{"path":"/strong/30.cms-1-mysql.html","title":"","lang":"en-US","frontmatter":{},"git":{"updatedTime":1681290319000,"contributors":[{"name":"yutao","username":"yutao","email":"642231346@qq.com","commits":1,"url":"https://github.com/yutao"}],"changelog":[{"hash":"f5ab8c9d34991ec274f7f652439afe5b2afb6147","time":1681290319000,"email":"642231346@qq.com","author":"yutao","message":"modify"}]},"filePathRelative":"strong/30.cms-1-mysql.md"}');export{o as comp,u as data};
