import{_ as a,c as n,a as t,o as e}from"./app-CD1YpnS1.js";const p={};function l(o,s){return e(),n("div",null,[...s[0]||(s[0]=[t(`<h2 id="_1-软件包管理" tabindex="-1"><a class="header-anchor" href="#_1-软件包管理"><span>1.软件包管理</span></a></h2><ul><li>RPM是RedHat Package Manager（RedHat软件包管理工具）类似Windows里面的&quot;添加/删除程序&quot;</li></ul><h3 id="_1-1-软件包的分类" tabindex="-1"><a class="header-anchor" href="#_1-1-软件包的分类"><span>1.1 软件包的分类</span></a></h3><ul><li>源码包(需要经过编译，把人所编写的源代码编译成机器语言才能运行) <ul><li>优点 <ul><li>开源免费</li><li>可以自由配置功能</li><li>编译安装更适合自己系统，更稳定</li><li>卸载方便</li></ul></li><li>缺点 <ul><li>安装过程比较复杂</li><li>编译过程比较长</li><li>安装过程一旦报错，非常难以排查</li></ul></li></ul></li><li>二进制包(把源代码包经过编译生成0/1二进制，PRM包、系统默认的安装包) <ul><li>优点 <ul><li>包管理系统比较简单，只要通过简单的命令就可以实现包的安装、升级、查询和卸载</li><li>安装速度比源码包快很多</li></ul></li><li>缺点 <ul><li>经过编译则不能看到源代码</li><li>功能选择不灵活</li><li>依赖性比较麻烦</li></ul></li></ul></li><li>脚本安装包(就是把复杂的安装过程写成了脚本，可以一键安装，本质上安装的还是源代码包和二进制包) <ul><li>优点是安装简单</li><li>缺点是失去了自定义性</li></ul></li></ul><h3 id="_1-2-rpm命令管理" tabindex="-1"><a class="header-anchor" href="#_1-2-rpm命令管理"><span>1.2 RPM命令管理</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">mkdir /mnt/cdrom</span>
<span class="line">mount /dev/sr0 /mnt/cdrom</span>
<span class="line">cd /mnt/cdrom/Packages</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-3-rpm包命名原则" tabindex="-1"><a class="header-anchor" href="#_1-3-rpm包命名原则"><span>1.3 RPM包命名原则</span></a></h3><ul><li>httpd-2.2.15-15.el6.centos.1.i686.rpm <ul><li>httpd软件包名</li><li>2.2.15软件版本</li><li>15 软件发布的次数</li><li>el6.centos 适合的Linux平台</li><li>i686 适合的硬件平台</li><li>rpm rpm 包的扩展名</li></ul></li></ul><h3 id="_1-4-rpm包依赖性" tabindex="-1"><a class="header-anchor" href="#_1-4-rpm包依赖性"><span>1.4 RPM包依赖性</span></a></h3><ul><li>树形依赖 a-&gt;b-&gt;c</li><li>环形依赖 a-&gt;b-&gt;c-&gt;a</li><li>模块依赖 <a href="http://www.rpmfind.net" target="_blank" rel="noopener noreferrer">http://www.rpmfind.net</a></li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">rpm <span class="token operator">-</span>ivh mysql<span class="token operator">-</span>connector<span class="token operator">-</span>odbc<span class="token operator">-</span><span class="token number">5.1</span><span class="token punctuation">.</span>5r1144<span class="token operator">-</span><span class="token number">7</span><span class="token punctuation">.</span>el6<span class="token punctuation">.</span>i686<span class="token punctuation">.</span>rpm </span>
<span class="line">rpm <span class="token operator">-</span>ivh unixODBC<span class="token operator">-</span><span class="token number">2.2</span><span class="token number">.14</span><span class="token operator">-</span><span class="token number">11</span><span class="token punctuation">.</span>el6<span class="token punctuation">.</span>i686<span class="token punctuation">.</span>rpm </span>
<span class="line">rpm <span class="token operator">-</span>ivh mysql<span class="token operator">-</span>connector<span class="token operator">-</span>odbc<span class="token operator">-</span><span class="token number">5.1</span><span class="token punctuation">.</span>5r1144<span class="token operator">-</span><span class="token number">7</span><span class="token punctuation">.</span>el6<span class="token punctuation">.</span>i686<span class="token punctuation">.</span>rpm </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-5-包全名" tabindex="-1"><a class="header-anchor" href="#_1-5-包全名"><span>1.5 包全名</span></a></h3><ul><li>如果操作的是没有安装过的软件包时，使用包全名，而且要注意路径正确。</li><li>如果是要操作已经安装的软件包时，要使用包名，是搜索<code>/var/lib/rpm</code>中的数据库</li></ul><h3 id="_1-6-rpm安装" tabindex="-1"><a class="header-anchor" href="#_1-6-rpm安装"><span>1.6 RPM安装</span></a></h3><ul><li>rpm -ivh 包全名</li><li>选项 <ul><li>-i(install) 安装</li><li>-v(verbose) 显示详细安装停下</li><li>-h(hash) 显示进度</li><li>--nodeps 不检测依赖性，正式环境不能使用</li></ul></li></ul><h3 id="_1-7-rpm安装" tabindex="-1"><a class="header-anchor" href="#_1-7-rpm安装"><span>1.7 RPM安装</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">rpm <span class="token operator">-</span>ivh httpd<span class="token operator">-</span><span class="token number">2.2</span><span class="token number">.15</span><span class="token operator">-</span><span class="token number">15</span><span class="token punctuation">.</span>el6<span class="token punctuation">.</span>centos<span class="token punctuation">.</span><span class="token number">1</span><span class="token punctuation">.</span>i686<span class="token punctuation">.</span>rpm </span>
<span class="line">rpm <span class="token operator">-</span>ivh httpd<span class="token operator">-</span>devel<span class="token operator">-</span><span class="token number">2.2</span><span class="token number">.15</span><span class="token operator">-</span><span class="token number">15</span><span class="token punctuation">.</span>el6<span class="token punctuation">.</span>centos<span class="token punctuation">.</span><span class="token number">1</span><span class="token punctuation">.</span>i686<span class="token punctuation">.</span>rpm </span>
<span class="line">rpm <span class="token operator">-</span>ivh httpd<span class="token operator">-</span>manual<span class="token operator">-</span><span class="token number">2.2</span><span class="token number">.15</span><span class="token operator">-</span><span class="token number">15</span><span class="token punctuation">.</span>el6<span class="token punctuation">.</span>centos<span class="token punctuation">.</span><span class="token number">1</span><span class="token punctuation">.</span>noarch<span class="token punctuation">.</span>rpm </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">rpm <span class="token operator">-</span>ivh httpd<span class="token operator">-</span><span class="token number">2.2</span><span class="token number">.15</span><span class="token operator">-</span><span class="token number">15</span><span class="token punctuation">.</span>el6<span class="token punctuation">.</span>centos<span class="token punctuation">.</span><span class="token number">1</span><span class="token punctuation">.</span>i686<span class="token punctuation">.</span>rpm </span>
<span class="line">rpm <span class="token operator">-</span>ivh apr<span class="token operator">-</span>util<span class="token operator">-</span>ldap<span class="token operator">-</span><span class="token number">1.3</span><span class="token number">.9</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">.</span>el6_0<span class="token punctuation">.</span><span class="token number">1</span><span class="token punctuation">.</span>i686<span class="token punctuation">.</span>rpm </span>
<span class="line">rpm <span class="token operator">-</span>ivh apr<span class="token operator">-</span>util<span class="token operator">-</span><span class="token number">1.3</span><span class="token number">.9</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">.</span>el6_0<span class="token punctuation">.</span><span class="token number">1</span><span class="token punctuation">.</span>i686<span class="token punctuation">.</span>rpm </span>
<span class="line"></span>
<span class="line">rpm <span class="token operator">-</span>ivh apr<span class="token operator">-</span><span class="token number">1.3</span><span class="token number">.9</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">.</span>el6_1<span class="token punctuation">.</span><span class="token number">2</span><span class="token punctuation">.</span>i686<span class="token punctuation">.</span>rpm </span>
<span class="line">rpm <span class="token operator">-</span>ivh apr<span class="token operator">-</span>util<span class="token operator">-</span><span class="token number">1.3</span><span class="token number">.9</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">.</span>el6_0<span class="token punctuation">.</span><span class="token number">1</span><span class="token punctuation">.</span>i686<span class="token punctuation">.</span>rpm </span>
<span class="line">rpm <span class="token operator">-</span>ivh apr<span class="token operator">-</span>util<span class="token operator">-</span>ldap<span class="token operator">-</span><span class="token number">1.3</span><span class="token number">.9</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">.</span>el6_0<span class="token punctuation">.</span><span class="token number">1</span><span class="token punctuation">.</span>i686<span class="token punctuation">.</span>rpm </span>
<span class="line">rpm <span class="token operator">-</span>ivh httpd<span class="token operator">-</span><span class="token number">2.2</span><span class="token number">.15</span><span class="token operator">-</span><span class="token number">15</span><span class="token punctuation">.</span>el6<span class="token punctuation">.</span>centos<span class="token punctuation">.</span><span class="token number">1</span><span class="token punctuation">.</span>i686<span class="token punctuation">.</span>rpm </span>
<span class="line"></span>
<span class="line">rpm <span class="token operator">-</span>ivh httpd<span class="token operator">-</span>tools<span class="token operator">-</span><span class="token number">2.2</span><span class="token number">.15</span><span class="token operator">-</span><span class="token number">15</span><span class="token punctuation">.</span>el6<span class="token punctuation">.</span>centos<span class="token punctuation">.</span><span class="token number">1</span><span class="token punctuation">.</span>i686<span class="token punctuation">.</span>rpm </span>
<span class="line">rpm <span class="token operator">-</span>ivh httpd<span class="token operator">-</span><span class="token number">2.2</span><span class="token number">.15</span><span class="token operator">-</span><span class="token number">15</span><span class="token punctuation">.</span>el6<span class="token punctuation">.</span>centos<span class="token punctuation">.</span><span class="token number">1</span><span class="token punctuation">.</span>i686<span class="token punctuation">.</span>rpm </span>
<span class="line"></span>
<span class="line">rpm <span class="token operator">-</span>ivh httpd<span class="token operator">-</span>devel<span class="token operator">-</span><span class="token number">2.2</span><span class="token number">.15</span><span class="token operator">-</span><span class="token number">15</span><span class="token punctuation">.</span>el6<span class="token punctuation">.</span>centos<span class="token punctuation">.</span><span class="token number">1</span><span class="token punctuation">.</span>i686<span class="token punctuation">.</span>rpm </span>
<span class="line">rpm <span class="token operator">-</span>ivh httpd<span class="token operator">-</span>manual<span class="token operator">-</span><span class="token number">2.2</span><span class="token number">.15</span><span class="token operator">-</span><span class="token number">15</span><span class="token punctuation">.</span>el6<span class="token punctuation">.</span>centos<span class="token punctuation">.</span><span class="token number">1</span><span class="token punctuation">.</span>noarch<span class="token punctuation">.</span>rpm </span>
<span class="line">rpm <span class="token operator">-</span>ivh httpd<span class="token operator">-</span>devel<span class="token operator">-</span><span class="token number">2.2</span><span class="token number">.15</span><span class="token operator">-</span><span class="token number">15</span><span class="token punctuation">.</span>el6<span class="token punctuation">.</span>centos<span class="token punctuation">.</span><span class="token number">1</span><span class="token punctuation">.</span>i686<span class="token punctuation">.</span>rpm </span>
<span class="line">rpm <span class="token operator">-</span>ivh apr<span class="token operator">-</span>devel<span class="token operator">-</span><span class="token number">1.3</span><span class="token number">.9</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">.</span>el6_1<span class="token punctuation">.</span><span class="token number">2</span><span class="token punctuation">.</span>i686<span class="token punctuation">.</span>rpm </span>
<span class="line">rpm <span class="token operator">-</span>ivh apr<span class="token operator">-</span>util<span class="token operator">-</span>devel<span class="token operator">-</span><span class="token number">1.3</span><span class="token number">.9</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">.</span>el6_0<span class="token punctuation">.</span><span class="token number">1</span><span class="token punctuation">.</span>i686<span class="token punctuation">.</span>rpm </span>
<span class="line">rpm <span class="token operator">-</span>ivh expat<span class="token operator">-</span>devel<span class="token operator">-</span><span class="token number">2.0</span><span class="token number">.1</span><span class="token operator">-</span><span class="token number">11</span><span class="token punctuation">.</span>el6_2<span class="token punctuation">.</span>i686<span class="token punctuation">.</span>rpm </span>
<span class="line">rpm <span class="token operator">-</span>ivh openldap<span class="token operator">-</span>devel<span class="token operator">-</span><span class="token number">2.4</span><span class="token number">.23</span><span class="token operator">-</span><span class="token number">26</span><span class="token punctuation">.</span>el6<span class="token punctuation">.</span>i686<span class="token punctuation">.</span>rpm </span>
<span class="line">rpm <span class="token operator">-</span>ivh cyrus<span class="token operator">-</span>sasl<span class="token operator">-</span>devel<span class="token operator">-</span><span class="token number">2.1</span><span class="token number">.23</span><span class="token operator">-</span><span class="token number">13</span><span class="token punctuation">.</span>el6<span class="token punctuation">.</span>i686<span class="token punctuation">.</span>rpm </span>
<span class="line">rpm <span class="token operator">-</span>ivh httpd<span class="token operator">-</span>devel<span class="token operator">-</span><span class="token number">2.2</span><span class="token number">.15</span><span class="token operator">-</span><span class="token number">15</span><span class="token punctuation">.</span>el6<span class="token punctuation">.</span>centos<span class="token punctuation">.</span><span class="token number">1</span><span class="token punctuation">.</span>i686<span class="token punctuation">.</span>rpm </span>
<span class="line">rpm <span class="token operator">-</span>ivh apr<span class="token operator">-</span>util<span class="token operator">-</span>devel<span class="token operator">-</span><span class="token number">1.3</span><span class="token number">.9</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">.</span>el6_0<span class="token punctuation">.</span><span class="token number">1</span><span class="token punctuation">.</span>i686<span class="token punctuation">.</span>rpm </span>
<span class="line">rpm <span class="token operator">-</span>ivh openldap<span class="token operator">-</span>devel<span class="token operator">-</span><span class="token number">2.4</span><span class="token number">.23</span><span class="token operator">-</span><span class="token number">26</span><span class="token punctuation">.</span>el6<span class="token punctuation">.</span>i686<span class="token punctuation">.</span>rpm </span>
<span class="line">rpm <span class="token operator">-</span>ivh httpd<span class="token operator">-</span>devel<span class="token operator">-</span><span class="token number">2.2</span><span class="token number">.15</span><span class="token operator">-</span><span class="token number">15</span><span class="token punctuation">.</span>el6<span class="token punctuation">.</span>centos<span class="token punctuation">.</span><span class="token number">1</span><span class="token punctuation">.</span>i686<span class="token punctuation">.</span>rpm </span>
<span class="line">rpm <span class="token operator">-</span>ivh apr<span class="token operator">-</span>util<span class="token operator">-</span>devel<span class="token operator">-</span><span class="token number">1.3</span><span class="token number">.9</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">.</span>el6_0<span class="token punctuation">.</span><span class="token number">1</span><span class="token punctuation">.</span>i686<span class="token punctuation">.</span>rpm </span>
<span class="line">rpm <span class="token operator">-</span>ivh httpd<span class="token operator">-</span>devel<span class="token operator">-</span><span class="token number">2.2</span><span class="token number">.15</span><span class="token operator">-</span><span class="token number">15</span><span class="token punctuation">.</span>el6<span class="token punctuation">.</span>centos<span class="token punctuation">.</span><span class="token number">1</span><span class="token punctuation">.</span>i686<span class="token punctuation">.</span>rpm </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-8-rpm包升级" tabindex="-1"><a class="header-anchor" href="#_1-8-rpm包升级"><span>1.8 RPM包升级</span></a></h3><ul><li>rpm -Uvh 包全名 <ul><li>-U(upgrade) 升级</li></ul></li><li>如果包没有安装过，则和安装是同等效果</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">rpm <span class="token operator">-</span>ivh httpd<span class="token operator">-</span>devel<span class="token operator">-</span><span class="token number">2.2</span><span class="token number">.15</span><span class="token operator">-</span><span class="token number">15</span><span class="token punctuation">.</span>el6<span class="token punctuation">.</span>centos<span class="token punctuation">.</span><span class="token number">1</span><span class="token punctuation">.</span>i686<span class="token punctuation">.</span>rpm</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_1-9-卸载" tabindex="-1"><a class="header-anchor" href="#_1-9-卸载"><span>1.9 卸载</span></a></h3><ul><li>rpm -e 包名 <ul><li>-e(erase) 卸载</li><li>--nodeps不检查依赖性</li></ul></li><li>安装的时候先安装被依赖包，再安装依赖包</li><li>卸载的时候先卸载依赖包，再卸载被依赖包</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">rpm -e httpd</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_1-10-查询" tabindex="-1"><a class="header-anchor" href="#_1-10-查询"><span>1.10 查询</span></a></h3><table><thead><tr><th style="text-align:left;">命令</th><th style="text-align:left;">参数</th><th style="text-align:left;">含义</th></tr></thead><tbody><tr><td style="text-align:left;">rpm -q 包名</td><td style="text-align:left;">-q(query) 查询</td><td style="text-align:left;">查询包是否安装</td></tr><tr><td style="text-align:left;">rpm -qa 包名</td><td style="text-align:left;">-a(all) 查询</td><td style="text-align:left;">查询所有已经安装的RPM包</td></tr><tr><td style="text-align:left;">rpm -qi 包名</td><td style="text-align:left;">-i(information)</td><td style="text-align:left;">查询软件信息</td></tr><tr><td style="text-align:left;">rpm -qip 包名</td><td style="text-align:left;">-p(package)</td><td style="text-align:left;">查询未安装包的信息</td></tr><tr><td style="text-align:left;">rpm -ql 包名</td><td style="text-align:left;">-l(list) -p(package)</td><td style="text-align:left;">查询安装包都安装了哪些文件</td></tr><tr><td style="text-align:left;">rpm -qf 文件名</td><td style="text-align:left;">-f(file)</td><td style="text-align:left;">查询某个文件属于哪个包</td></tr><tr><td style="text-align:left;">rpm -qR 包名</td><td style="text-align:left;">-R(requires) -p(package)</td><td style="text-align:left;">查询软件名的依赖性</td></tr></tbody></table><p>默认安装位置</p><table><thead><tr><th style="text-align:left;">命令</th><th style="text-align:left;">参数</th></tr></thead><tbody><tr><td style="text-align:left;">/etc/</td><td style="text-align:left;">配置文件的安装目录</td></tr><tr><td style="text-align:left;">/usr/bin</td><td style="text-align:left;">可执行的命令安装目录</td></tr><tr><td style="text-align:left;">/usr/lib</td><td style="text-align:left;">程序所使用的函数库保存位置</td></tr><tr><td style="text-align:left;">/usr/share/doc</td><td style="text-align:left;">基本的软件使用手册保存位置</td></tr><tr><td style="text-align:left;">/usr/share/man</td><td style="text-align:left;">帮助文件保存位置</td></tr></tbody></table><h3 id="_1-11-校验" tabindex="-1"><a class="header-anchor" href="#_1-11-校验"><span>1.11 校验</span></a></h3><p>|命令|参数| |:---| |rpm -V 包名|</p><p><code>/etc/httpd/conf/httpd.conf</code></p><p>验证信息内容</p><table><thead><tr><th style="text-align:left;">参数</th><th style="text-align:left;">含义</th></tr></thead><tbody><tr><td style="text-align:left;">S(Size)</td><td style="text-align:left;">文件大小是否改变</td></tr><tr><td style="text-align:left;">M(Mode)</td><td style="text-align:left;">文件的类型或者文件的权限(rwx)是否被改变</td></tr><tr><td style="text-align:left;">5(Md5)</td><td style="text-align:left;">文件MD5校验和是否改变(文件内容是否改变)</td></tr><tr><td style="text-align:left;">D(Device)</td><td style="text-align:left;">设备的主从代码是否改变</td></tr><tr><td style="text-align:left;">L(Location)</td><td style="text-align:left;">文件路径是否改变</td></tr><tr><td style="text-align:left;">U(User)</td><td style="text-align:left;">文件的属主(所有者)是否改变</td></tr><tr><td style="text-align:left;">G(Group)</td><td style="text-align:left;">文件的属组是否改变</td></tr><tr><td style="text-align:left;">T(Time)</td><td style="text-align:left;">文件的修改时间是否改变</td></tr></tbody></table><p>每个设备号又分为主设备号和次设备号。主设备号用来区分不同种类的设备，而次设备号用来区分同一类型的多个设备</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line"> </span>
<span class="line">brw-rw----. 1 root disk      8,   0 4月   6 17:50 sda</span>
<span class="line">brw-rw----. 1 root disk      8,   1 4月   6 17:50 sda1</span>
<span class="line">brw-rw----. 1 root disk      8,   2 4月   6 17:50 sda2</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th style="text-align:left;">参数</th><th style="text-align:left;">含义</th></tr></thead><tbody><tr><td style="text-align:left;">c(config file)</td><td style="text-align:left;">配置文件</td></tr><tr><td style="text-align:left;">d(documentation)</td><td style="text-align:left;">普通文档</td></tr><tr><td style="text-align:left;">g(ghost file)</td><td style="text-align:left;">文件根本不应该属于这个软件包</td></tr><tr><td style="text-align:left;">L(license file)</td><td style="text-align:left;">授权文件</td></tr><tr><td style="text-align:left;">r(readme)</td><td style="text-align:left;">描述文件</td></tr></tbody></table><h3 id="_1-12-文件提取" tabindex="-1"><a class="header-anchor" href="#_1-12-文件提取"><span>1.12 文件提取</span></a></h3><ul><li>rpm2cpio 包全名 | cpio -idv .文件绝对路径</li><li>rpm2cpid 将rpm包转换为cpio格式的命令</li><li>cpio 是一个标准工具，用于创建软件档案和从档案文件中提取文件</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">rpm2cpio httpd<span class="token operator">-</span><span class="token number">2.2</span><span class="token number">.15</span><span class="token operator">-</span><span class="token number">15</span><span class="token punctuation">.</span>el6<span class="token punctuation">.</span>centos<span class="token punctuation">.</span><span class="token number">1</span><span class="token punctuation">.</span>i686<span class="token punctuation">.</span>rpm <span class="token operator">|</span> cpio <span class="token operator">-</span>idv <span class="token operator">/</span>etc<span class="token operator">/</span>httpd<span class="token operator">/</span>conf<span class="token operator">/</span>httpd<span class="token punctuation">.</span>conf</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>cpio 选项 &lt; [文件|设备]</li><li>选项 <ul><li>-i copy-in模式，还原</li><li>-d 还原时自动新建目录</li><li>-v 显示还原过程</li></ul></li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">rpm2cpio <span class="token operator">/</span>mnt<span class="token operator">/</span>cdrom<span class="token operator">/</span>Packages<span class="token operator">/</span>httpd<span class="token operator">-</span><span class="token number">2.2</span><span class="token number">.15</span><span class="token operator">-</span><span class="token number">15</span><span class="token punctuation">.</span>el6<span class="token punctuation">.</span>centos<span class="token punctuation">.</span><span class="token number">1</span><span class="token punctuation">.</span>i686<span class="token punctuation">.</span>rpm <span class="token operator">|</span> cpio <span class="token operator">-</span>idv <span class="token punctuation">.</span><span class="token operator">/</span>etc<span class="token operator">/</span>httpd<span class="token operator">/</span>conf<span class="token operator">/</span>httpd<span class="token punctuation">.</span>conf</span>
<span class="line">cp <span class="token punctuation">.</span><span class="token operator">/</span>etc<span class="token operator">/</span>httpd<span class="token operator">/</span>conf<span class="token operator">/</span>httpd<span class="token punctuation">.</span>conf <span class="token operator">/</span>etc<span class="token operator">/</span>httpd<span class="token operator">/</span>conf<span class="token operator">/</span>httpd<span class="token punctuation">.</span>conf</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-yum在线管理" tabindex="-1"><a class="header-anchor" href="#_3-yum在线管理"><span>3. YUM在线管理</span></a></h2><ul><li>yum = Yellow dog Updater, Modified主要功能是更方便的添加/删除/更新RPM包.它能自动解决包的倚赖性问题.</li><li>这是rpm包的在线管理命令</li><li>将所有的软件名放到官方服务器上，当进行YUM在线安装时，可以自动解决依赖性问题</li><li>/etc/yum.repos.d/ <ul><li>CentOS-Base.repo</li><li>CentOS-Debuginfo.repo</li><li>CentOS-Media.repo</li><li>CentOS-Vault.repo</li></ul></li></ul><h3 id="_3-1-centos-base-repo" tabindex="-1"><a class="header-anchor" href="#_3-1-centos-base-repo"><span>3.1 CentOS-Base.repo</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">[base]</span>
<span class="line">name=CentOS-$releasever - Base</span>
<span class="line">mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=os</span>
<span class="line"> </span>
<span class="line">gpgcheck=1</span>
<span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-6</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th style="text-align:left;">字段</th><th style="text-align:left;">含义</th></tr></thead><tbody><tr><td style="text-align:left;">base</td><td style="text-align:left;">容器名称，一定要放在[]中</td></tr><tr><td style="text-align:left;">name</td><td style="text-align:left;">容器说明，可以自己随便写</td></tr><tr><td style="text-align:left;">mirrorlist</td><td style="text-align:left;">镜像站点，可以注释掉</td></tr><tr><td style="text-align:left;">baseurl</td><td style="text-align:left;">YUM源服务器的地址，默认是CentOS官方的YUM源</td></tr><tr><td style="text-align:left;">enable</td><td style="text-align:left;">此容器是否生效 不写或者写成enable=1表示生效，写成enable=0表示不生效</td></tr><tr><td style="text-align:left;">gpgcheck</td><td style="text-align:left;">如果是1就是指 RPM的数字证书生效,如果是0则表示不生效</td></tr><tr><td style="text-align:left;">gpgkey</td><td style="text-align:left;">数字证书的公钥文件保存位置，不用改</td></tr></tbody></table><h2 id="_4-光盘搭建yum源" tabindex="-1"><a class="header-anchor" href="#_4-光盘搭建yum源"><span>4. 光盘搭建YUM源</span></a></h2><h3 id="_4-1-挂载光盘" tabindex="-1"><a class="header-anchor" href="#_4-1-挂载光盘"><span>4.1 挂载光盘</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">mkdir /mnt/cdrom</span>
<span class="line">mount /dev/cdrom /mnt/cdrom</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-2-失效在线yum源" tabindex="-1"><a class="header-anchor" href="#_4-2-失效在线yum源"><span>4.2 失效在线yum源</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">cd /etc/yum.repos.d</span>
<span class="line">mv CentOS-Base.repo CentOS-Base.repo.bak</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>查看YUM源里有哪些安装包</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">yum list</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>CentOS-Media.repo</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token punctuation">[</span>c6<span class="token operator">-</span>media<span class="token punctuation">]</span></span>
<span class="line">name<span class="token operator">=</span>CentOS<span class="token operator">-</span>$releasever <span class="token operator">-</span> Media</span>
<span class="line">baseurl<span class="token operator">=</span>file<span class="token operator">:</span><span class="token operator">/</span><span class="token comment">//mnt/cdrom</span></span>
<span class="line">gpgcheck<span class="token operator">=</span><span class="token number">1</span></span>
<span class="line">enabled<span class="token operator">=</span><span class="token number">1</span></span>
<span class="line">gpgkey<span class="token operator">=</span>file<span class="token operator">:</span><span class="token operator">/</span><span class="token comment">//etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-6</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-yum命令" tabindex="-1"><a class="header-anchor" href="#_5-yum命令"><span>5. YUM命令</span></a></h2><ul><li>yum安装只需要写包名即可</li></ul><table><thead><tr><th style="text-align:left;">命令</th><th style="text-align:left;">含义</th></tr></thead><tbody><tr><td style="text-align:left;">yum list</td><td style="text-align:left;">查询所有可用软件包列表</td></tr><tr><td style="text-align:left;">yum search 关键字</td><td style="text-align:left;">搜索服务器上所有和关键字相关的包</td></tr><tr><td style="text-align:left;">yum -y install 包名</td><td style="text-align:left;">-y 自动回答yes install安装</td></tr><tr><td style="text-align:left;">yum -y update 包名</td><td style="text-align:left;">-y 自动回答yes update升级</td></tr><tr><td style="text-align:left;">yum -y remove 包名</td><td style="text-align:left;">-y 自动回答yes remove 卸载,卸载有依赖性，所以尽量不要卸载</td></tr><tr><td style="text-align:left;">yum grouplist</td><td style="text-align:left;">列出所有可用的软件组列表</td></tr><tr><td style="text-align:left;">yum groupinstall 软件组名</td><td style="text-align:left;">安装指定的组，组名可以用grouplist查询</td></tr><tr><td style="text-align:left;">yum groupremove 软件组名</td><td style="text-align:left;">卸载指定软件组</td></tr></tbody></table><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">yum -y install gcc  安装C语言安装包</span>
<span class="line">yum install update httpd 升级httpd</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token constant">LANG</span><span class="token operator">=</span>en_US</span>
<span class="line">yum grouplist</span>
<span class="line">yum groupinstall <span class="token string">&quot;Chinese Support&quot;</span></span>
<span class="line"><span class="token constant">LANG</span><span class="token operator">=</span>zh_CN<span class="token punctuation">.</span><span class="token constant">UTF</span><span class="token operator">-</span><span class="token number">8</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-源码包管理" tabindex="-1"><a class="header-anchor" href="#_4-源码包管理"><span>4. 源码包管理</span></a></h2><h3 id="_4-1-安装方式不同" tabindex="-1"><a class="header-anchor" href="#_4-1-安装方式不同"><span>4.1 安装方式不同</span></a></h3><ul><li>RPM包的安装位置是由软件包作者决定的,不需要指定安装位置</li><li>RPM包安装的服务可以使用系统服务管理命令(service)来管理</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">service httpd start</span>
<span class="line">/etc/init.d/httpd start</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>源码包安装在指定的位置当中，一般是 <code>/usr/local/软件名</code></li><li>源码包安装的服务不能被服务命令管理，因为没有安装到默认路径中，所以只能用绝对路径进行服务的管理</li><li>httpd和apache关系，简单理解就是apache2以上版本改称为httpd</li></ul><h3 id="_4-2-安装源码包" tabindex="-1"><a class="header-anchor" href="#_4-2-安装源码包"><span>4.2 安装源码包</span></a></h3><h4 id="_4-2-1-安装准备" tabindex="-1"><a class="header-anchor" href="#_4-2-1-安装准备"><span>4.2.1 安装准备</span></a></h4><ul><li>安装C语言编译器<div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">yum install -y gcc</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ul><h4 id="_4-2-2-安装注意事项" tabindex="-1"><a class="header-anchor" href="#_4-2-2-安装注意事项"><span>4.2.2 安装注意事项</span></a></h4><ul><li>源码包一般放在<code>/usr/local/src</code>目录下</li><li>软件的安装位置 <code>/usr/local</code>,相当于<code>program files</code>目录</li><li>如何确定安装过程是否正常 <ul><li>安装过程能正常中止</li><li>出现 <code>error warning</code> 等提示</li></ul></li></ul><h4 id="_4-2-3-安装过程" tabindex="-1"><a class="header-anchor" href="#_4-2-3-安装过程"><span>4.2.3 安装过程</span></a></h4><h5 id="_4-2-3-1-下载" tabindex="-1"><a class="header-anchor" href="#_4-2-3-1-下载"><span>4.2.3.1 下载</span></a></h5><p><a href="http://httpd.apache.org/download.cgi" target="_blank" rel="noopener noreferrer">下载</a> <a href="http://archive.apache.org/dist/httpd/" target="_blank" rel="noopener noreferrer">镜像下载</a></p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">wget http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>archive<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>org<span class="token operator">/</span>dist<span class="token operator">/</span>httpd<span class="token operator">/</span>httpd<span class="token operator">-</span><span class="token number">2.2</span><span class="token number">.11</span><span class="token punctuation">.</span>tar<span class="token punctuation">.</span>gz</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h5 id="_4-2-3-2-解压" tabindex="-1"><a class="header-anchor" href="#_4-2-3-2-解压"><span>4.2.3.2 解压</span></a></h5><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">tar <span class="token operator">-</span>xzvf httpd<span class="token operator">-</span><span class="token number">2.2</span><span class="token number">.11</span><span class="token punctuation">.</span>tar<span class="token punctuation">.</span>gz</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h5 id="_4-2-3-3-进入解压目录" tabindex="-1"><a class="header-anchor" href="#_4-2-3-3-进入解压目录"><span>4.2.3.3 进入解压目录</span></a></h5><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">cd httpd<span class="token operator">-</span><span class="token number">2.2</span><span class="token number">.11</span><span class="token punctuation">.</span>tar<span class="token punctuation">.</span>gz</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h5 id="_4-2-3-4-configure" tabindex="-1"><a class="header-anchor" href="#_4-2-3-4-configure"><span>4.2.3.4 configure</span></a></h5><p>软件配置与检查</p><ul><li>定义需要的功能选项</li><li>检测系统环境是否符合安装要求</li><li>把定义好的功能选项和检测系统环境的信息都写入<code>Makefile</code>文件中，用于后续的编辑</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">./configure --prefix=/usr/local/httpd</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h5 id="_4-2-3-5-编译和安装" tabindex="-1"><a class="header-anchor" href="#_4-2-3-5-编译和安装"><span>4.2.3.5 编译和安装</span></a></h5><ul><li>把源码编译成二进制文件</li><li>make <ul><li>make clean 一旦编译报错可以执行这一步进行清理</li></ul></li><li>make install</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">make</span>
<span class="line">make install </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>安装帮助文件位置</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">cat <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>src<span class="token operator">/</span>httpd<span class="token operator">-</span><span class="token number">2.2</span><span class="token number">.11</span><span class="token operator">/</span><span class="token constant">INSTALL</span> 这里可以查看安装说明</span>
<span class="line">cat <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>www<span class="token operator">/</span>html<span class="token operator">/</span>index<span class="token punctuation">.</span>html 这是用<span class="token constant">YUM</span>或者说rpm安装的httpd</span>
<span class="line">cat <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>httpd<span class="token operator">/</span>htdocs<span class="token operator">/</span>index<span class="token punctuation">.</span>html  这是用源码安装的httpd</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_4-2-3-6-源码包的卸载" tabindex="-1"><a class="header-anchor" href="#_4-2-3-6-源码包的卸载"><span>4.2.3.6 源码包的卸载</span></a></h5><ul><li>不需要卸载命令，直接删除安装目录即可，不会遗留任何垃圾文件</li></ul><h2 id="_5-脚本安装包" tabindex="-1"><a class="header-anchor" href="#_5-脚本安装包"><span>5. 脚本安装包</span></a></h2><ul><li>脚本包安装的也是RPM包和源码包</li><li>优点 <ul><li>简单快速方便</li></ul></li><li>缺点 <ul><li>不能定义安装的版本</li><li>不能定义需要的功能</li></ul></li></ul><h3 id="_5-1-nginx" tabindex="-1"><a class="header-anchor" href="#_5-1-nginx"><span>5.1 nginx</span></a></h3><ul><li>nginx是一款自由的、开源的、高性能的HTTP服务器和反向代理服务器</li><li>nginx可以作为一个HTTP服务器进行网站的发布处理，另外nginx可以作为反向代理进行负载均衡的实现</li></ul><table><thead><tr><th style="text-align:left;">功能</th><th style="text-align:left;">Apache/httpd</th><th style="text-align:left;">Nginx</th></tr></thead><tbody><tr><td style="text-align:left;">Proxy代理</td><td style="text-align:left;">非常好</td><td style="text-align:left;">非常好</td></tr><tr><td style="text-align:left;">Rewriter</td><td style="text-align:left;">好</td><td style="text-align:left;">非常好</td></tr><tr><td style="text-align:left;">Fcgi</td><td style="text-align:left;">不好</td><td style="text-align:left;">好</td></tr><tr><td style="text-align:left;">热部署</td><td style="text-align:left;">不支持</td><td style="text-align:left;">支持</td></tr><tr><td style="text-align:left;">系统压力比较</td><td style="text-align:left;">很大</td><td style="text-align:left;">很小</td></tr><tr><td style="text-align:left;">稳定性</td><td style="text-align:left;">好</td><td style="text-align:left;">非常好</td></tr><tr><td style="text-align:left;">安全性</td><td style="text-align:left;">好</td><td style="text-align:left;">一般</td></tr><tr><td style="text-align:left;">技术支持</td><td style="text-align:left;">非常好</td><td style="text-align:left;">很少</td></tr><tr><td style="text-align:left;">静态文件处理</td><td style="text-align:left;">一般</td><td style="text-align:left;">非常好</td></tr><tr><td style="text-align:left;">Vhosts虚拟主机</td><td style="text-align:left;">支持</td><td style="text-align:left;">不支持</td></tr><tr><td style="text-align:left;">反向代理</td><td style="text-align:left;">一般</td><td style="text-align:left;">非常好</td></tr><tr><td style="text-align:left;">Session sticky</td><td style="text-align:left;">支持</td><td style="text-align:left;">不支持</td></tr></tbody></table><h3 id="_5-2-安装lnmp" tabindex="-1"><a class="header-anchor" href="#_5-2-安装lnmp"><span>5.2 安装lnmp</span></a></h3><ul><li><a href="https://lnmp.org/" target="_blank" rel="noopener noreferrer">lnmp</a></li><li><a href="https://lnmp.org/install.html" target="_blank" rel="noopener noreferrer">install</a></li></ul><p>下载安装脚本</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">wget http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>soft<span class="token punctuation">.</span>vpser<span class="token punctuation">.</span>net<span class="token operator">/</span>lnmp<span class="token operator">/</span>lnmp1<span class="token punctuation">.</span><span class="token number">5</span><span class="token punctuation">.</span>tar<span class="token punctuation">.</span>gz <span class="token operator">-</span>cO lnmp1<span class="token punctuation">.</span><span class="token number">5</span><span class="token punctuation">.</span>tar<span class="token punctuation">.</span>gz <span class="token operator">&amp;&amp;</span> tar zxf lnmp1<span class="token punctuation">.</span><span class="token number">5</span><span class="token punctuation">.</span>tar<span class="token punctuation">.</span>gz <span class="token operator">&amp;&amp;</span> cd lnmp1<span class="token punctuation">.</span><span class="token number">5</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">.</span><span class="token operator">/</span>install<span class="token punctuation">.</span>sh lnmp</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,98)])])}const i=a(p,[["render",l]]),c=JSON.parse('{"path":"/strong/61.6.devops-install.html","title":"","lang":"en-US","frontmatter":{},"git":{"updatedTime":1681290319000,"contributors":[{"name":"yutao","username":"yutao","email":"642231346@qq.com","commits":1,"url":"https://github.com/yutao"}],"changelog":[{"hash":"f5ab8c9d34991ec274f7f652439afe5b2afb6147","time":1681290319000,"email":"642231346@qq.com","author":"yutao","message":"modify"}]},"filePathRelative":"strong/61.6.devops-install.md"}');export{i as comp,c as data};
