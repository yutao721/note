import{_ as k,c as m,a as l,b as s,e as a,d as e,w as t,r as p,o as g}from"./app-CD1YpnS1.js";const v={};function b(h,n){const o=p("optional"),c=p("droptarget"),r=p("options"),u=p("full"),d=p("maxchunksize"),i=p("write");return g(),m("div",null,[n[27]||(n[27]=l(`<h2 id="_1-什么是mongodb" tabindex="-1"><a class="header-anchor" href="#_1-什么是mongodb"><span>1. 什么是MongoDB</span></a></h2><ul><li>MongoDB是一个基于分布式文件存储的开源数据库系统</li><li>MongoDB 将数据存储为一个文档，数据结构由键值(key=&gt;value)对组成。MongoDB 文档类似于 JSON 对象。字段值可以包含其他文档，数组及文档数组。</li></ul><h2 id="_2-mongodb安装" tabindex="-1"><a class="header-anchor" href="#_2-mongodb安装"><span>2. MongoDB安装</span></a></h2><h3 id="_2-1-windows安装" tabindex="-1"><a class="header-anchor" href="#_2-1-windows安装"><span>2.1 windows安装</span></a></h3><p><a href="https://www.mongodb.org/downloads" target="_blank" rel="noopener noreferrer">Windows官方安装指南</a></p><ul><li><p>mongodb32位安装版 链接: <a href="https://pan.baidu.com/s/1SHJ1vre_CQOE3u-W0zniqQ" target="_blank" rel="noopener noreferrer">https://pan.baidu.com/s/1SHJ1vre_CQOE3u-W0zniqQ</a> 密码: chan</p></li><li><p>MongoDB64位绿色版 链接: <a href="https://pan.baidu.com/s/1EkAB2SrcU1mfMfff_WDxtA" target="_blank" rel="noopener noreferrer">https://pan.baidu.com/s/1EkAB2SrcU1mfMfff_WDxtA</a> 密码: w913</p></li><li><p>mongo客户端 链接: <a href="https://pan.baidu.com/s/1YFxLZ-55D-WFR8os2fXN0A" target="_blank" rel="noopener noreferrer">https://pan.baidu.com/s/1YFxLZ-55D-WFR8os2fXN0A</a> 密码: 61qd</p></li></ul><h3 id="_2-2-mac安装" tabindex="-1"><a class="header-anchor" href="#_2-2-mac安装"><span>2.2 mac安装</span></a></h3><p><a href="https://docs.mongodb.com/manual/tutorial/install-mongodb-on-os-x/" target="_blank" rel="noopener noreferrer">Mac官方安装指南</a></p><ol><li><p>先安装homebrew</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">http://brew.sh/</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>使用brew安装mongodb</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">brew install mongodb</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>再安装可视化工具 <a href="https://robomongo.org/" target="_blank" rel="noopener noreferrer">Robomongo</a></p></li></ol><h2 id="_3-mongodb启动与连接" tabindex="-1"><a class="header-anchor" href="#_3-mongodb启动与连接"><span>3. mongodb启动与连接</span></a></h2><h3 id="_3-1-windows启动服务器端" tabindex="-1"><a class="header-anchor" href="#_3-1-windows启动服务器端"><span>3.1 windows启动服务器端</span></a></h3><ol><li>找到mongodb安装目录,一般是 <code>C:\\Program Files\\MongoDB 2.6 Standard\\bin</code></li><li>按下Shift+鼠标右键,选择在此处打开命令窗口</li><li>在除C盘外的盘符新建一个空目录,如 <code>D:\\Mongodb\\data</code></li><li>在命令行中输入<code>mongod --dbpath=刚创建的空目录</code>,如<div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">mongod --dbpath=D:\\Mongodb\\data</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li>再按回车键</li></ol><p><img src="http://img.zhufengpeixun.cn/mongostart.png" alt=""></p><ul><li>如果出现<code>waiting for connections on port 27017</code>就表示<strong>启动成功</strong>,已经在27017端口上监听了客户端的请求</li><li>注意：<code>--dbpath</code>后的值表示数据库文件的存储路径,而且后面的路径必须事先创建好，必须已经<strong>存在</strong>，否则服务开启失败</li><li>注意：这个命令窗体绝对<strong>不能关</strong>,关闭这个窗口就相当于停止了<code>mongodb</code>服务</li></ul><h2 id="_4-添加到window服务" tabindex="-1"><a class="header-anchor" href="#_4-添加到window服务"><span>4. 添加到window服务</span></a></h2><ul><li>以管理员身份运行命令</li><li>logfile是一个不存在的文件名，而非目录名</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">mongod.exe --logpath C:\\program1\\MongoDB\\bin\\log\\logfile --logappend --dbpath C:\\program1\\MongoDB\\bin\\data --serviceName MongoDB --install</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_4-mongodb基本概念" tabindex="-1"><a class="header-anchor" href="#_4-mongodb基本概念"><span>4. MongoDB基本概念</span></a></h2><ul><li><strong>数据库</strong> MongoDB的单个实例可以容纳<strong>多个</strong>独立的数据库，比如一个学生管理系统就可以对应一个数据库实例</li><li><strong>集合</strong> 数据库是由集合组成的,一个集合用来表示一个<strong>实体</strong>,如学生集合</li><li><strong>文档</strong> 集合是由文档组成的，一个文档表示一条<strong>记录</strong>,比如一位同学张三就是一个文档</li></ul><p><img src="http://img.zhufengpeixun.cn/mongostat.jpg" alt="mongostat"></p><h2 id="_5-数据库操作" tabindex="-1"><a class="header-anchor" href="#_5-数据库操作"><span>5. 数据库操作</span></a></h2><h3 id="_5-1-使用数据库" tabindex="-1"><a class="header-anchor" href="#_5-1-使用数据库"><span>5.1 使用数据库</span></a></h3><p><strong>语法</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">use database_name     </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>database_name 代表数据库的名字</li><li>注：如果此数据库存在，则切换到此数据库下,如果此数据库还不存在也可以切过来,但是并不能立刻创建数据库</li></ul><p>切换到 <code>school</code>数据库下</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">use school</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_5-2-查看所有数据库" tabindex="-1"><a class="header-anchor" href="#_5-2-查看所有数据库"><span>5.2 查看所有数据库</span></a></h3><p><strong>语法</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">show dbs</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>备注: 我们刚创建的数据库<code>school</code>如果不在列表内， 要显示它，我们需要向<code>school</code>数据库插入一些数据</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">db<span class="token punctuation">.</span>students<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;zfpx&#39;</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_5-3-查看当前使用的数据库" tabindex="-1"><a class="header-anchor" href="#_5-3-查看当前使用的数据库"><span>5.3 查看当前使用的数据库</span></a></h3><p><strong>语法</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">db</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>注：db代表的是当前数据库 也就是school这个数据库</li></ul><h3 id="_5-4-删除数据库" tabindex="-1"><a class="header-anchor" href="#_5-4-删除数据库"><span>5.4 删除数据库</span></a></h3><p><strong>语法</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">db.dropDatabase()</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_6-集合操作" tabindex="-1"><a class="header-anchor" href="#_6-集合操作"><span>6. 集合操作</span></a></h2><h3 id="_6-1-查看集合帮助" tabindex="-1"><a class="header-anchor" href="#_6-1-查看集合帮助"><span>6.1 查看集合帮助</span></a></h3><p><strong>语法</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">db.students.help();</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_6-2-查看数据库下的集合" tabindex="-1"><a class="header-anchor" href="#_6-2-查看数据库下的集合"><span>6.2 查看数据库下的集合</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">show collections</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_6-3-创建集合" tabindex="-1"><a class="header-anchor" href="#_6-3-创建集合"><span>6.3 创建集合</span></a></h3><h3 id="_6-3-1-创建一个空集合" tabindex="-1"><a class="header-anchor" href="#_6-3-1-创建一个空集合"><span>6.3.1 创建一个空集合</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">db.createCollection(collection_Name)      </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>collection_Name集合的名称</li></ul><h3 id="_6-3-2-创建集合并插入一个文档" tabindex="-1"><a class="header-anchor" href="#_6-3-2-创建集合并插入一个文档"><span>6.3.2 创建集合并插入一个文档</span></a></h3><ul><li>collection_Name集合的名称</li><li>document要插入的文档</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">db<span class="token punctuation">.</span>collection_Name<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_7-插入文档" tabindex="-1"><a class="header-anchor" href="#_7-插入文档"><span>7. 插入文档</span></a></h2><h3 id="_7-1-insert" tabindex="-1"><a class="header-anchor" href="#_7-1-insert"><span>7.1 insert</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">db<span class="token punctuation">.</span>collection_name<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">\`</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>collection_name 集合的名字</li><li>document 插入的文档</li></ul><blockquote><p>每当插入一条新文档的时候mongodb会自动为此文档生成一个<code>_id</code>属性,_id一定是唯一的，用来唯一标识一个文档 _id也可以直接指定，但如果数据库中此集合下已经有此_id的话插入会失败</p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">db<span class="token punctuation">.</span>students<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;zfpx&#39;</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token function">WriteResult</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string-property property">&quot;nInserted&quot;</span> <span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">db<span class="token punctuation">.</span>students<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;zfpx&#39;</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-2-save" tabindex="-1"><a class="header-anchor" href="#_7-2-save"><span>7.2 save</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">db<span class="token punctuation">.</span>collection_name<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>collection_name 集合的名字</li><li>document 插入的文档</li></ul><blockquote><p>注：如果不指定 _id 字段 save() 方法类似于 insert() 方法。如果指定 _id 字段，则会更新该 _id 的数据。</p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token operator">&gt;</span> db<span class="token punctuation">.</span>students<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;zfpx&#39;</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token function">WriteResult</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string-property property">&quot;nMatched&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;nUpserted&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;nModified&quot;</span> <span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token operator">&gt;</span> db<span class="token punctuation">.</span>students<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;zfpx&#39;</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">100</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token function">WriteResult</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string-property property">&quot;nMatched&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;nUpserted&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;nModified&quot;</span> <span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_8-更新文档" tabindex="-1"><a class="header-anchor" href="#_8-更新文档"><span>8. 更新文档</span></a></h2><h3 id="_8-1-语法" tabindex="-1"><a class="header-anchor" href="#_8-1-语法"><span>8.1 语法</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">db.collection.update(</span>
<span class="line">   &lt;query&gt;,</span>
<span class="line">   &lt;updateObj&gt;,</span>
<span class="line">   {</span>
<span class="line">     upsert: &lt;boolean&gt;,</span>
<span class="line">     multi: &lt;boolean&gt;</span>
<span class="line">   }</span>
<span class="line">)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8-2-参数" tabindex="-1"><a class="header-anchor" href="#_8-2-参数"><span>8.2 参数</span></a></h3><ul><li>query 查询条件,指定要更新符合哪些条件的文档</li><li>update 更新后的对象或指定一些更新的操作符 <ul><li>$set直接指定更新后的值</li><li>$inc在原基础上累加</li></ul></li><li>upsert 可选，这个参数的意思是，如果不存在符合条件的记录时是否插入updateObj. 默认是false,不插入。</li><li>multi 可选，mongodb 默认只更新找到的第一条记录，如果这个参数为true,就更新所有符合条件的记录。</li></ul><h3 id="_8-3-upsert" tabindex="-1"><a class="header-anchor" href="#_8-3-upsert"><span>8.3 upsert</span></a></h3><p>将<code>students</code>集合中数据中<code>name</code>是zfpx2的值修改为zfpx22</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token operator">&gt;</span> db<span class="token punctuation">.</span>students<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;zfpx1&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token function">WriteResult</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string-property property">&quot;nInserted&quot;</span> <span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token operator">&gt;</span> db<span class="token punctuation">.</span>students<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;zfpx2&#39;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">upsert</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token function">WriteResult</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string-property property">&quot;nMatched&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;nUpserted&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;nModified&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8-4-multi" tabindex="-1"><a class="header-anchor" href="#_8-4-multi"><span>8.4 multi</span></a></h3><ul><li>如果有多条name是zfpx2的数据只更新一条,如果想全部更新需要指定<code>{multi:true}</code>的参数<div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">db<span class="token punctuation">.</span>students<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;zfpx2&#39;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">$set</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">multi</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token function">WriteResult</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string-property property">&quot;nMatched&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;nUpserted&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;nModified&quot;</span> <span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h2 id="_9-更新操作符" tabindex="-1"><a class="header-anchor" href="#_9-更新操作符"><span>9. 更新操作符</span></a></h2><h3 id="_9-1-set" tabindex="-1"><a class="header-anchor" href="#_9-1-set"><span>9.1 $set</span></a></h3><p>直接指定更新后的值</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">db<span class="token punctuation">.</span>c3<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;zfpx2&#39;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">$set</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">multi</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_9-2-inc" tabindex="-1"><a class="header-anchor" href="#_9-2-inc"><span>9.2 $inc</span></a></h3><p>在原基础上累加</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">db<span class="token punctuation">.</span>c3<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;zfpx2&#39;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">$inc</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">multi</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_9-3-unset" tabindex="-1"><a class="header-anchor" href="#_9-3-unset"><span>9.3 $unset</span></a></h3><p>删除指定的键</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">db<span class="token punctuation">.</span>c3<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;zfpx2&#39;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">$unset</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">multi</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_9-4-push" tabindex="-1"><a class="header-anchor" href="#_9-4-push"><span>9.4 $push</span></a></h3><p>向数组中添加元素</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">var</span> result <span class="token operator">=</span> db<span class="token punctuation">.</span>student<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;张三&#39;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">$push</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string-property property">&quot;hobbys&quot;</span><span class="token operator">:</span><span class="token string">&quot;smoking&quot;</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_9-5-ne" tabindex="-1"><a class="header-anchor" href="#_9-5-ne"><span>9.5 $ne</span></a></h3><p>$ne类似于MYSQL的 <code>not in</code> 或者<code>not exists</code></p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">db<span class="token punctuation">.</span>student<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;zfpx1&#39;</span><span class="token punctuation">,</span><span class="token literal-property property">hobbys</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$ne</span><span class="token operator">:</span><span class="token string">&#39;smoking&#39;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">$push</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string-property property">&quot;hobbys&quot;</span><span class="token operator">:</span><span class="token string">&quot;smoking&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_9-5-addtoset" tabindex="-1"><a class="header-anchor" href="#_9-5-addtoset"><span>9.5 $addToSet</span></a></h3><p>向集合中添加元素</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">db<span class="token punctuation">.</span>student<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;zfpx1&#39;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">$addToSet</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string-property property">&quot;hobbys&quot;</span><span class="token operator">:</span><span class="token string">&quot;smoking&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_9-6-pull" tabindex="-1"><a class="header-anchor" href="#_9-6-pull"><span>9.6 $pull</span></a></h3><ul><li>向集合中删除元素<div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">db<span class="token punctuation">.</span>student<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;zfpx1&#39;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">$pull</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string-property property">&quot;hobbys&quot;</span><span class="token operator">:</span><span class="token string">&quot;smoking&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ul><h3 id="_9-7-each" tabindex="-1"><a class="header-anchor" href="#_9-7-each"><span>9.7 $each</span></a></h3><p>把数组中的元素逐个添加到集合中</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">var</span> hobbys <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span><span class="token string">&#39;B&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">db<span class="token punctuation">.</span>student<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;zfpx1&#39;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">$addToSet</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">hobbys</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$each</span><span class="token operator">:</span>hobbys<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_9-8-pop" tabindex="-1"><a class="header-anchor" href="#_9-8-pop"><span>9.8 $pop</span></a></h3><p>从数组中移除指定的索引中对应的元素</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">db<span class="token punctuation">.</span>student<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;zfpx1&#39;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">$pop</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">hobbys</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_9-9-修改指定索引元素" tabindex="-1"><a class="header-anchor" href="#_9-9-修改指定索引元素"><span>9.9 修改指定索引元素</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">db<span class="token punctuation">.</span>c3<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;zfpx1&#39;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">$set</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string-property property">&quot;hobbys.0&quot;</span><span class="token operator">:</span><span class="token string">&quot;smoking2&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_10-文档的删除" tabindex="-1"><a class="header-anchor" href="#_10-文档的删除"><span>10. 文档的删除</span></a></h2><p>remove方法是用来移除集合中的数据</p><h3 id="_10-1-语法" tabindex="-1"><a class="header-anchor" href="#_10-1-语法"><span>10.1 语法</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">db.collection.remove(</span>
<span class="line">   &lt;query&gt;,</span>
<span class="line">   {</span>
<span class="line">     justOne: &lt;boolean&gt;</span>
<span class="line">   }</span>
<span class="line">)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_10-2-参数" tabindex="-1"><a class="header-anchor" href="#_10-2-参数"><span>10.2 参数</span></a></h3><ul><li>query :（可选）删除的文档的条件。</li><li>justOne : （可选）如果设为 true 或 1，则只删除匹配到的多个文档中的第一个</li></ul><h3 id="_10-3-实例" tabindex="-1"><a class="header-anchor" href="#_10-3-实例"><span>10.3 实例</span></a></h3><p>删除worker集合里name是zfpx2的所有文档数据</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token operator">&gt;</span> db<span class="token punctuation">.</span>students<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;zfpx2&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token function">WriteResult</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string-property property">&quot;nRemoved&quot;</span> <span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>即使匹配多条也只删除一条</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token operator">&gt;</span> db<span class="token punctuation">.</span>students<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;zfpx2&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">justOne</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token function">WriteResult</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string-property property">&quot;nRemoved&quot;</span> <span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_11-查询文档" tabindex="-1"><a class="header-anchor" href="#_11-查询文档"><span>11. 查询文档</span></a></h2><h3 id="_11-1-find" tabindex="-1"><a class="header-anchor" href="#_11-1-find"><span>11.1 find</span></a></h3><p><strong>语法</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">db.collection_name.find()</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>参数</strong></p><ul><li>collection_name 集合的名字</li></ul><p><strong>实例</strong> 查询students下所有的文档</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">db.students.find()</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_11-2-查询指定列" tabindex="-1"><a class="header-anchor" href="#_11-2-查询指定列"><span>11.2 查询指定列</span></a></h3><p><strong>语法</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">db.collection_name.find({queryWhere},{key:1,key:1})</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>参数列表</strong></p><ul><li>collection_name 集合的名字</li><li>queryWhere 参阅查询条件操作符</li><li>key 指定要返回的列</li><li>1 表示要显示</li></ul><p><strong>实例</strong> 只返回显示age列</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">&gt; db.students.find({},{age:1});</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_11-3-findone" tabindex="-1"><a class="header-anchor" href="#_11-3-findone"><span>11.3 findOne</span></a></h3><p>查询匹配结果的第一条数据 <strong>语法</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">db.collection_name.findOne()</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>实例</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">db.students.findOne()</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_11-4-in" tabindex="-1"><a class="header-anchor" href="#_11-4-in"><span>11.4 $in</span></a></h3><p>查询字段在某个范围内</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">db<span class="token punctuation">.</span>student<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token punctuation">{</span>$<span class="token keyword">in</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_11-5-nin" tabindex="-1"><a class="header-anchor" href="#_11-5-nin"><span>11.5 $nin</span></a></h3><p>查询字段不在某个范围内</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">db<span class="token punctuation">.</span>student<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$nin</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_11-6-not" tabindex="-1"><a class="header-anchor" href="#_11-6-not"><span>11.6 $not</span></a></h3><p>对特定条件取反</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">db<span class="token punctuation">.</span>student<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$not</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$gte</span><span class="token operator">:</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token literal-property property">$lte</span><span class="token operator">:</span><span class="token number">30</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_11-7-array" tabindex="-1"><a class="header-anchor" href="#_11-7-array"><span>11.7 array</span></a></h3><p>对数组的查询</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token comment">//按所有元素匹配</span></span>
<span class="line"><span class="token comment">//let result = db.student.find({friends:[ &quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot; ]});</span></span>
<span class="line"><span class="token comment">//匹配一项 包含A的就可以</span></span>
<span class="line"><span class="token comment">//let result = db.student.find({friends:&quot;A&quot;});</span></span>
<span class="line"><span class="token comment">//$all 必须同时包含A B</span></span>
<span class="line"><span class="token comment">//let result = db.student.find({friends:{$all:[&#39;A&#39;,&quot;B&quot;]}});</span></span>
<span class="line"><span class="token comment">//$in 或者关系 ，包含A或者B</span></span>
<span class="line"><span class="token comment">//let result = db.student.find({friends:{$in:[&#39;A&#39;,&quot;B&quot;]}});</span></span>
<span class="line"><span class="token comment">//$size 按数组的长度去匹配</span></span>
<span class="line"><span class="token comment">//let result = db.student.find({friends:{$size:4}});</span></span>
<span class="line"><span class="token comment">//$slice 只返回数组中的某一部分</span></span>
<span class="line"><span class="token comment">//let result = db.student.find({friends:{$size:5}},{name:1,friends:{$slice:2}});</span></span>
<span class="line"><span class="token comment">//let result = db.student.find({friends:{$size:5}},{name:1,friends:{$slice:-2}});</span></span>
<span class="line"><span class="token literal-property property">$slice</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;$array&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>startIndex<span class="token punctuation">,</span> <span class="token punctuation">]</span> length <span class="token punctuation">]</span> （startIndex可以省略，默认从<span class="token number">0</span>开始）</span>
<span class="line"><span class="token string-property property">&quot;friends&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;B&quot;</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span>   <span class="token string">&quot;friends&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;C&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;D&quot;</span> <span class="token punctuation">]</span></span>
<span class="line">db<span class="token punctuation">.</span>stu<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">friends</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$slice</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token string">&quot;friends&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;B&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;C&quot;</span> <span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_11-8-where" tabindex="-1"><a class="header-anchor" href="#_11-8-where"><span>11.8 where</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">db<span class="token punctuation">.</span>student<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">$where</span><span class="token operator">:</span><span class="token string">&quot;this.age&gt;30&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_11-9-cursor" tabindex="-1"><a class="header-anchor" href="#_11-9-cursor"><span>11.9 cursor</span></a></h3><ul><li>游标不是查询结果，而是查询的一个返回资源或者接口，通过这个接口，可以逐条读取数据</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">var</span> result <span class="token operator">=</span> db<span class="token punctuation">.</span>student<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//while(result.hasNext()){</span></span>
<span class="line"><span class="token comment">//    printjson(result.next());</span></span>
<span class="line"><span class="token comment">//}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_12-条件操作符" tabindex="-1"><a class="header-anchor" href="#_12-条件操作符"><span>12. 条件操作符</span></a></h2><p>条件操作符用于比较两个表达式并从mongoDB集合中获取数据</p><h3 id="_12-1-大于操作符" tabindex="-1"><a class="header-anchor" href="#_12-1-大于操作符"><span>12.1 大于操作符</span></a></h3><p><strong>语法</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">db.collectoin_name.find({&lt;key&gt;:{$gt:&lt;value&gt;}})</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>参数</strong></p><ul><li>collectoin_name 集合名称</li><li>key 字段</li><li>value 值</li></ul><p>查询 age 大于 30的数据</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">db<span class="token punctuation">.</span>students<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$gt</span><span class="token operator">:</span><span class="token number">30</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_12-2-大于等于操作符" tabindex="-1"><a class="header-anchor" href="#_12-2-大于等于操作符"><span>12.2 大于等于操作符</span></a></h3><p><strong>语法</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">db.collectoin_name.find({&lt;key&gt;:{$gte:&lt;value&gt;}})</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>参数</strong></p><ul><li>collectoin_name 集合名称</li><li>key 字段</li><li>value 值</li></ul><p>查询age 3大于等于30 的数据</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">db<span class="token punctuation">.</span>students<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">$gte</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span> </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_12-3-小于操作符" tabindex="-1"><a class="header-anchor" href="#_12-3-小于操作符"><span>12.3 小于操作符</span></a></h3><p><strong>语法</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">db.collectoin_name.find( {&lt;key&gt;:{$lt:&lt;value&gt;}})</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>参数</strong></p><ul><li>collectoin_name集合名称</li><li>key 字段</li><li>value 值</li></ul><p><strong>实例</strong></p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">db<span class="token punctuation">.</span>students<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">$lt</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span> 查询age 小于<span class="token number">30</span>的数据</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_12-4-小于等于操作符" tabindex="-1"><a class="header-anchor" href="#_12-4-小于等于操作符"><span>12.4 小于等于操作符</span></a></h3><p><strong>语法</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">db.collectoin_name.find({&lt;key&gt;:{$lte:&lt;value&gt;}})</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>参数</strong></p><ul><li>collectoin_name集合名词</li><li>key字段</li><li>value值</li></ul><p>查询age 小于等于30的数据</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">db.students.find({age: {$lte: 30}}) </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_12-5-同时使用-gte和-lte" tabindex="-1"><a class="header-anchor" href="#_12-5-同时使用-gte和-lte"><span>12.5 同时使用 $gte和$lte</span></a></h3><p><strong>语法</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">db.collectoin_name.find({&lt;key&gt;:{$gte:&lt;value&gt;},&lt;key&gt;:{$lte:&lt;value&gt;}})</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>参数</strong></p><ul><li>collectoin_name 集合名称</li><li>key 字段</li><li>value 值</li></ul><p><strong>实例</strong> 查询age 大于等于 30 并且 age 小于等于 50 的数据</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">db<span class="token punctuation">.</span>students<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">$gte</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token literal-property property">$lte</span><span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_12-6-等于" tabindex="-1"><a class="header-anchor" href="#_12-6-等于"><span>12.6 等于</span></a></h3><p><strong>语法</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">db.collectoin_name.find({&lt;key&gt;:&lt;value&gt;,&lt;key&gt;:&lt;value&gt;})</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>参数</strong></p><ul><li>collectoin_name集合名词</li><li>key字段</li><li>value值</li></ul><p>查询age = 30的数据</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">db<span class="token punctuation">.</span>students<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">&quot;age&quot;</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">}</span><span class="token punctuation">)</span>\`</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_12-7-使用-id进行查询" tabindex="-1"><a class="header-anchor" href="#_12-7-使用-id进行查询"><span>12.7 使用 _id进行查询</span></a></h3><p><strong>语法</strong></p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">db<span class="token punctuation">.</span>collectoin_name<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">&quot;value&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>参数</strong></p><ul><li>value <code>_id</code>的值</li></ul><p><strong>实例</strong> 查询_id是 562af23062d5a57609133974 数据</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token operator">&gt;</span> db<span class="token punctuation">.</span>students<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span><span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">&quot;5adb666ecd738e9771638985&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">{</span> <span class="token string-property property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">&quot;5adb666ecd738e9771638985&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;zzzz&quot;</span> <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_12-8-查询结果集的条数" tabindex="-1"><a class="header-anchor" href="#_12-8-查询结果集的条数"><span>12.8 查询结果集的条数</span></a></h3><p><strong>语法</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">db.collectoin_name.find().count()</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>参数</strong></p><ul><li>collectoin_name 集合名称</li></ul><p><strong>实例</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">db.students.find().count()</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_12-9-正则匹配" tabindex="-1"><a class="header-anchor" href="#_12-9-正则匹配"><span>12.9 正则匹配</span></a></h3><p><strong>语法</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">db.collection.find({key:/value/})</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>参数</strong></p><ul><li>collectoin_name 集合名称</li><li>key 字段</li><li>value 值</li></ul><p><strong>实例</strong> 查询name里包含zhang的数据</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">db.students.find({name:/value/})</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>查询某个字段的值当中是否以另一个值开头</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">db.students.find({name:/^zhang/})</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_13-与和或" tabindex="-1"><a class="header-anchor" href="#_13-与和或"><span>13. 与和或</span></a></h2><h3 id="_13-1-and" tabindex="-1"><a class="header-anchor" href="#_13-1-and"><span>13.1 and</span></a></h3><p>find方法可以传入多个键(key)，每个键(key)以逗号隔开</p><p><strong>语法</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">db.collection_name.find({key1:value1, key2:value2})</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>实例</strong> 查询name是zfpx并且age是1的数据</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">db<span class="token punctuation">.</span>students<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;zfpx&#39;</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_13-2-or" tabindex="-1"><a class="header-anchor" href="#_13-2-or"><span>13.2 or</span></a></h3><p><strong>语法</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">db.collection_name.find(</span>
<span class="line">   {</span>
<span class="line">      $or: [</span>
<span class="line">   {key1: value1}, {key2:value2}</span>
<span class="line">      ]</span>
<span class="line">   }</span>
<span class="line">)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>实例</strong> 查询age = 30 或者 age = 50 的数据</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">db<span class="token punctuation">.</span>students<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">$or</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">30</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">50</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_13-3-and和or联用" tabindex="-1"><a class="header-anchor" href="#_13-3-and和or联用"><span>13.3 and和or联用</span></a></h3><p><strong>语法</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">db.collection_name.find(</span>
<span class="line">   {</span>
<span class="line">     key1:value1,</span>
<span class="line">     key2:value2,</span>
<span class="line">     $or: [</span>
<span class="line">   {key1: value1},</span>
<span class="line">   {key2:value2}</span>
<span class="line">     ]</span>
<span class="line">   }</span>
<span class="line">)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>实例</strong> 查询 name是zfpx 并且 age是30 或者 age是 50 的数据</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">db<span class="token punctuation">.</span>students<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;zfpx&#39;</span><span class="token punctuation">,</span><span class="token literal-property property">$or</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">30</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">50</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_14-分页查询" tabindex="-1"><a class="header-anchor" href="#_14-分页查询"><span>14. 分页查询</span></a></h2><h3 id="_14-1-limit" tabindex="-1"><a class="header-anchor" href="#_14-1-limit"><span>14.1 limit</span></a></h3><p>读取指定数量的数据记录 <strong>语法</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">db.collectoin_name.find().limit(number)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>参数</strong></p><ul><li>collectoin_name集合</li><li>number读取的条数</li></ul><p><strong>实例</strong> 查询前3条数据</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">db<span class="token punctuation">.</span>students<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_14-2-skip" tabindex="-1"><a class="header-anchor" href="#_14-2-skip"><span>14.2 skip</span></a></h3><p>跳过指定数量的数据，skip方法同样接受一个数字参数作为跳过的记录条数 <strong>语法</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">db.collectoin_name.find().skip(number)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>参数</strong></p><ul><li>collectoin_name集合</li><li>number跳过的条数</li></ul><p><strong>实例</strong> 查询3条以后的数据</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">db<span class="token punctuation">.</span>students<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_14-3-skip-limit" tabindex="-1"><a class="header-anchor" href="#_14-3-skip-limit"><span>14.3 skip+limit</span></a></h3><p>通常用这种方式来实现分页功能 <strong>语法</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">db.collectoin_name.find().skip(skipNum).limit(limitNum)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>参数</strong></p><ul><li>collectoin_name 集合名称</li><li>skipNum 跳过的条数</li><li>limitNum 限制返回的条数</li></ul><p><strong>实例</strong> 查询在4-6之间的数据</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">db<span class="token punctuation">.</span>students<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_14-4-sort排序" tabindex="-1"><a class="header-anchor" href="#_14-4-sort排序"><span>14.4 sort排序</span></a></h3><p>sort()方法可以通过参数指定排序的字段，并使用 1 和 -1 来指定排序的方式，其中 1 为升序排列，而-1是用于降序排列。 <strong>语法</strong></p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">db<span class="token punctuation">.</span>collectoin_name<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">key</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">db<span class="token punctuation">.</span>collectoin_name<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">key</span><span class="token operator">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>参数</strong></p><ul><li>collectoin_name集合</li><li>key表示字段</li></ul><p><strong>实例</strong> 查询出并升序排序 {age:1} age表示按那个字段排序 1表示升序</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">db.students.find().sort({age:1})</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_15-执行脚本" tabindex="-1"><a class="header-anchor" href="#_15-执行脚本"><span>15. 执行脚本</span></a></h2><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">var</span> username <span class="token operator">=</span> <span class="token string">&#39;zfpx&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">var</span> password <span class="token operator">=</span> <span class="token string">&#39;123456&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">var</span> user <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string-property property">&quot;username&quot;</span><span class="token operator">:</span> username<span class="token punctuation">,</span> <span class="token string-property property">&quot;password&quot;</span><span class="token operator">:</span> password <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">var</span> db <span class="token operator">=</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">&#39;students&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//选择users数据库</span></span>
<span class="line"><span class="token keyword">var</span> result <span class="token operator">=</span> db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&#39;write &#39;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">var</span> start <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">var</span> db <span class="token operator">=</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">&#39;students&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">1000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string-property property">&quot;username&quot;</span><span class="token operator">:</span> <span class="token string">&quot;zfpx&quot;</span> <span class="token operator">+</span> i <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">var</span> cost <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> start<span class="token punctuation">;</span></span>
<span class="line"><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&#39;cost &#39;</span> <span class="token operator">+</span> cost <span class="token operator">+</span> <span class="token string">&#39; ms&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">var</span> start <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">var</span> db <span class="token operator">=</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">&#39;students&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">var</span> users <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">1000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    users<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string-property property">&quot;username&quot;</span><span class="token operator">:</span> <span class="token string">&quot;zfpx&quot;</span> <span class="token operator">+</span> i <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line">db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">var</span> cost <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> start<span class="token punctuation">;</span></span>
<span class="line"><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&#39;cost &#39;</span> <span class="token operator">+</span> cost <span class="token operator">+</span> <span class="token string">&#39; ms&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在命令行中执行</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">script<span class="token operator">&gt;</span>mongo <span class="token number">1</span><span class="token punctuation">.</span>js</span>
<span class="line">MongoDB shell version<span class="token operator">:</span> <span class="token number">2.6</span><span class="token number">.7</span></span>
<span class="line">connecting to<span class="token operator">:</span> test</span>
<span class="line">connecting to<span class="token operator">:</span> students</span>
<span class="line">write <span class="token function">WriteResult</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string-property property">&quot;nInserted&quot;</span> <span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_16-备份与导出" tabindex="-1"><a class="header-anchor" href="#_16-备份与导出"><span>16. 备份与导出</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">mongodump</span>
<span class="line">    <span class="token operator">--</span> host <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span></span>
<span class="line">    <span class="token operator">--</span> port <span class="token number">27017</span></span>
<span class="line">    <span class="token operator">--</span> out <span class="token constant">D</span><span class="token operator">:</span><span class="token operator">/</span>databack<span class="token operator">/</span>backup</span>
<span class="line">    <span class="token operator">--</span> collection mycollection</span>
<span class="line">    <span class="token operator">--</span> db test</span>
<span class="line">    <span class="token operator">--</span> username</span>
<span class="line">    <span class="token operator">--</span> password</span>
<span class="line"><span class="token comment">//mongodump --host 127.0.0.1 --port 27017 --out ./backup --collection users --db students</span></span>
<span class="line"><span class="token comment">//db.users.drop();</span></span>
<span class="line"></span>
<span class="line">mongorestore</span>
<span class="line"><span class="token operator">--</span>host</span>
<span class="line"><span class="token operator">--</span>port</span>
<span class="line"><span class="token operator">--</span>username</span>
<span class="line"><span class="token operator">--</span>password</span>
<span class="line"></span>
<span class="line"><span class="token comment">// mongorestore --host 127.0.0.1 --port 27017 ./backup</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_17-权限" tabindex="-1"><a class="header-anchor" href="#_17-权限"><span>17. 权限</span></a></h2><h3 id="_17-1-创建用户" tabindex="-1"><a class="header-anchor" href="#_17-1-创建用户"><span>17.1 创建用户</span></a></h3><ul><li>使用<code>use admin</code>进入我们的admin库</li><li>使用<code>db.createUser</code>方法来创建集合</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">db<span class="token punctuation">.</span><span class="token function">createUser</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">user</span><span class="token operator">:</span><span class="token string">&#39;zfpx&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">pwd</span><span class="token operator">:</span><span class="token string">&#39;123456&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">customData</span><span class="token operator">:</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;zhufengpeixun&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">email</span><span class="token operator">:</span><span class="token string">&#39;zhufengpeixun@126.com&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">9</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">roles</span><span class="token operator">:</span><span class="token punctuation">[</span></span>
<span class="line">        <span class="token punctuation">{</span></span>
<span class="line">          <span class="token literal-property property">role</span><span class="token operator">:</span><span class="token string">&#39;readWrite&#39;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token literal-property property">db</span><span class="token operator">:</span><span class="token string">&#39;school&#39;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">&#39;read&#39;</span></span>
<span class="line">    <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_17-2-查询用户" tabindex="-1"><a class="header-anchor" href="#_17-2-查询用户"><span>17.2 查询用户</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">db.system.users.find();</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_17-3-删除用户" tabindex="-1"><a class="header-anchor" href="#_17-3-删除用户"><span>17.3 删除用户</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">db<span class="token punctuation">.</span>system<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">user</span><span class="token operator">:</span><span class="token string">&#39;zfpx&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_17-4-启动数据库权限检查" tabindex="-1"><a class="header-anchor" href="#_17-4-启动数据库权限检查"><span>17.4 启动数据库权限检查</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">mongod <span class="token operator">--</span>auth</span>
<span class="line">mongo  <span class="token operator">-</span>u zfpx <span class="token operator">-</span>p <span class="token number">123456</span> <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">27017</span><span class="token operator">/</span>admin</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_17-5-鉴权" tabindex="-1"><a class="header-anchor" href="#_17-5-鉴权"><span>17.5 鉴权</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">use admin<span class="token punctuation">;</span></span>
<span class="line">db<span class="token punctuation">.</span><span class="token function">auth</span><span class="token punctuation">(</span><span class="token string">&#39;zfpx&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;zfpx&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>正确返回1，如果错误返回0</li></ul><h2 id="_18-索引" tabindex="-1"><a class="header-anchor" href="#_18-索引"><span>18. 索引</span></a></h2><h3 id="_18-1-准备数据" tabindex="-1"><a class="header-anchor" href="#_18-1-准备数据"><span>18.1 准备数据</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">var</span> db <span class="token operator">=</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">&#39;school&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//选择users数据库</span></span>
<span class="line"><span class="token keyword">var</span> users <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">20</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    users<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span>i<span class="token punctuation">,</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;zfpx&#39;</span><span class="token operator">+</span>i<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token function">print</span><span class="token punctuation">(</span>users<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_18-2-打印出查询时间" tabindex="-1"><a class="header-anchor" href="#_18-2-打印出查询时间"><span>18.2 打印出查询时间</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">var</span> startTime <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">var</span>  db <span class="token operator">=</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">&#39;school&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          </span>
<span class="line"><span class="token keyword">var</span>  records<span class="token operator">=</span>db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;zfpx100&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">records<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">printjson</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token function">print</span><span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> startTime<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_18-3-建立索引" tabindex="-1"><a class="header-anchor" href="#_18-3-建立索引"><span>18.3 建立索引</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">ensureIndex</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_19-附录" tabindex="-1"><a class="header-anchor" href="#_19-附录"><span>19. 附录</span></a></h2><h3 id="_19-1-objectid构成" tabindex="-1"><a class="header-anchor" href="#_19-1-objectid构成"><span>19.1 ObjectId构成</span></a></h3><p>之前我们使用MySQL等关系型数据库时，主键都是设置成自增的。但在分布式环境下，这种方法就不可行了，会产生冲突。为此，MongoDB采用了一个称之为ObjectId的类型来做主键。ObjectId是一个12字节的 BSON 类型字符串。按照字节顺序，一次代表：</p><ul><li>4字节：UNIX时间戳</li><li>3字节：表示运行MongoDB的机器</li><li>2字节：表示生成此_id的进程</li><li>3字节：由一个随机数开始的计数器生成的值</li></ul><h3 id="_19-2-mongodb启动命令mongod参数说明" tabindex="-1"><a class="header-anchor" href="#_19-2-mongodb启动命令mongod参数说明"><span>19.2 Mongodb启动命令mongod参数说明</span></a></h3><table><thead><tr><th style="text-align:left;">选项</th><th style="text-align:left;">含义</th></tr></thead><tbody><tr><td style="text-align:left;">--port</td><td style="text-align:left;">指定服务端口号，默认端口27017</td></tr><tr><td style="text-align:left;">--logpath</td><td style="text-align:left;">指定MongoDB日志文件，注意是指定文件不是目录</td></tr><tr><td style="text-align:left;">--logappend</td><td style="text-align:left;">使用追加的方式写日志</td></tr><tr><td style="text-align:left;">--dbpath</td><td style="text-align:left;">指定数据库路径</td></tr><tr><td style="text-align:left;">--directoryperdb</td><td style="text-align:left;">设置每个数据库将被保存在一个单独的目录</td></tr></tbody></table><h3 id="_19-3-集合命令" tabindex="-1"><a class="header-anchor" href="#_19-3-集合命令"><span>19.3 集合命令</span></a></h3>`,298)),s("ul",null,[n[16]||(n[16]=l(`<li>db.students.help();</li><li>DBCollection help</li><li>db.students.find().help() - show DBCursor help 显示游标帮助</li><li>db.students.count() 显示条数</li><li>db.students.copyTo(newColl) - duplicates collection by copying all docum ents to newColl; no indexes are copied. 把一个旧集合拷贝到一个新的集合，不拷贝索引</li><li>db.students.convertToCapped(maxBytes) - calls {convertToCapped:&#39;students &#39;, size:maxBytes}} command</li><li>db.students.dataSize() 数据大小</li><li>db.students.distinct( key ) - e.g. db.students.distinct( &#39;x&#39; ) 统计唯一的key的数量</li><li>db.students.drop() drop the collection ，删除集合</li><li>db.students.dropIndex(index) - e.g. db.students.dropIndex( &quot;indexName&quot; ) 删除索引 or db.students.dropIndex( { &quot;indexKey&quot; : 1 } )</li><li>db.students.dropIndexes() 删除 所有的索引</li><li>db.students.ensureIndex(keypattern[,options]) - options is an object wit h these possible fields: name, unique, dropDups 添加索引</li><li>db.students.reIndex()</li><li>db.students.find([query],[fields]) - query is an optional query filter. fields is optional set of fields to return. 查找文档<div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">     e.g. db.students.find( {x:</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>77} , {name:1, x:1} )</li><li>db.students.find(...).count() 数量</li><li>db.students.find(...).limit(n) 限制返回的条数</li><li>db.students.find(...).skip(n) 设置跳过的条数</li><li>db.students.find(...).sort(...) 排序</li><li>db.students.findOne([query]) 查找一条</li><li>db.students.findAndModify( { update : ... , remove : bool [, query: {}, sort: {}, &#39;new&#39;: false] } ) 查找并且修改 更新后的值，是否删除，查询条件 排序 是否返回新值</li><li>db.students.getDB() get DB object associated with collection 获得DB</li><li>db.students.getPlanCache() get query plan cache associated with collecti on</li><li>db.students.getIndexes() 获取索引</li><li>db.students.group( { key : ..., initial: ..., reduce : ...[, cond: ...] } ) 分组统计</li><li>db.students.insert(obj) 插入文档</li>`,25)),s("li",null,[n[1]||(n[1]=a("db.students.mapReduce( mapFunction , reduceFunction , ",-1)),e(o,null,{default:t(()=>[...n[0]||(n[0]=[a(") 统计",-1)])]),_:1})]),s("li",null,[n[3]||(n[3]=a("db.students.aggregate( [pipeline], ",-1)),e(o,null,{default:t(()=>[...n[2]||(n[2]=[a(") - performs an agg regation on a collection; returns a cursor 聚合",-1)])]),_:1})]),n[17]||(n[17]=s("li",null,"db.students.remove(query) 删除",-1)),s("li",null,[n[5]||(n[5]=a("db.students.renameCollection( newName , ",-1)),e(c,null,{default:t(()=>[...n[4]||(n[4]=[a(") renames the colle ction. 重命名集合",-1)])]),_:1})]),s("li",null,[n[7]||(n[7]=a("db.students.runCommand( name , ",-1)),e(r,null,{default:t(()=>[...n[6]||(n[6]=[a(") runs a db command with the gi ven name where the first param is the collection name",-1)])]),_:1})]),n[18]||(n[18]=s("li",null,"db.students.save(obj) 保存对象",-1)),n[19]||(n[19]=s("li",null,"db.students.stats() 统计信息",-1)),n[20]||(n[20]=s("li",null,"db.students.storageSize() - includes free space allocated to this collec tion",-1)),n[21]||(n[21]=s("li",null,"db.students.totalIndexSize() - size in bytes of all the indexes",-1)),n[22]||(n[22]=s("li",null,"db.students.totalSize() - storage allocated for all data and indexes",-1)),n[23]||(n[23]=s("li",null,"db.students.update(query, object[, upsert_bool, multi_bool]) - instead o f two flags, you can pass an object with fields: upsert, multi 更新",-1)),s("li",null,[n[9]||(n[9]=a("db.students.validate( ",-1)),e(u,null,{default:t(()=>[...n[8]||(n[8]=[a(") - SLOW",-1)])]),_:1})]),n[24]||(n[24]=s("li",null,"db.students.getShardVersion() - only for use with sharding",-1)),n[25]||(n[25]=s("li",null,"db.students.getShardDistribution() - prints statistics about data distri bution in the cluster",-1)),s("li",null,[n[11]||(n[11]=a("db.students.getSplitKeysForChunks( ",-1)),e(d,null,{default:t(()=>[...n[10]||(n[10]=[a(") - calculates split p oints over all chunks and returns splitter function",-1)])]),_:1})]),n[26]||(n[26]=s("li",null,"db.students.getWriteConcern() - returns the write concern used for any o perations on this collection, inherited from server/db if set",-1)),s("li",null,[n[13]||(n[13]=a("db.students.setWriteConcern( ",-1)),e(i,null,{default:t(()=>[...n[12]||(n[12]=[a(") - sets the write conc ern for writes to the collection",-1)])]),_:1})]),s("li",null,[n[15]||(n[15]=a("db.students.unsetWriteConcern( ",-1)),e(i,null,{default:t(()=>[...n[14]||(n[14]=[a(") - unsets the write concern for writes to the collection",-1)])]),_:1})])]),n[28]||(n[28]=l(`<h2 id="_20-用户和权限" tabindex="-1"><a class="header-anchor" href="#_20-用户和权限"><span>20. 用户和权限</span></a></h2><h3 id="_20-1-角色" tabindex="-1"><a class="header-anchor" href="#_20-1-角色"><span>20.1 角色</span></a></h3><h4 id="_20-1-1-数据库用户角色" tabindex="-1"><a class="header-anchor" href="#_20-1-1-数据库用户角色"><span>20.1.1 数据库用户角色</span></a></h4><p>针对每一个数据库进行控制。</p><ul><li>read :提供了读取所有非系统集合，以及系统集合中的system.indexes, system.js, system.namespaces</li><li>readWrite: 包含了所有read权限，以及修改所有非系统集合的和系统集合中的system.js的权限</li></ul><h4 id="_20-1-2-数据库管理角色" tabindex="-1"><a class="header-anchor" href="#_20-1-2-数据库管理角色"><span>20.1.2 数据库管理角色</span></a></h4><p>每一个数据库包含了下面的数据库管理角色。</p><ul><li>dbOwner：该数据库的所有者，具有该数据库的全部权限。</li><li>dbAdmin：一些数据库对象的管理操作，但是没有数据库的读写权限。（参考：[http://docs.mongodb.org/manual/reference/built-in-roles/#dbAdmin）](http://docs.mongodb.org/manual/reference/built-in-roles/</li><li>userAdmin：为当前用户创建、修改用户和角色。拥有userAdmin权限的用户可以将该数据库的任意权限赋予任意的用户。</li></ul><h4 id="_20-1-3-集群管理权限" tabindex="-1"><a class="header-anchor" href="#_20-1-3-集群管理权限"><span>20.1.3 集群管理权限</span></a></h4><ul><li>admin数据库包含了下面的角色，用户管理整个系统，而非单个数据库。这些权限包含了复制集和共享集群的管理函数。</li><li>clusterAdmin：提供了最大的集群管理功能。相当于clusterManager, clusterMonitor, and hostManager和dropDatabase的权限组合。</li><li>clusterManager：提供了集群和复制集管理和监控操作。拥有该权限的用户可以操作config和local数据库（即分片和复制功能）</li><li>clusterMonitor：仅仅监控集群和复制集。</li><li>hostManager：提供了监控和管理服务器的权限，包括shutdown节点，logrotate, repairDatabase等。 备份恢复权限：admin数据库中包含了备份恢复数据的角色。包括backup、restore等等。</li></ul><h4 id="_20-1-4-所有数据库角色" tabindex="-1"><a class="header-anchor" href="#_20-1-4-所有数据库角色"><span>20.1.4 所有数据库角色</span></a></h4><ul><li>admin数据库提供了一个mongod实例中所有数据库的权限角色：</li><li>readAnyDatabase：具有read每一个数据库权限。但是不包括应用到集群中的数据库。</li><li>readWriteAnyDatabase：具有readWrite每一个数据库权限。但是不包括应用到集群中的数据库。</li><li>userAdminAnyDatabase：具有userAdmin每一个数据库权限，但是不包括应用到集群中的数据库。</li><li>dbAdminAnyDatabase：提供了dbAdmin每一个数据库权限，但是不包括应用到集群中的数据库。</li></ul><h4 id="_20-1-5-超级管理员权限" tabindex="-1"><a class="header-anchor" href="#_20-1-5-超级管理员权限"><span>20.1.5 超级管理员权限</span></a></h4><ul><li>root: dbadmin到admin数据库、useradmin到admin数据库以及UserAdminAnyDatabase。但它不具有备份恢复、直接操作system.*集合的权限，但是拥有root权限的超级用户可以自己给自己赋予这些权限。</li></ul><h4 id="_20-1-6-备份恢复角色" tabindex="-1"><a class="header-anchor" href="#_20-1-6-备份恢复角色"><span>20.1.6 备份恢复角色</span></a></h4><p>backup、restore；</p><h4 id="_20-1-7-内部角色" tabindex="-1"><a class="header-anchor" href="#_20-1-7-内部角色"><span>20.1.7 内部角色</span></a></h4><p>__system</p><h3 id="_20-2-权限配置" tabindex="-1"><a class="header-anchor" href="#_20-2-权限配置"><span>20.2 权限配置</span></a></h3><ul><li><p>数据库用户角色 read readWrite</p></li><li><p>数据库管理角色 dbAdmin <strong>dbOwner</strong> userAdmin</p></li><li><p>集群管理角色 clusterAdmin clusterManager clusterMonitor hostManager</p></li><li><p>备份恢复角色 backup restore</p></li><li><p>所有数据库角色 readAnyDatabase readWriteAnyDatabase userAdminAnyDatabase dbAdminAnyDatabase</p></li><li><p>超级用户角色 <strong>root</strong></p></li><li><p><a href="/etc/mongod.conf" target="_blank" rel="noopener noreferrer">mongod.conf</a> 配置文件</p></li></ul><h4 id="_20-2-1-常见命令" tabindex="-1"><a class="header-anchor" href="#_20-2-1-常见命令"><span>20.2.1 常见命令</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">ps <span class="token operator">-</span>ef <span class="token operator">|</span> grep mongo <span class="token comment">//查看当前进程</span></span>
<span class="line"><span class="token operator">/</span>usr<span class="token operator">/</span>bin<span class="token operator">/</span>mongod <span class="token operator">-</span>f <span class="token operator">/</span>etc<span class="token operator">/</span>mongod<span class="token punctuation">.</span>conf <span class="token comment">//寻找配置文件</span></span>
<span class="line">systemctl restart mongod<span class="token punctuation">.</span>service <span class="token comment">//重启mongodb</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_20-2-2-创建超级管理员" tabindex="-1"><a class="header-anchor" href="#_20-2-2-创建超级管理员"><span>20.2.2 创建超级管理员</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">show users <span class="token comment">//显示所有用户</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_20-2-3-创建用户" tabindex="-1"><a class="header-anchor" href="#_20-2-3-创建用户"><span>20.2.3 创建用户</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">use admin</span>
<span class="line">db<span class="token punctuation">.</span><span class="token function">createUser</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">user</span><span class="token operator">:</span><span class="token string">&#39;admin&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">pwd</span><span class="token operator">:</span><span class="token string">&#39;123456&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">roles</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">role</span><span class="token operator">:</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">,</span><span class="token literal-property property">db</span><span class="token operator">:</span><span class="token string">&#39;admin&#39;</span><span class="token punctuation">}</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_20-2-4-管理员登录" tabindex="-1"><a class="header-anchor" href="#_20-2-4-管理员登录"><span>20.2.4 管理员登录</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">mongo admin <span class="token operator">-</span>u admin <span class="token operator">-</span>p <span class="token number">123456</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_20-2-5-给每个库创创建一个自己的管理员" tabindex="-1"><a class="header-anchor" href="#_20-2-5-给每个库创创建一个自己的管理员"><span>20.2.5 给每个库创创建一个自己的管理员</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">use question<span class="token punctuation">;</span></span>
<span class="line">db<span class="token punctuation">.</span><span class="token function">createUser</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">user</span><span class="token operator">:</span><span class="token string">&#39;questionadmin&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">pwd</span><span class="token operator">:</span><span class="token string">&#39;123456&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">roles</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">role</span><span class="token operator">:</span><span class="token string">&#39;dbOwner&#39;</span><span class="token punctuation">,</span><span class="token literal-property property">db</span><span class="token operator">:</span><span class="token string">&#39;question&#39;</span><span class="token punctuation">}</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_20-2-6-删除用户" tabindex="-1"><a class="header-anchor" href="#_20-2-6-删除用户"><span>20.2.6 删除用户</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">db<span class="token punctuation">.</span><span class="token function">dropUser</span><span class="token punctuation">(</span><span class="token string">&quot;admin&quot;</span><span class="token punctuation">)</span>  <span class="token comment">// 删除某个用户,接受字符串参数</span></span>
<span class="line">db<span class="token punctuation">.</span><span class="token function">dropAllUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// 删除当前库的所有用户</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_20-2-7-更新用户" tabindex="-1"><a class="header-anchor" href="#_20-2-7-更新用户"><span>20.2.7 更新用户</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">db<span class="token punctuation">.</span><span class="token function">updateUser</span><span class="token punctuation">(</span><span class="token string">&#39;admin&#39;</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">pwd</span><span class="token operator">:</span><span class="token string">&#39;password&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_20-2-8-密码认证" tabindex="-1"><a class="header-anchor" href="#_20-2-8-密码认证"><span>20.2.8 密码认证</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">db<span class="token punctuation">.</span><span class="token function">auth</span><span class="token punctuation">(</span><span class="token string">&#39;admin&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;password&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,36))])}const f=k(v,[["render",b]]),x=JSON.parse('{"path":"/strong/29.mongodb-1.html","title":"","lang":"en-US","frontmatter":{},"git":{"updatedTime":1681290319000,"contributors":[{"name":"yutao","username":"yutao","email":"642231346@qq.com","commits":1,"url":"https://github.com/yutao"}],"changelog":[{"hash":"f5ab8c9d34991ec274f7f652439afe5b2afb6147","time":1681290319000,"email":"642231346@qq.com","author":"yutao","message":"modify"}]},"filePathRelative":"strong/29.mongodb-1.md"}');export{f as comp,x as data};
