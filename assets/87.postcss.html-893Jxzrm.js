import{_ as a,c as n,a as e,o as t}from"./app-CD1YpnS1.js";const l={};function p(c,s){return t(),n("div",null,[...s[0]||(s[0]=[e(`<h2 id="_1-postcss" tabindex="-1"><a class="header-anchor" href="#_1-postcss"><span>1. PostCSS</span></a></h2><ul><li><a href="https://www.postcss.com.cn/" target="_blank" rel="noopener noreferrer">PostCSS</a>是一个用 JavaScript 工具和插件转换 CSS 代码的工具</li><li>增强代码的可读性</li><li>将未来的 CSS 特性带到今天！</li><li>终结全局 CSS</li><li>避免 CSS 代码中的错误</li><li>强大的网格系统</li><li>postcss会帮我们分析出css的抽象语法树</li></ul><h2 id="_2-文档" tabindex="-1"><a class="header-anchor" href="#_2-文档"><span>2. 文档</span></a></h2><ul><li><a href="http://api.postcss.org" target="_blank" rel="noopener noreferrer">api</a></li><li>[astexplorer](https://astexplorer.net/</li></ul><h2 id="_3-类型" tabindex="-1"><a class="header-anchor" href="#_3-类型"><span>3. 类型</span></a></h2><ul><li>CSS AST主要有3种父类型 <ul><li><code>AtRule</code> @xxx的这种类型，如@screen</li><li><code>Comment</code> 注释</li><li><code>Rule</code> 普通的css规则</li></ul></li><li>子类型 <ul><li><code>decl</code> 指的是每条具体的css规则</li><li><code>rule</code> 作用于某个选择器上的css规则集合</li></ul></li></ul><h2 id="_4-ast节点" tabindex="-1"><a class="header-anchor" href="#_4-ast节点"><span>4.AST节点</span></a></h2><ul><li>nodes: CSS规则的节点信息集合 <ul><li>decl: 每条css规则的节点信息</li><li>prop: 样式名,如width</li><li>value: 样式值,如10px</li></ul></li><li>type: 类型</li><li>source: 包括start和end的位置信息，start和end里都有line和column表示行和列</li><li>selector: type为rule时的选择器</li><li>name: type为atRule时@紧接rule名，譬如@import &#39;xxx.css&#39;中的import</li><li>params: type为atRule时@紧接rule名后的值，譬如@import &#39;xxx.css&#39;中的xxx.css</li><li>text: type为comment时的注释内容</li></ul><h2 id="_5-操作方法" tabindex="-1"><a class="header-anchor" href="#_5-操作方法"><span>5.操作方法</span></a></h2><h3 id="_5-1-遍历" tabindex="-1"><a class="header-anchor" href="#_5-1-遍历"><span>5.1 遍历</span></a></h3><ul><li>walk: 遍历所有节点信息，无论是atRule、rule、comment的父类型，还是rule、 decl的子类型</li><li>walkAtRules：遍历所有的AtRules</li><li>walkComments 遍历所有的Comments</li><li>walkDecls 遍历所有的Decls</li><li>walkRules 遍历所有的Rules</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">root<span class="token punctuation">.</span><span class="token function">walkDecls</span><span class="token punctuation">(</span><span class="token parameter">decl</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    decl<span class="token punctuation">.</span>prop <span class="token operator">=</span> decl<span class="token punctuation">.</span>prop<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-2-处理" tabindex="-1"><a class="header-anchor" href="#_5-2-处理"><span>5.2 处理</span></a></h3><ul><li>postCss给出了很多操作css规则的方法</li><li><a href="http://api.postcss.org/AtRule.html" target="_blank" rel="noopener noreferrer">api</a></li><li>处理css的方式其实有2种：编写postcss plugin，如果你的操作非常简单也可以直接利用<code>postcss.parse</code>方法拿到<code>css ast</code>后分析处理</li></ul><h3 id="_5-3-postcss-plugin" tabindex="-1"><a class="header-anchor" href="#_5-3-postcss-plugin"><span>5.3 postcss plugin</span></a></h3><ul><li>postcss插件如同babel插件一样，有固定的格式</li><li>注册个插件名，并获取插件配置参数<code>opts</code></li><li>返回值是个函数，这个函数主体是你的处理逻辑，有2个参数，一个是root,AST的根节点。另一个是result，返回结果对象，譬如<code>result.css</code>，获得处理结果的css字符串</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> postcss<span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span><span class="token string">&#39;postcss-plugin-name&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">opts</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  opts <span class="token operator">=</span> opts <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">root<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 处理逻辑</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-4-直接调用postcss命名空间下的方法" tabindex="-1"><a class="header-anchor" href="#_5-4-直接调用postcss命名空间下的方法"><span>5.4 直接调用postcss命名空间下的方法</span></a></h3><ul><li>可以用postcss.parse来处理一段css文本，拿到css ast，然后进行处理，再通过调用toResult().css拿到处理后的css输出</li></ul>`,19)])])}const i=a(l,[["render",p]]),r=JSON.parse('{"path":"/strong/87.postcss.html","title":"","lang":"en-US","frontmatter":{},"git":{"updatedTime":1681290319000,"contributors":[{"name":"yutao","username":"yutao","email":"642231346@qq.com","commits":1,"url":"https://github.com/yutao"}],"changelog":[{"hash":"f5ab8c9d34991ec274f7f652439afe5b2afb6147","time":1681290319000,"email":"642231346@qq.com","author":"yutao","message":"modify"}]},"filePathRelative":"strong/87.postcss.md"}');export{i as comp,r as data};
