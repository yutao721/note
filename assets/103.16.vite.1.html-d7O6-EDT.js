import{_ as n,c as a,a as e,o as p}from"./app-CD1YpnS1.js";const t={};function l(o,s){return p(),a("div",null,[...s[0]||(s[0]=[e(`<h2 id="_1-vite" tabindex="-1"><a class="header-anchor" href="#_1-vite"><span>1.Vite</span></a></h2><ul><li><a href="https://cn.vitejs.dev/" target="_blank" rel="noopener noreferrer">Vite (æ³•è¯­æ„ä¸º &quot;å¿«é€Ÿçš„&quot;ï¼Œå‘éŸ³ /vit/)</a>æ˜¯ä¸‹ä¸€ä»£å‰ç«¯å¼€å‘ä¸æ„å»ºå·¥å…·</li><li>ğŸ’¡ æé€Ÿçš„æœåŠ¡å¯åŠ¨ ä½¿ç”¨åŸç”Ÿ ESM æ–‡ä»¶ï¼Œæ— éœ€æ‰“åŒ…!</li><li>âš¡ï¸ è½»é‡å¿«é€Ÿçš„çƒ­é‡è½½ æ— è®ºåº”ç”¨ç¨‹åºå¤§å°å¦‚ä½•ï¼Œéƒ½å§‹ç»ˆæå¿«çš„æ¨¡å—çƒ­é‡è½½ï¼ˆHMRï¼‰</li><li>ğŸ› ï¸ ä¸°å¯Œçš„åŠŸèƒ½ å¯¹ TypeScriptã€JSXã€CSS ç­‰æ”¯æŒå¼€ç®±å³ç”¨ã€‚</li><li>ğŸ“¦ ä¼˜åŒ–çš„æ„å»º å¯é€‰ â€œå¤šé¡µåº”ç”¨â€ æˆ– â€œåº“â€ æ¨¡å¼çš„é¢„é…ç½® Rollup æ„å»º</li><li>ğŸ”© é€šç”¨çš„æ’ä»¶ åœ¨å¼€å‘å’Œæ„å»ºä¹‹é—´å…±äº« Rollup-superset æ’ä»¶æ¥å£ã€‚</li><li>ğŸ”‘ å®Œå…¨ç±»å‹åŒ–çš„ API çµæ´»çš„ API å’Œå®Œæ•´ TypeS</li></ul><h3 id="_1-1-å®‰è£…ä¾èµ–" tabindex="-1"><a class="header-anchor" href="#_1-1-å®‰è£…ä¾èµ–"><span>1.1 å®‰è£…ä¾èµ–</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">npm install vue  --save</span>
<span class="line">npm install  @vitejs/plugin-vue  vite --save-dev</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-2-é…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_1-2-é…ç½®æ–‡ä»¶"><span>1.2 é…ç½®æ–‡ä»¶</span></a></h3><p>vite.config.js</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vite&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> vue <span class="token keyword">from</span> <span class="token string">&quot;@vitejs/plugin-vue&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// https://vitejs.dev/config/</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-3-package-json" tabindex="-1"><a class="header-anchor" href="#_1-3-package-json"><span>1.3 package.json</span></a></h3><p>package.json</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vite2-prepare&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token string-property property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token string-property property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vite&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string-property property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vite build&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token string-property property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token string-property property">&quot;vue&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.0.5&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token string-property property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token string-property property">&quot;@vitejs/plugin-vue&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.2.4&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string-property property">&quot;vite&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.4.0&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-4-index-html" tabindex="-1"><a class="header-anchor" href="#_1-4-index-html"><span>1.4 index.html</span></a></h3><p>index.html</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">&quot;en&quot;</span><span class="token operator">&gt;</span></span>
<span class="line">  <span class="token operator">&lt;</span>head<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">&quot;UTF-8&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">&quot;viewport&quot;</span> content<span class="token operator">=</span><span class="token string">&quot;width=device-width, initial-scale=1.0&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Vite App<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span></span>
<span class="line">  <span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span></span>
<span class="line">  <span class="token operator">&lt;</span>body<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;module&quot;</span> src<span class="token operator">=</span><span class="token string">&quot;/src/main.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span></span>
<span class="line">  <span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-5-src-main-js" tabindex="-1"><a class="header-anchor" href="#_1-5-src-main-js"><span>1.5 src\\main.js</span></a></h3><p>src\\main.js</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&quot;./App.vue&quot;</span><span class="token punctuation">;</span></span>
<span class="line"> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span>&quot;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-6-src-app-vue" tabindex="-1"><a class="header-anchor" href="#_1-6-src-app-vue"><span>1.6 src\\App.vue</span></a></h3><p>src\\App.vue</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">&lt;template&gt;</span>
<span class="line">  &lt;h1&gt;App&lt;/h1&gt;</span>
<span class="line">&lt;/template&gt;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-esbuild-ä»‹ç»" tabindex="-1"><a class="header-anchor" href="#_2-esbuild-ä»‹ç»"><span>2.esbuild ä»‹ç»</span></a></h2><ul><li><a href="https://esbuild.github.io/api/" target="_blank" rel="noopener noreferrer">ESbuild</a> æ˜¯ä¸€æ¬¾åŸºäº Golang å¼€å‘çš„ä¸€æ¬¾æ‰“åŒ…å·¥å…·ï¼Œç›¸æ¯”ä¼ ç»Ÿçš„æ‰“åŒ…å·¥å…·ï¼Œä¸»æ‰“æ€§èƒ½ä¼˜åŠ¿ï¼Œåœ¨æ„å»ºé€Ÿåº¦ä¸Šå¯ä»¥å¿« 10~100 å€</li></ul><p><img src="https://static.zhufengpeixun.com/ESbuild_1653147079963.jpeg" alt=""></p><h3 id="_2-1-å®‰è£…" tabindex="-1"><a class="header-anchor" href="#_2-1-å®‰è£…"><span>2.1 å®‰è£…</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">npm install esbuild</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_2-2-ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#_2-2-ä½¿ç”¨"><span>2.2 ä½¿ç”¨</span></a></h3><h4 id="_2-2-1-main-js" tabindex="-1"><a class="header-anchor" href="#_2-2-1-main-js"><span>2.2.1 main.js</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_2-2-2-esbuild-js" tabindex="-1"><a class="header-anchor" href="#_2-2-2-esbuild-js"><span>2.2.2 esbuild.js</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;esbuild&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;main.js&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">outfile</span><span class="token operator">:</span> <span class="token string">&quot;out.js&quot;</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-3-å†…å®¹ç±»å‹" tabindex="-1"><a class="header-anchor" href="#_2-3-å†…å®¹ç±»å‹"><span>2.3 å†…å®¹ç±»å‹</span></a></h3><ul><li>[content-types](https://esbuild.github.io/content-types/</li><li>æ¯ä¸ªå†…å®¹ç±»å‹éƒ½æœ‰ä¸€ä¸ªå…³è”çš„<code>åŠ è½½å™¨</code>ï¼Œå®ƒå‘Šè¯‰ esbuild å¦‚ä½•è§£é‡Šæ–‡ä»¶å†…å®¹ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒæŸäº›æ–‡ä»¶æ‰©å±•åå·²ç»ä¸ºå®ƒä»¬é…ç½®äº†åŠ è½½å™¨ï¼Œå°½ç®¡å¯ä»¥è¦†ç›–é»˜è®¤å€¼</li></ul><h4 id="_2-3-1-main-js" tabindex="-1"><a class="header-anchor" href="#_2-3-1-main-js"><span>2.3.1 main.js</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">let</span> title <span class="token operator">=</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>hello<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span><span class="token punctuation">;</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-3-2-esbuild-js" tabindex="-1"><a class="header-anchor" href="#_2-3-2-esbuild-js"><span>2.3.2 esbuild.js</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;esbuild&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;main.js&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">bundle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&quot;.js&quot;</span><span class="token operator">:</span> <span class="token string">&quot;jsx&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">outfile</span><span class="token operator">:</span> <span class="token string">&quot;out.js&quot;</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-4-plugin" tabindex="-1"><a class="header-anchor" href="#_2-4-plugin"><span>2.4 plugin</span></a></h3><ul><li>[plugins](https://esbuild.github.io/plugins/</li><li><a href="https://github.com/esbuild/community-plugins" target="_blank" rel="noopener noreferrer">plugins</a></li><li>ä¸€ä¸ª esbuild æ’ä»¶æ˜¯ä¸€ä¸ªåŒ…å« name å’Œ setup å‡½æ•°çš„å¯¹è±¡</li><li>å®ƒä»¬ä»¥æ•°ç»„çš„å½¢å¼ä¼ é€’ç»™æ„å»º API è°ƒç”¨,<code>setup</code>å‡½æ•°åœ¨æ¯æ¬¡<code>BUILD API</code>è°ƒç”¨æ—¶éƒ½ä¼šè¿è¡Œä¸€æ¬¡</li></ul><h4 id="_2-4-1-å‘½åç©ºé—´" tabindex="-1"><a class="header-anchor" href="#_2-4-1-å‘½åç©ºé—´"><span>2.4.1 å‘½åç©ºé—´</span></a></h4><ul><li>æ¯ä¸ªæ¨¡å—éƒ½æœ‰ä¸€ä¸ªå…³è”çš„å‘½åç©ºé—´ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œesbuild åœ¨ file å‘½åç©ºé—´ä¸­è¿è¡Œï¼Œè¯¥å‘½åç©ºé—´å¯¹åº”äºæ–‡ä»¶ç³»ç»Ÿä¸Šçš„æ–‡ä»¶</li><li>ä½†æ˜¯ esbuild ä¹Ÿå¯ä»¥å¤„ç†åœ¨æ–‡ä»¶ç³»ç»Ÿä¸Šæ²¡æœ‰å¯¹åº”ä½ç½®çš„â€œè™šæ‹Ÿâ€æ¨¡å—</li><li>æ’ä»¶å¯ç”¨äºåˆ›å»ºè™šæ‹Ÿæ¨¡å—ã€‚è™šæ‹Ÿæ¨¡å—é€šå¸¸ä½¿ç”¨å‘½åç©ºé—´è€Œä¸æ˜¯ file å°†å®ƒä»¬ä¸æ–‡ä»¶ç³»ç»Ÿæ¨¡å—åŒºåˆ†å¼€æ¥,é€šå¸¸å‘½åç©ºé—´ç‰¹å®šäºåˆ›å»ºå®ƒä»¬çš„æ’ä»¶</li></ul><h4 id="_2-4-2-è¿‡æ»¤å™¨" tabindex="-1"><a class="header-anchor" href="#_2-4-2-è¿‡æ»¤å™¨"><span>2.4.2 è¿‡æ»¤å™¨</span></a></h4><ul><li>æ¯ä¸ªå›è°ƒéƒ½å¿…é¡»æä¾›ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ä½œä¸ºè¿‡æ»¤å™¨ã€‚å½“è·¯å¾„ä¸å…¶è¿‡æ»¤å™¨ä¸åŒ¹é…æ—¶ï¼Œesbuild ä½¿ç”¨å®ƒæ¥è·³è¿‡è°ƒç”¨å›è°ƒ</li><li>å‘½åç©ºé—´ä¹Ÿå¯ç”¨äºè¿‡æ»¤ã€‚å›è°ƒå¿…é¡»æä¾›è¿‡æ»¤æ­£åˆ™è¡¨è¾¾å¼ï¼Œä½†ä¹Ÿå¯ä»¥é€‰æ‹©æä¾›å‘½åç©ºé—´ä»¥è¿›ä¸€æ­¥é™åˆ¶åŒ¹é…çš„è·¯å¾„</li></ul><h4 id="_2-4-3-resolve-å›è°ƒ" tabindex="-1"><a class="header-anchor" href="#_2-4-3-resolve-å›è°ƒ"><span>2.4.3 Resolve å›è°ƒ</span></a></h4><ul><li>ä½¿ç”¨æ·»åŠ çš„å›è°ƒ onResolve å°†åœ¨ esbuild æ„å»ºçš„æ¯ä¸ªæ¨¡å—ä¸­çš„æ¯ä¸ªå¯¼å…¥è·¯å¾„ä¸Šè¿è¡Œ</li><li>å›è°ƒå¯ä»¥è‡ªå®šä¹‰ esbuild å¦‚ä½•è¿›è¡Œè·¯å¾„è§£æã€‚ä¾‹å¦‚ï¼Œå®ƒå¯ä»¥æ‹¦æˆªå¯¼å…¥è·¯å¾„å¹¶å°†å®ƒä»¬é‡å®šå‘åˆ°å…¶ä»–åœ°æ–¹ã€‚å®ƒè¿˜å¯ä»¥å°†è·¯å¾„æ ‡è®°ä¸ºå¤–éƒ¨</li><li>å›è°ƒå¯ä»¥è¿”å›è€Œä¸æä¾›å°†è·¯å¾„è§£æçš„è´£ä»»ä¼ é€’ç»™ä¸‹ä¸€ä¸ªå›è°ƒçš„è·¯å¾„ã€‚å¯¹äºç»™å®šçš„å¯¼å…¥è·¯å¾„ï¼ŒonResolve æ‰€æœ‰æ’ä»¶çš„æ‰€æœ‰å›è°ƒéƒ½å°†æŒ‰ç…§å®ƒä»¬æ³¨å†Œçš„é¡ºåºè¿è¡Œï¼Œç›´åˆ°æœ‰äººè´Ÿè´£è·¯å¾„è§£æã€‚å¦‚æœæ²¡æœ‰å›è°ƒè¿”å›è·¯å¾„ï¼Œesbuild å°†è¿è¡Œå…¶é»˜è®¤è·¯å¾„è§£æé€»è¾‘</li></ul><h4 id="_2-4-4-resolve-å‚æ•°" tabindex="-1"><a class="header-anchor" href="#_2-4-4-resolve-å‚æ•°"><span>2.4.4 Resolve å‚æ•°</span></a></h4><ul><li>å½“ esbuild è°ƒç”¨ç”± æ³¨å†Œçš„å›è°ƒæ—¶ onResolveï¼Œå®ƒå°†ä¸ºè¿™äº›å‚æ•°æä¾›æœ‰å…³å¯¼å…¥è·¯å¾„çš„ä¿¡æ¯ï¼š</li><li>path è¿™æ˜¯æ¥è‡ªåº•å±‚æ¨¡å—æºä»£ç çš„é€å­—æœªè§£æè·¯å¾„</li><li>namespace è¿™æ˜¯åŒ…å«è¦è§£æçš„æ­¤å¯¼å…¥çš„æ¨¡å—çš„åç§°ç©ºé—´</li></ul><h4 id="_2-4-5-onload-å›è°ƒ" tabindex="-1"><a class="header-anchor" href="#_2-4-5-onload-å›è°ƒ"><span>2.4.5 onLoad å›è°ƒ</span></a></h4><ul><li>onLoad å°†ä¸ºæ¯ä¸ªæœªæ ‡è®°ä¸ºå¤–éƒ¨çš„å”¯ä¸€è·¯å¾„/å‘½åç©ºé—´å¯¹è¿è¡Œæ·»åŠ çš„å›è°ƒ</li><li>å®ƒçš„å·¥ä½œæ˜¯è¿”å›æ¨¡å—çš„å†…å®¹å¹¶å‘Šè¯‰ esbuild å¦‚ä½•è§£é‡Šå®ƒ</li><li>å›è°ƒå¯ä»¥åœ¨ä¸æä¾›æ¨¡å—å†…å®¹çš„æƒ…å†µä¸‹è¿”å›ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒåŠ è½½æ¨¡å—çš„è´£ä»»è¢«ä¼ é€’ç»™ä¸‹ä¸€ä¸ªæ³¨å†Œçš„å›è°ƒã€‚å¯¹äºç»™å®šçš„æ¨¡å—ï¼ŒonLoad æ‰€æœ‰æ’ä»¶çš„æ‰€æœ‰å›è°ƒéƒ½å°†æŒ‰ç…§å®ƒä»¬æ³¨å†Œçš„é¡ºåºè¿è¡Œï¼Œç›´åˆ°æœ‰äººè´Ÿè´£åŠ è½½æ¨¡å—ã€‚å¦‚æœæ²¡æœ‰å›è°ƒè¿”å›æ¨¡å—çš„å†…å®¹ï¼Œesbuild å°†è¿è¡Œå…¶é»˜è®¤çš„æ¨¡å—åŠ è½½é€»è¾‘</li></ul><h4 id="_2-4-6-onload-é€‰é¡¹" tabindex="-1"><a class="header-anchor" href="#_2-4-6-onload-é€‰é¡¹"><span>2.4.6 onLoad é€‰é¡¹</span></a></h4><ul><li>filter æ¯ä¸ªå›è°ƒéƒ½å¿…é¡»æä¾›ä¸€ä¸ªè¿‡æ»¤å™¨ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ã€‚å½“è·¯å¾„ä¸æ­¤è¿‡æ»¤å™¨ä¸åŒ¹é…æ—¶ï¼Œå°†è·³è¿‡æ³¨å†Œçš„å›è°ƒ</li><li>namespace è¿™æ˜¯å¯é€‰çš„ã€‚å¦‚æœæä¾›ï¼Œå›è°ƒä»…åœ¨æä¾›çš„å‘½åç©ºé—´ä¸­çš„æ¨¡å—å†…çš„è·¯å¾„ä¸Šè¿è¡Œ</li></ul><h4 id="_2-4-7-load-ç»“æœ" tabindex="-1"><a class="header-anchor" href="#_2-4-7-load-ç»“æœ"><span>2.4.7 load ç»“æœ</span></a></h4><ul><li>contents å°†æ­¤è®¾ç½®ä¸ºå­—ç¬¦ä¸²ä»¥æŒ‡å®šæ¨¡å—çš„å†…å®¹ã€‚å¦‚æœè®¾ç½®äº†æ­¤é¡¹ï¼Œåˆ™ä¸ä¼šé’ˆå¯¹æ­¤å·²è§£æè·¯å¾„è¿è¡Œæ›´å¤šåŠ è½½å›è°ƒã€‚å¦‚æœæœªè®¾ç½®ï¼Œesbuild å°†ç»§ç»­è¿è¡Œåœ¨å½“å‰å›è°ƒä¹‹åæ³¨å†Œçš„åŠ è½½å›è°ƒã€‚ç„¶åï¼Œå¦‚æœå†…å®¹ä»æœªè®¾ç½®ï¼Œå¦‚æœè§£æçš„è·¯å¾„åœ¨ file å‘½åç©ºé—´ä¸­ï¼Œesbuild å°†é»˜è®¤ä»æ–‡ä»¶ç³»ç»ŸåŠ è½½å†…å®¹</li><li>loader è¿™å‘Šè¯‰ esbuild å¦‚ä½•è§£é‡Šå†…å®¹ã€‚ä¾‹å¦‚ï¼Œjs åŠ è½½å™¨å°†å†…å®¹è§£é‡Šä¸º JavaScriptï¼Œcss åŠ è½½å™¨å°†å†…å®¹è§£é‡Šä¸º CSSã€‚js å¦‚æœæœªæŒ‡å®šï¼Œåˆ™åŠ è½½ç¨‹åºé»˜è®¤ä¸ºã€‚æœ‰å…³æ‰€æœ‰å†…ç½®åŠ è½½ç¨‹åºçš„å®Œæ•´åˆ—è¡¨ï¼Œè¯·å‚é˜…å†…å®¹ç±»å‹é¡µé¢ã€‚</li></ul><h4 id="_2-4-1-entry-js" tabindex="-1"><a class="header-anchor" href="#_2-4-1-entry-js"><span>2.4.1 entry.js</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Path <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;env&quot;</span><span class="token punctuation">;</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Path is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>Path<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-4-2-envplugin" tabindex="-1"><a class="header-anchor" href="#_2-4-2-envplugin"><span>2.4.2 envPlugin</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">let</span> envPlugin <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;env&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">build</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">//æ‹¦æˆªåä¸ºenvçš„å¯¼å…¥è·¯å¾„ï¼Œä»¥ä¾¿esbuildä¸ä¼šå°è¯•å°†å®ƒä»¬æ˜ å°„åˆ°æ–‡ä»¶ç³»ç»Ÿä½ç½®</span></span>
<span class="line">    <span class="token comment">//ç”¨env-nsåç§°ç©ºé—´æ ‡è®°å®ƒä»¬ï¼Œä»¥ä¾¿ä¸ºè¯¥æ’ä»¶ä¿ç•™å®ƒä»¬</span></span>
<span class="line">    build<span class="token punctuation">.</span><span class="token function">onResolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">filter</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^env$</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">path</span><span class="token operator">:</span> args<span class="token punctuation">.</span>path<span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">namespace</span><span class="token operator">:</span> <span class="token string">&quot;env-ns&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token comment">//åŠ è½½å¸¦æœ‰env-nsåç§°ç©ºé—´æ ‡è®°çš„è·¯å¾„ï¼Œå®ƒä»¬çš„è¡Œä¸ºå°±åƒæŒ‡å‘åŒ…å«ç¯å¢ƒå˜é‡çš„JSONæ–‡ä»¶ä¸€æ ·</span></span>
<span class="line">    build<span class="token punctuation">.</span><span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">filter</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.*</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token literal-property property">namespace</span><span class="token operator">:</span> <span class="token string">&quot;env-ns&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">contents</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&quot;json&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;esbuild&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;entry.js&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">bundle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">outfile</span><span class="token operator">:</span> <span class="token string">&quot;out.js&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>envPlugin<span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,55)])])}const c=n(t,[["render",l]]),r=JSON.parse('{"path":"/strong/103.16.vite.1.html","title":"","lang":"en-US","frontmatter":{},"git":{"updatedTime":1681290319000,"contributors":[{"name":"yutao","username":"yutao","email":"642231346@qq.com","commits":1,"url":"https://github.com/yutao"}],"changelog":[{"hash":"f5ab8c9d34991ec274f7f652439afe5b2afb6147","time":1681290319000,"email":"642231346@qq.com","author":"yutao","message":"modify"}]},"filePathRelative":"strong/103.16.vite.1.md"}');export{c as comp,r as data};
