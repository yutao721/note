import{_ as e,c as a,a as s,o as l}from"./app-CD1YpnS1.js";const n={};function i(d,t){return l(),a("div",null,[...t[0]||(t[0]=[s(`<h2 id="_1-进程管理" tabindex="-1"><a class="header-anchor" href="#_1-进程管理"><span>1. 进程管理</span></a></h2><h3 id="_1-1-进程" tabindex="-1"><a class="header-anchor" href="#_1-1-进程"><span>1.1 进程</span></a></h3><ul><li>进程是正在执行的一个程序或命令，每一个进程都是一个运行的实体，都有自己的地址空间并且用一定的系统资源</li><li>进程就是正在执行的某个程序</li></ul><h3 id="_1-2-进程管理简介" tabindex="-1"><a class="header-anchor" href="#_1-2-进程管理简介"><span>1.2 进程管理简介</span></a></h3><ul><li>判断服务器的状态</li><li>查看系统中的所有进程</li><li>杀死进程，只有无法关闭才要杀死进程</li></ul><h3 id="_1-3-进程的查看命令-ps" tabindex="-1"><a class="header-anchor" href="#_1-3-进程的查看命令-ps"><span>1.3 进程的查看命令(ps)</span></a></h3><ul><li><code>ps aux</code> 查看系统中所有进程，使用BSD操作系统格式</li><li><code>ps -le</code> 查看系统中所有进程，使用Linux标准格式</li><li>TTY是TeleType的一个缩写，原来指的是电传打字机，是通过串行线用打印机键盘通过阅读和发送信息的东西</li><li>pts(pseudo[&#39;su:doʊ]-terminal slave)是所谓的伪终端或虚拟终端</li></ul><h4 id="_1-3-1-选项" tabindex="-1"><a class="header-anchor" href="#_1-3-1-选项"><span>1.3.1 选项</span></a></h4><table><thead><tr><th style="text-align:left;">参数</th><th style="text-align:left;">含义</th></tr></thead><tbody><tr><td style="text-align:left;">-a</td><td style="text-align:left;">显示一个终端的所有进程</td></tr><tr><td style="text-align:left;">-u</td><td style="text-align:left;">显示进程的归属用户及内存的使用情况</td></tr><tr><td style="text-align:left;">-x</td><td style="text-align:left;">显示没有控制终端的进程</td></tr><tr><td style="text-align:left;">-l</td><td style="text-align:left;">长格式显示，显示更详细的信息</td></tr></tbody></table><h4 id="_1-3-2-结果字段含义" tabindex="-1"><a class="header-anchor" href="#_1-3-2-结果字段含义"><span>1.3.2 结果字段含义</span></a></h4><table><thead><tr><th style="text-align:left;">数据</th><th style="text-align:left;">含义</th></tr></thead><tbody><tr><td style="text-align:left;">USER</td><td style="text-align:left;">该进程是由哪个用户创建的</td></tr><tr><td style="text-align:left;">PID</td><td style="text-align:left;">进程的ID号</td></tr><tr><td style="text-align:left;">%CPU</td><td style="text-align:left;">该进程占用CPU资源的百分比，占用越高说明越消耗系统资源</td></tr><tr><td style="text-align:left;">%MEM</td><td style="text-align:left;">该进程占用物理内存的百分比，占用越高说明越消耗系统资源</td></tr><tr><td style="text-align:left;">VSZ</td><td style="text-align:left;">该进程占用虚拟内存的百分比，单位是KB</td></tr><tr><td style="text-align:left;">RSS</td><td style="text-align:left;">该进程占用实际物理内存大小，单位是KB</td></tr><tr><td style="text-align:left;">TTY</td><td style="text-align:left;">该进程在哪个终端中运行。tty1~tty7表示本地控制终端，tty1~tty6是字符终端，tty7是图形终端。pts/0~255代表虚拟终端，?表示此终端是系统启动的</td></tr><tr><td style="text-align:left;">STAT</td><td style="text-align:left;">进程状态</td></tr><tr><td style="text-align:left;">START</td><td style="text-align:left;">该进程的启动时间</td></tr><tr><td style="text-align:left;">TIME</td><td style="text-align:left;">该进程占用CPU的运算时间,数值越高说明越消耗系统资源</td></tr><tr><td style="text-align:left;">COMMAND</td><td style="text-align:left;">产生此进程的命令名</td></tr></tbody></table><h4 id="_1-3-3-进程状态-stat" tabindex="-1"><a class="header-anchor" href="#_1-3-3-进程状态-stat"><span>1.3.3 进程状态(STAT)</span></a></h4><table><thead><tr><th style="text-align:left;">参数</th><th style="text-align:left;">含义</th></tr></thead><tbody><tr><td style="text-align:left;">R(Runing)</td><td style="text-align:left;">运行</td></tr><tr><td style="text-align:left;">S(Sleep)</td><td style="text-align:left;">休眠</td></tr><tr><td style="text-align:left;">T(Terminated)</td><td style="text-align:left;">停止</td></tr><tr><td style="text-align:left;">S(Son)</td><td style="text-align:left;">包含子进程</td></tr><tr><td style="text-align:left;">+</td><td style="text-align:left;">位于后台</td></tr></tbody></table><h3 id="_1-4-pstree" tabindex="-1"><a class="header-anchor" href="#_1-4-pstree"><span>1.4 pstree</span></a></h3><ul><li>pstree [选项] <ul><li>-p 显示进程PID</li><li>-u 显示进程的所属用户</li></ul></li></ul><h3 id="_1-5-进程的查看-top" tabindex="-1"><a class="header-anchor" href="#_1-5-进程的查看-top"><span>1.5 进程的查看(top)</span></a></h3><ul><li>top</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">top <span class="token operator">-</span>b <span class="token operator">-</span>n <span class="token number">1</span> <span class="token operator">&gt;</span> top<span class="token punctuation">.</span>txt</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_1-5-1-选项" tabindex="-1"><a class="header-anchor" href="#_1-5-1-选项"><span>1.5.1 选项</span></a></h4><table><thead><tr><th style="text-align:left;">选项</th><th style="text-align:left;">含义</th></tr></thead><tbody><tr><td style="text-align:left;">-b</td><td style="text-align:left;">使用批处理模式输出，一般和<code>-n</code>配合使用</td></tr><tr><td style="text-align:left;">-n</td><td style="text-align:left;">次数，指定top命令执行的次数。一般了<code>-b</code>选项配合使用</td></tr><tr><td style="text-align:left;">-d</td><td style="text-align:left;">秒数，指定top命令每隔几秒更新。默认是3秒</td></tr></tbody></table><h4 id="_1-5-2-交互模式的命令" tabindex="-1"><a class="header-anchor" href="#_1-5-2-交互模式的命令"><span>1.5.2 交互模式的命令</span></a></h4><table><thead><tr><th style="text-align:left;">选项</th><th style="text-align:left;">含义</th></tr></thead><tbody><tr><td style="text-align:left;">?或h</td><td style="text-align:left;">显示交互模式的帮助</td></tr><tr><td style="text-align:left;">P</td><td style="text-align:left;">按CPU使用率排序，默认就是此选项</td></tr><tr><td style="text-align:left;">M</td><td style="text-align:left;">以内存的使用率排序</td></tr><tr><td style="text-align:left;">N</td><td style="text-align:left;">以PID排序</td></tr><tr><td style="text-align:left;">q</td><td style="text-align:left;">退出top</td></tr></tbody></table><h4 id="_1-5-3-状态栏" tabindex="-1"><a class="header-anchor" href="#_1-5-3-状态栏"><span>1.5.3 状态栏</span></a></h4><h5 id="_1-5-3-1-第一行为任务队列信息" tabindex="-1"><a class="header-anchor" href="#_1-5-3-1-第一行为任务队列信息"><span>1.5.3.1 第一行为任务队列信息</span></a></h5><table><thead><tr><th style="text-align:left;">内容</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">12:12:12</td><td style="text-align:left;">系统的当前时间</td></tr><tr><td style="text-align:left;">up 1 day 5:33</td><td style="text-align:left;">系统的运行时间，本机已经运行了1天5小时33分</td></tr><tr><td style="text-align:left;">2 users</td><td style="text-align:left;">当前登录了二个客户端</td></tr><tr><td style="text-align:left;">load average 0 0 0</td><td style="text-align:left;">系统在之前1分钟、5分钟、15分钟的平均负载。一般认为小于1小时负载较小，大于1超过负载</td></tr></tbody></table><h5 id="_1-5-3-2-第二行为进程信息" tabindex="-1"><a class="header-anchor" href="#_1-5-3-2-第二行为进程信息"><span>1.5.3.2 第二行为进程信息</span></a></h5><table><thead><tr><th style="text-align:left;">内容</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">Tasks: 100 total</td><td style="text-align:left;">系统中的进程总数</td></tr><tr><td style="text-align:left;">1 running</td><td style="text-align:left;">正在运行的进程数</td></tr><tr><td style="text-align:left;">94 sleeping</td><td style="text-align:left;">睡眠的进程</td></tr><tr><td style="text-align:left;">0 stopped</td><td style="text-align:left;">正在停止的进程</td></tr><tr><td style="text-align:left;">0 zombie</td><td style="text-align:left;">僵尸进程。如果不是0的话要进行检查</td></tr></tbody></table><h5 id="_1-5-3-3-第三行为cpu信息" tabindex="-1"><a class="header-anchor" href="#_1-5-3-3-第三行为cpu信息"><span>1.5.3.3 第三行为CPU信息</span></a></h5><table><thead><tr><th style="text-align:left;">内容</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">Cpu(s): 0.1%us</td><td style="text-align:left;">用户模式占用的CPU百分比</td></tr><tr><td style="text-align:left;">0.1%sy</td><td style="text-align:left;">系统模式占用的CPU百分比</td></tr><tr><td style="text-align:left;">0.0%ni</td><td style="text-align:left;">改变过优先级的用户进程 占用的CPU百分比</td></tr><tr><td style="text-align:left;">99.7%id</td><td style="text-align:left;">空闲CPU的CPU百分比</td></tr><tr><td style="text-align:left;">0.1%wa</td><td style="text-align:left;">等待输入/输出的进程的占用CPU百分比</td></tr><tr><td style="text-align:left;">0.1%hi</td><td style="text-align:left;">硬中断请求服务占用的CPU百分比</td></tr><tr><td style="text-align:left;">0.1%si</td><td style="text-align:left;">软中断请求服务占用的CPU百分比</td></tr><tr><td style="text-align:left;">0.0%st</td><td style="text-align:left;">st(Steal time)虚拟时间百分比，就是当有</td></tr></tbody></table><h5 id="_1-5-3-4-第四行为物理内存信息" tabindex="-1"><a class="header-anchor" href="#_1-5-3-4-第四行为物理内存信息"><span>1.5.3.4 第四行为物理内存信息</span></a></h5><table><thead><tr><th style="text-align:left;">内容</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">Mem: 1030720k total</td><td style="text-align:left;">物理内存的问题，单位是KB</td></tr><tr><td style="text-align:left;">551860k used</td><td style="text-align:left;">已经使用的物理内存数量</td></tr><tr><td style="text-align:left;">478860k free</td><td style="text-align:left;">空闲的物理内存数量，虚拟机分配了1024M内存，使用了538M,空闲467M</td></tr><tr><td style="text-align:left;">43180k buffers</td><td style="text-align:left;">作为缓冲的内存数量，可以存放需要写入硬盘的数据，用来加速数据的写入</td></tr></tbody></table><h5 id="_1-5-3-5-第四行为交换分区信息" tabindex="-1"><a class="header-anchor" href="#_1-5-3-5-第四行为交换分区信息"><span>1.5.3.5 第四行为交换分区信息</span></a></h5><table><thead><tr><th style="text-align:left;">内容</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">Swap: 2047992k total</td><td style="text-align:left;">总计的交换分区(虚拟内存)大小</td></tr><tr><td style="text-align:left;">536k used</td><td style="text-align:left;">已经使用的交换分区大小</td></tr><tr><td style="text-align:left;">2047456k free</td><td style="text-align:left;">空闲的交换分区大小</td></tr><tr><td style="text-align:left;">368164k cached</td><td style="text-align:left;">把需要经常读取的数据从硬盘读到内存中，加速了数据的读取</td></tr></tbody></table><h3 id="_1-6-杀死进程-kill" tabindex="-1"><a class="header-anchor" href="#_1-6-杀死进程-kill"><span>1.6 杀死进程(kill)</span></a></h3><h4 id="_1-6-1-进程信号" tabindex="-1"><a class="header-anchor" href="#_1-6-1-进程信号"><span>1.6.1 进程信号</span></a></h4><ul><li><code>kill -l</code> 查看可用的进程信号</li></ul><table><thead><tr><th style="text-align:left;">信号 代码</th><th style="text-align:left;">信号名称</th><th style="text-align:left;">说明</th><th>示例</th></tr></thead><tbody><tr><td style="text-align:left;">1</td><td style="text-align:left;">SIGHUP</td><td style="text-align:left;">该信号让进程立即关闭，然后重写读取配置文件后重启,平滑重启</td><td>kill -1 -HUP 进程号</td></tr><tr><td style="text-align:left;">2</td><td style="text-align:left;">SIGINT</td><td style="text-align:left;">程序终止信号，用于关闭前台进程,相当于ctrl+c</td><td></td></tr><tr><td style="text-align:left;">9</td><td style="text-align:left;">SIGKILL</td><td style="text-align:left;">用来立刻结束程序的运行，本信号不能阻塞、处理和忽略，一般用于强制中止</td><td></td></tr><tr><td style="text-align:left;">15</td><td style="text-align:left;">SIGTERM</td><td style="text-align:left;">正常结束进程的信号，kill命令的默认信号。如果不能正常中止，才会尝试SIGKILL信号</td><td></td></tr></tbody></table><h4 id="_1-6-2-杀死进程" tabindex="-1"><a class="header-anchor" href="#_1-6-2-杀死进程"><span>1.6.2 杀死进程</span></a></h4><p>sleep.sh</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"> </span>
<span class="line">i<span class="token operator">=</span><span class="token number">0</span></span>
<span class="line"><span class="token keyword">while</span> <span class="token punctuation">[</span> $i <span class="token operator">-</span>le <span class="token number">1000</span> <span class="token punctuation">]</span></span>
<span class="line"> <span class="token keyword">do</span></span>
<span class="line">   echo <span class="token function">$</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span></span>
<span class="line">   sleep 1s</span>
<span class="line"> done</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">sh sleep.sh &amp;</span>
<span class="line">ps -ef | grep sleep.sh</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">kill  进程号</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_2-系统资源查看" tabindex="-1"><a class="header-anchor" href="#_2-系统资源查看"><span>2. 系统资源查看</span></a></h2><h3 id="_2-1-vmstat" tabindex="-1"><a class="header-anchor" href="#_2-1-vmstat"><span>2.1 vmstat</span></a></h3><ul><li>监控系统资源使用状态</li><li>vmstat [刷新延时 刷新次数]</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">vmstat <span class="token number">1</span> <span class="token number">3</span></span>
<span class="line">procs <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>memory<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span> <span class="token operator">--</span><span class="token operator">-</span>swap<span class="token operator">--</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>io<span class="token operator">--</span><span class="token operator">--</span> <span class="token operator">--</span>system<span class="token operator">--</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>cpu<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span></span>
<span class="line"> r  b   swpd   free   buff  cache   si   so    bi    bo   <span class="token keyword">in</span>   cs us sy id wa st</span>
<span class="line"> <span class="token number">1</span>  <span class="token number">0</span>    <span class="token number">532</span> <span class="token number">329932</span>  <span class="token number">99388</span> <span class="token number">459768</span>    <span class="token number">0</span>    <span class="token number">0</span>    <span class="token number">16</span>    <span class="token number">81</span>   <span class="token number">59</span>   <span class="token number">50</span>  <span class="token number">3</span>  <span class="token number">1</span> <span class="token number">96</span>  <span class="token number">0</span>  <span class="token number">0</span>    </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-1-1-procs-进程信息字段" tabindex="-1"><a class="header-anchor" href="#_2-1-1-procs-进程信息字段"><span>2.1.1 (procs)进程信息字段</span></a></h4><table><thead><tr><th style="text-align:left;">分类</th><th style="text-align:left;">参数</th><th style="text-align:left;">含义</th></tr></thead><tbody><tr><td style="text-align:left;">procs</td><td style="text-align:left;">r</td><td style="text-align:left;">等待运行的进程数，数量越大，系统就越繁忙</td></tr><tr><td style="text-align:left;">procs</td><td style="text-align:left;">b</td><td style="text-align:left;">不可被唤醒的进程数量，数量越大，系统越繁忙</td></tr></tbody></table><h4 id="_2-1-2-memory-内存信息字段" tabindex="-1"><a class="header-anchor" href="#_2-1-2-memory-内存信息字段"><span>2.1.2 memory(内存信息字段)</span></a></h4><table><thead><tr><th style="text-align:left;">分类</th><th style="text-align:left;">参数</th><th style="text-align:left;">含义</th></tr></thead><tbody><tr><td style="text-align:left;">memory</td><td style="text-align:left;">swpd</td><td style="text-align:left;">使用的Swap空间的大小，单位KB</td></tr><tr><td style="text-align:left;">memory</td><td style="text-align:left;">free</td><td style="text-align:left;">空闲的内存容量，单位KB</td></tr><tr><td style="text-align:left;">memory</td><td style="text-align:left;">buff</td><td style="text-align:left;">缓冲的内存容量，单位KB</td></tr><tr><td style="text-align:left;">memory</td><td style="text-align:left;">cache</td><td style="text-align:left;">缓存的内存容量，单位KB</td></tr></tbody></table><h4 id="_2-1-3-swap-交换分区信息" tabindex="-1"><a class="header-anchor" href="#_2-1-3-swap-交换分区信息"><span>2.1.3 swap(交换分区信息)</span></a></h4><ul><li>如果说si和so数越大说明数据经常要在磁盘和内存之间数据交换，系统性能就会越差</li></ul><table><thead><tr><th style="text-align:left;">分类</th><th style="text-align:left;">参数</th><th style="text-align:left;">含义</th></tr></thead><tbody><tr><td style="text-align:left;">swap</td><td style="text-align:left;">si(in)</td><td style="text-align:left;">从磁盘中交换到内存中的数据的数量，单位KB</td></tr><tr><td style="text-align:left;">swap</td><td style="text-align:left;">so(out)</td><td style="text-align:left;">从内存中交换到硬盘中的数据的数量，单位KB</td></tr></tbody></table><h4 id="_2-1-4-io-磁盘读写" tabindex="-1"><a class="header-anchor" href="#_2-1-4-io-磁盘读写"><span>2.1.4 io(磁盘读写)</span></a></h4><ul><li>bi和bo数越大，说明磁盘的I/O越繁忙</li></ul><table><thead><tr><th style="text-align:left;">分类</th><th style="text-align:left;">参数</th><th style="text-align:left;">含义</th></tr></thead><tbody><tr><td style="text-align:left;">io</td><td style="text-align:left;">bi(in)</td><td style="text-align:left;">从块设备读入数据的问题，单位是块</td></tr><tr><td style="text-align:left;">io</td><td style="text-align:left;">bo(out)</td><td style="text-align:left;">写到块设备的数据的总量，单位是块</td></tr></tbody></table><h4 id="_2-1-5-system-系统信息字段" tabindex="-1"><a class="header-anchor" href="#_2-1-5-system-系统信息字段"><span>2.1.5 system(系统信息字段)</span></a></h4><ul><li>in和cs数越大，说明系统与接口设备的通信越繁忙</li></ul><table><thead><tr><th style="text-align:left;">分类</th><th style="text-align:left;">参数</th><th style="text-align:left;">含义</th></tr></thead><tbody><tr><td style="text-align:left;">system</td><td style="text-align:left;">in(interrupt)</td><td style="text-align:left;">每秒被中断的进程次数</td></tr><tr><td style="text-align:left;">system</td><td style="text-align:left;">cs(switch)</td><td style="text-align:left;">每秒钟进行的事件切换次数</td></tr></tbody></table><h4 id="_2-1-6-cpu-cpu信息字段" tabindex="-1"><a class="header-anchor" href="#_2-1-6-cpu-cpu信息字段"><span>2.1.6 CPU(CPU信息字段)</span></a></h4><table><thead><tr><th style="text-align:left;">分类</th><th style="text-align:left;">参数</th><th style="text-align:left;">含义</th></tr></thead><tbody><tr><td style="text-align:left;">CPU</td><td style="text-align:left;">us(user)</td><td style="text-align:left;">非内核进程消耗CPU运算时间的百分比</td></tr><tr><td style="text-align:left;">CPU</td><td style="text-align:left;">sy(system)</td><td style="text-align:left;">内核进程消耗CPU运算时间的百分比</td></tr><tr><td style="text-align:left;">CPU</td><td style="text-align:left;">id(idea)</td><td style="text-align:left;">空闲CPU的百分比</td></tr><tr><td style="text-align:left;">CPU</td><td style="text-align:left;">wa(wait)</td><td style="text-align:left;">等待I/O所消耗的CPU百分比</td></tr><tr><td style="text-align:left;">CPU</td><td style="text-align:left;">st(steal)</td><td style="text-align:left;">被虚拟机偷走的CPU百分比</td></tr></tbody></table><h3 id="_2-3-free" tabindex="-1"><a class="header-anchor" href="#_2-3-free"><span>2.3 free</span></a></h3><ul><li>查看内存使用状态</li><li>free [-b|-k|-m|-g]</li><li>选项 <ul><li>-b 以字节为单位</li><li>-k 以KB字节为单位</li><li>-m 以MB字节为单位</li><li>-g 以GB字节为单位</li></ul></li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line"> </span>
<span class="line">             total       used       free     shared    buffers     cached</span>
<span class="line">Mem:          1006        687        319          0         98        449</span>
<span class="line">-/+ buffers/cache:        139        866</span>
<span class="line">Swap:         1999          0       1999</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-3-1-第一行" tabindex="-1"><a class="header-anchor" href="#_2-3-1-第一行"><span>2.3.1 第一行</span></a></h4><table><thead><tr><th style="text-align:left;">分类</th><th style="text-align:left;">参数</th><th style="text-align:left;">含义</th></tr></thead><tbody><tr><td style="text-align:left;">total</td><td style="text-align:left;">内存总数</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">used</td><td style="text-align:left;">已经使用的内存数</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">free</td><td style="text-align:left;">空闲的内存数</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">shared</td><td style="text-align:left;">多个进程共享的内存数</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">buffers</td><td style="text-align:left;">缓冲区内存数</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">cached</td><td style="text-align:left;">缓存内存数</td><td style="text-align:left;"></td></tr></tbody></table><h4 id="_2-3-2-第二行" tabindex="-1"><a class="header-anchor" href="#_2-3-2-第二行"><span>2.3.2 第二行</span></a></h4><table><thead><tr><th style="text-align:left;">参数</th><th style="text-align:left;">算法</th><th style="text-align:left;">含义</th></tr></thead><tbody><tr><td style="text-align:left;">- buffers/cache</td><td style="text-align:left;">第一行的used-buffers-cached</td><td style="text-align:left;">已经使用的要减去缓存和缓冲的内存量</td></tr><tr><td style="text-align:left;">+ buffers/cache</td><td style="text-align:left;">第一行的free+buffers+cached</td><td style="text-align:left;">空闲的要加上缓存和缓冲的内存量</td></tr></tbody></table><h4 id="_2-3-3-第三行" tabindex="-1"><a class="header-anchor" href="#_2-3-3-第三行"><span>2.3.3 第三行</span></a></h4><table><thead><tr><th style="text-align:left;">分类</th><th style="text-align:left;">参数</th><th style="text-align:left;">含义</th></tr></thead><tbody><tr><td style="text-align:left;">total</td><td style="text-align:left;">swap总数，默认单位是K</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">used</td><td style="text-align:left;">已经使用的swap数，默认单位是K</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">free</td><td style="text-align:left;">空闲的swap数，默认单位是K</td><td style="text-align:left;"></td></tr></tbody></table><h3 id="_2-6-查看内核相关信息" tabindex="-1"><a class="header-anchor" href="#_2-6-查看内核相关信息"><span>2.6 查看内核相关信息</span></a></h3><ul><li>uname</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line"> </span>
<span class="line"> Linux localhost 2.6.32-279.el6.i686 </span>
<span class="line"> </span>
<span class="line">Linux</span>
<span class="line"> </span>
<span class="line">2.6.32-279.el6.i686</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-7-查看操作系统位数" tabindex="-1"><a class="header-anchor" href="#_2-7-查看操作系统位数"><span>2.7 查看操作系统位数</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">file /bin/ls</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_2-8-查看发行版本" tabindex="-1"><a class="header-anchor" href="#_2-8-查看发行版本"><span>2.8 查看发行版本</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">lsb_release -a</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_2-9-查看发行版本" tabindex="-1"><a class="header-anchor" href="#_2-9-查看发行版本"><span>2.9 查看发行版本</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">yum install redhat-lsb -y</span>
<span class="line">lsb_release -v</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-系统定时任务" tabindex="-1"><a class="header-anchor" href="#_3-系统定时任务"><span>3. 系统定时任务</span></a></h2><ul><li>有些任务比如备份数据库等操作需要在系统空闲的时候执行</li></ul><h3 id="_3-2-crontab" tabindex="-1"><a class="header-anchor" href="#_3-2-crontab"><span>3.2 crontab</span></a></h3><ul><li>可以循环定时执行定时任务</li><li><a href="http://www.bejson.com/othertools/cron/" target="_blank" rel="noopener noreferrer">cron</a></li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">systemctl restart crond.service</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_3-2-3-crontab设置" tabindex="-1"><a class="header-anchor" href="#_3-2-3-crontab设置"><span>3.2.3 crontab设置</span></a></h4><ul><li>crontab [选项]</li><li>选项 <ul><li>-e 编辑crontab定时任务</li><li>-l 查询crontab任务</li><li>-r 删除当前用户所有的crontab任务</li></ul></li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">* * * * *  执行的任务</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h5 id="_3-2-3-1-语法" tabindex="-1"><a class="header-anchor" href="#_3-2-3-1-语法"><span>3.2.3.1 语法</span></a></h5><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line"> </span>
<span class="line"> </span>
<span class="line"> </span>
<span class="line"> </span>
<span class="line"> </span>
<span class="line"> </span>
<span class="line"> </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-2-3-2-位置" tabindex="-1"><a class="header-anchor" href="#_3-2-3-2-位置"><span>3.2.3.2 位置</span></a></h5><table><thead><tr><th style="text-align:left;">项目</th><th style="text-align:left;">含义</th><th style="text-align:left;">范围</th></tr></thead><tbody><tr><td style="text-align:left;">第1个星</td><td style="text-align:left;">1个小时中的第几分钟</td><td style="text-align:left;">0~59</td></tr><tr><td style="text-align:left;">第2个星</td><td style="text-align:left;">1天当中的第几小时</td><td style="text-align:left;">0~23</td></tr><tr><td style="text-align:left;">第3个星</td><td style="text-align:left;">1月当中的第几天</td><td style="text-align:left;">1~31</td></tr><tr><td style="text-align:left;">第4个星</td><td style="text-align:left;">1年当中的第几月</td><td style="text-align:left;">1~12</td></tr><tr><td style="text-align:left;">第5个星</td><td style="text-align:left;">1周当中的星期几</td><td style="text-align:left;">0~6</td></tr></tbody></table><h5 id="_3-2-3-3-特殊符号" tabindex="-1"><a class="header-anchor" href="#_3-2-3-3-特殊符号"><span>3.2.3.3 特殊符号</span></a></h5><table><thead><tr><th style="text-align:left;">符号</th><th style="text-align:left;">含义</th><th style="text-align:left;">例子</th></tr></thead><tbody><tr><td style="text-align:left;">*</td><td style="text-align:left;">代表任意时间</td><td style="text-align:left;">比如第一个星就代表一个小时中每分钟都执行一次</td></tr><tr><td style="text-align:left;">,</td><td style="text-align:left;">代表不连续的时间</td><td style="text-align:left;">比如&quot;1,2,3 &quot;,就代表每小时的1分、2分、3分执行命令</td></tr><tr><td style="text-align:left;">-</td><td style="text-align:left;">代表连续的时间范围</td><td style="text-align:left;">比如 &quot; 1-5 * ** &quot;,代表每小时的第1分到第5分执行命令</td></tr><tr><td style="text-align:left;">*/n</td><td style="text-align:left;">代表每隔多久执行一次</td><td style="text-align:left;">比如 &quot;<em>/10</em> &quot; 就代表每隔10分钟就执行一次命令</td></tr><tr><td style="text-align:left;">0 0 1,10 * 1</td><td style="text-align:left;">每月1号和10号，每周1的0点0分都会执行</td><td style="text-align:left;"></td></tr></tbody></table><h5 id="_3-2-3-4-案例" tabindex="-1"><a class="header-anchor" href="#_3-2-3-4-案例"><span>3.2.3.4 案例</span></a></h5><table><thead><tr><th style="text-align:left;">符号</th><th style="text-align:left;">含义</th></tr></thead><tbody><tr><td style="text-align:left;">10 22 *</td><td style="text-align:left;">在每天的22点10分执行</td></tr><tr><td style="text-align:left;">0 15 1</td><td style="text-align:left;">每周1的15点0分执行</td></tr><tr><td style="text-align:left;">0 5 5,10</td><td style="text-align:left;">每月5号和10号的凌晨5点整执行</td></tr><tr><td style="text-align:left;">10 5 1-5</td><td style="text-align:left;">每周一到周五的凌晨5点10分执行命令</td></tr><tr><td style="text-align:left;"><em>/10 10</em></td><td style="text-align:left;">每天凌晨10点钟，每隔10分钟执行一次</td></tr></tbody></table><h5 id="_3-2-3-5-注意事项" tabindex="-1"><a class="header-anchor" href="#_3-2-3-5-注意事项"><span>3.2.3.5 注意事项</span></a></h5><ul><li>所有选项不能为空，必须填写</li><li>crontab最小单位是分钟,最大单位是天</li><li>不管写命令还是脚本都要使用绝对路径</li></ul><h3 id="_3-3-系统定时任务" tabindex="-1"><a class="header-anchor" href="#_3-3-系统定时任务"><span>3.3 系统定时任务</span></a></h3><ul><li><code>crontab -e</code>是用户执行的命令，不同的用户身份可以执行自己的定时任务</li><li>如果需要系统执行定时任务，可以编辑<code>/etc/crontab</code>文件</li><li><code>/etc/crontab</code>可以指定shell、路径、邮件发送和家目录</li></ul><h3 id="_3-3-1-etc-crontab" tabindex="-1"><a class="header-anchor" href="#_3-3-1-etc-crontab"><span>3.3.1 /etc/crontab</span></a></h3><ul><li>修改<code>/etc/crontab</code>配置文件</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token number">5</span> <span class="token number">5</span> <span class="token operator">*</span> <span class="token operator">*</span> <span class="token operator">*</span> echo <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">date</span><span class="token template-punctuation string">\`</span></span> <span class="token operator">&gt;&gt;</span> <span class="token operator">/</span>root<span class="token operator">/</span>date<span class="token punctuation">.</span>log</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_4-实战任务" tabindex="-1"><a class="header-anchor" href="#_4-实战任务"><span>4. 实战任务</span></a></h2><h3 id="_4-1-监控nginx" tabindex="-1"><a class="header-anchor" href="#_4-1-监控nginx"><span>4.1 监控nginx</span></a></h3><p>nginx.sh</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"> </span>
<span class="line">local nginx</span>
<span class="line">nginx<span class="token operator">=</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">ps -ef |grep nginx|grep -v grep|wc -l</span><span class="token template-punctuation string">\`</span></span></span>
<span class="line"> <span class="token keyword">if</span> <span class="token punctuation">[</span> $nginx <span class="token operator">-</span>gt <span class="token number">2</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>then</span>
<span class="line">    echo <span class="token string">&quot;your nginx is running&quot;</span></span>
<span class="line">    exit <span class="token number">0</span></span>
<span class="line"> <span class="token keyword">else</span></span>
<span class="line">    <span class="token operator">/</span>bin<span class="token operator">/</span>systemctl start nginx<span class="token punctuation">.</span>service</span>
<span class="line">    exit <span class="token number">1</span></span>
<span class="line">fi</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-2-监控mysql状态" tabindex="-1"><a class="header-anchor" href="#_4-2-监控mysql状态"><span>4.2 监控mysql状态</span></a></h3><p>mysql.sh</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"> </span>
<span class="line">PortNum<span class="token operator">=</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">netstat -lnt|grep 3306|wc -l</span><span class="token template-punctuation string">\`</span></span></span>
<span class="line"><span class="token keyword">if</span> <span class="token punctuation">[</span> $PortNum <span class="token operator">-</span>eq <span class="token number">1</span> <span class="token punctuation">]</span></span>
<span class="line">then</span>
<span class="line"> echo <span class="token string">&quot;mysqld is running.&quot;</span></span>
<span class="line"><span class="token keyword">else</span></span>
<span class="line"> echo <span class="token string">&quot;mysqld is stoped.&quot;</span></span>
<span class="line">fi</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-3-mysql备份脚本" tabindex="-1"><a class="header-anchor" href="#_4-3-mysql备份脚本"><span>4.3 mysql备份脚本</span></a></h3><p>mysql_backup.sh</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line"> </span>
<span class="line">DATE=$(date +%F_%H-%M-%S)</span>
<span class="line">HOST=127.0.0.1</span>
<span class="line">DB=test</span>
<span class="line">USER=root</span>
<span class="line"> PASS=abcd1</span>
<span class="line">MAIL=&quot;83687401@qq.com&quot;</span>
<span class="line">BACKUP_DIR=/data/db_backup</span>
<span class="line">if [ ! -d &quot;$BACKUP_DIR&quot; ];then</span>
<span class="line"> mkdir -p $BACKUP_DIR</span>
<span class="line">fi</span>
<span class="line">SQL_FILE=\${DB}_FULL_$DATE.sql</span>
<span class="line">BAK_FILE=\${DB}_FULL_$DATE.zip</span>
<span class="line">cd $BACKUP_DIR</span>
<span class="line">if mysqldump -h$HOST -u$USER -p$PASS -B $DB &gt; $SQL_FILE; then</span>
<span class="line">  zip $BAK_FILE $SQL_FILE &amp;&amp; rm -rf $SQL_FILE</span>
<span class="line">  if [ ! -s $BAK_FILE ]; then</span>
<span class="line">    echo &quot;$DATE 备份失败&quot; | mail -s &quot;备份失败&quot; $MAIL</span>
<span class="line">  fi</span>
<span class="line">else</span>
<span class="line">  echo &quot;$DATE 备份失败&quot; | mail -s &quot;备份失败&quot; $MAIL</span>
<span class="line">fi</span>
<span class="line">find $BACKUP_DIR -name &#39;*.zip&#39; -ctime +14 -exec rm {} \\;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,112)])])}const p=e(n,[["render",i]]),c=JSON.parse('{"path":"/strong/125.7.linux-system.html","title":"","lang":"en-US","frontmatter":{},"git":{"updatedTime":1681290319000,"contributors":[{"name":"yutao","username":"yutao","email":"642231346@qq.com","commits":1,"url":"https://github.com/yutao"}],"changelog":[{"hash":"f5ab8c9d34991ec274f7f652439afe5b2afb6147","time":1681290319000,"email":"642231346@qq.com","author":"yutao","message":"modify"}]},"filePathRelative":"strong/125.7.linux-system.md"}');export{p as comp,c as data};
