import{_ as a,c as t,a as s,o as n}from"./app-CD1YpnS1.js";const l={};function i(d,e){return n(),t("div",null,[...e[0]||(e[0]=[s(`<h2 id="_1-用户和用户组" tabindex="-1"><a class="header-anchor" href="#_1-用户和用户组"><span>1. 用户和用户组</span></a></h2><ul><li>使用操作系统的人都是用户</li><li>用户组是具有相同系统权限的一组用户</li></ul><h2 id="_2-配置文件" tabindex="-1"><a class="header-anchor" href="#_2-配置文件"><span>2 配置文件</span></a></h2><h3 id="_2-1-etc-group" tabindex="-1"><a class="header-anchor" href="#_2-1-etc-group"><span>2.1 /etc/group</span></a></h3><ul><li>/etc/group 存储当前系统中所有用户组信息</li><li><code>root</code> 组编号为 <code>0</code></li><li><code>1-499</code>系统预留的编号 预留给安装的软件和服务的</li><li>用户手动创建的用户组从<code>500</code>开始</li><li>组密码占位符都是<code>x</code></li><li>如果组内只有一个用户，而且用户名和组名相同的话，是可以省略用户名的</li></ul><p><code>root:x:0:root</code></p><table><thead><tr><th style="text-align:left;">含义</th><th style="text-align:left;">含义</th></tr></thead><tbody><tr><td style="text-align:left;">root</td><td style="text-align:left;">组的名称</td></tr><tr><td style="text-align:left;">x</td><td style="text-align:left;">密码占位符</td></tr><tr><td style="text-align:left;">0</td><td style="text-align:left;">组编号</td></tr><tr><td style="text-align:left;">root</td><td style="text-align:left;">组中用户名列表</td></tr></tbody></table><h3 id="_2-2-etc-gshadow" tabindex="-1"><a class="header-anchor" href="#_2-2-etc-gshadow"><span>2.2 /etc/gshadow</span></a></h3><ul><li>存放当前系统中用户组的密码信息</li><li>和<code>/etc/group</code>中的记录一一对应</li></ul><p><code>root:*::root</code></p><table><thead><tr><th style="text-align:left;">内容</th><th style="text-align:left;">含义</th></tr></thead><tbody><tr><td style="text-align:left;">root</td><td style="text-align:left;">组的名称</td></tr><tr><td style="text-align:left;">*</td><td style="text-align:left;">组密码,*为空</td></tr><tr><td style="text-align:left;"></td><td style="text-align:left;">组管理者,为空表示都可以管理这个组</td></tr><tr><td style="text-align:left;">root</td><td style="text-align:left;">组中用户名列表</td></tr></tbody></table><h3 id="_2-3-etc-passwd" tabindex="-1"><a class="header-anchor" href="#_2-3-etc-passwd"><span>2.3 /etc/passwd</span></a></h3><ul><li>存储当前系统中所有用户的信息</li></ul><p><code>root:x:0:0:root:/root:/bin/bash</code></p><table><thead><tr><th style="text-align:left;">内容</th><th style="text-align:left;">含义</th></tr></thead><tbody><tr><td style="text-align:left;">root</td><td style="text-align:left;">用户名</td></tr><tr><td style="text-align:left;">x</td><td style="text-align:left;">密码占位符</td></tr><tr><td style="text-align:left;">0</td><td style="text-align:left;">用户编号</td></tr><tr><td style="text-align:left;">0</td><td style="text-align:left;">用户组编号</td></tr><tr><td style="text-align:left;">root</td><td style="text-align:left;">用户注释信息</td></tr><tr><td style="text-align:left;">/root</td><td style="text-align:left;">用户主目录</td></tr><tr><td style="text-align:left;">/bin/bash</td><td style="text-align:left;">shell类型</td></tr></tbody></table><h3 id="_2-4-etc-shadow" tabindex="-1"><a class="header-anchor" href="#_2-4-etc-shadow"><span>2.4 /etc/shadow</span></a></h3><ul><li>存放当前系统中所有用户的密码信息</li><li>user:xxx:::::::</li><li>用户名:密码:</li></ul><p><code>root:password:17982:0:99999:7:::</code></p><table><thead><tr><th style="text-align:left;">内容</th><th style="text-align:left;">含义</th></tr></thead><tbody><tr><td style="text-align:left;">root</td><td style="text-align:left;">用户名</td></tr><tr><td style="text-align:left;">password</td><td style="text-align:left;">单向加密后的密码</td></tr><tr><td style="text-align:left;">17982</td><td style="text-align:left;">修改日期,这个是表明上一次修改密码的日期与1970-1-1相距的天数密码不可改的天数：假如这个数字是8，则8天内不可改密码，如果是0，则随时可以改</td></tr><tr><td style="text-align:left;">0</td><td style="text-align:left;">这个是表明上一次修改密码的日期与1970-1-1相距的天数密码不可改的天数：假如这个数字是8，则8天内不可改密码，如果是0，则随时可以改</td></tr><tr><td style="text-align:left;">99999</td><td style="text-align:left;">如果是99999则永远不用改。如果是其其他数字比如12345，那么必须在距离1970-1-1的12345天内修改密码，否则密码失效</td></tr><tr><td style="text-align:left;">7</td><td style="text-align:left;">修改期限前N天发出警告</td></tr><tr><td style="text-align:left;"></td><td style="text-align:left;">密码过期的宽限天数</td></tr><tr><td style="text-align:left;"></td><td style="text-align:left;">帐号失效日期</td></tr><tr><td style="text-align:left;"></td><td style="text-align:left;">保留：被保留项，暂时还没有被用上</td></tr></tbody></table><h2 id="_3-用户命令" tabindex="-1"><a class="header-anchor" href="#_3-用户命令"><span>3. 用户命令</span></a></h2><p>显示登录的用户名</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">whoami</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>显示指定用户信息，包括用户编号，用户名 主要组的编号及名称，附属组列表</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">id zhangsan  </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>显示zhangsan用户所在的所有组</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">groups zhangsan </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>显示用户详细资料</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">finger zhangsan  </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_4-用户和用户组操作" tabindex="-1"><a class="header-anchor" href="#_4-用户和用户组操作"><span>4. 用户和用户组操作</span></a></h2><h3 id="_4-1-添加用户组" tabindex="-1"><a class="header-anchor" href="#_4-1-添加用户组"><span>4.1 添加用户组</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">groupadd stu</span>
<span class="line">cat  /etc/group</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-2-修改用户组名称" tabindex="-1"><a class="header-anchor" href="#_4-2-修改用户组名称"><span>4.2 修改用户组名称</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">groupmod -n student stu</span>
<span class="line">cat  /etc/group</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-3-修改用户组编号" tabindex="-1"><a class="header-anchor" href="#_4-3-修改用户组编号"><span>4.3 修改用户组编号</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">groupmod <span class="token operator">-</span>g <span class="token number">666</span> student</span>
<span class="line">cat  <span class="token operator">/</span>etc<span class="token operator">/</span>group</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-4-创建分组并指定编号" tabindex="-1"><a class="header-anchor" href="#_4-4-创建分组并指定编号"><span>4.4 创建分组并指定编号</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">groupadd <span class="token operator">-</span>g <span class="token number">888</span> teacher</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_4-5-删除用户组" tabindex="-1"><a class="header-anchor" href="#_4-5-删除用户组"><span>4.5 删除用户组</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">groupdel student</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_4-6-添加用户" tabindex="-1"><a class="header-anchor" href="#_4-6-添加用户"><span>4.6 添加用户</span></a></h3><ul><li>如果创建用户的时候没有指定用户组，系统会为他创建一个和用户名相同的用户组</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">groupadd stu</span>
<span class="line">useradd -g stu zhangsan  创建用户并指定用户组</span>
<span class="line">useradd -g stu lisi      创建用户并指定用户组</span>
<span class="line"></span>
<span class="line">id zhangsan</span>
<span class="line">id lisi</span>
<span class="line"></span>
<span class="line">useradd -d /home/woshiwangwu wangwu   创建用户并指定家目录</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-7-修改用户注释" tabindex="-1"><a class="header-anchor" href="#_4-7-修改用户注释"><span>4.7 修改用户注释</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">usermod -c good wangwu</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_4-8-修改用户名" tabindex="-1"><a class="header-anchor" href="#_4-8-修改用户名"><span>4.8 修改用户名</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">usermod -l wangwu2 wangwu</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_4-9-指定个人文件夹" tabindex="-1"><a class="header-anchor" href="#_4-9-指定个人文件夹"><span>4.9 指定个人文件夹</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">usermod -d /home/wangwu2 wangwu2</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_4-10-修改用户组" tabindex="-1"><a class="header-anchor" href="#_4-10-修改用户组"><span>4.10 修改用户组</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">usermod -g student wangwu2</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_4-11-删除用户" tabindex="-1"><a class="header-anchor" href="#_4-11-删除用户"><span>4.11 删除用户</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">userdel wangwu2</span>
<span class="line">userdel -r wangwu2 删除用户的时候级联删除对应的目录</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-12-锁定用户wangwu2的密码" tabindex="-1"><a class="header-anchor" href="#_4-12-锁定用户wangwu2的密码"><span>4.12 锁定用户wangwu2的密码</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">passwd -l wangwu2</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_4-13-解锁用户wangwu2的密码" tabindex="-1"><a class="header-anchor" href="#_4-13-解锁用户wangwu2的密码"><span>4.13 解锁用户wangwu2的密码</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">passwd -u wangwu2</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_5-主要组和附属组" tabindex="-1"><a class="header-anchor" href="#_5-主要组和附属组"><span>5. 主要组和附属组</span></a></h2><ul><li>用户可以同时属于多个组,一个主要组和多个附属组</li><li>一个用户创建的文件属于主要组</li></ul><p>把wangwu2添加到teacher附属组中</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">gpasswd -a wangwu2 teacher</span>
<span class="line">Adding user wangwu2 to group teacher</span>
<span class="line">newgrp teacher  当前用户把身份切换为附属组，如果附属组有密码，需要设置密码</span>
<span class="line">gpasswd -d wangwu2 teacher 把wangwu2从teacher附属组中移除</span>
<span class="line"></span>
<span class="line">useradd -g group1 -G group2,group3... zhaoliu 添加用户的时候指定主要组和附属组</span>
<span class="line">gpasswd group1 设置组密码</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,60)])])}const c=a(l,[["render",i]]),p=JSON.parse('{"path":"/strong/61.3.devops-user.html","title":"","lang":"en-US","frontmatter":{},"git":{"updatedTime":1681290319000,"contributors":[{"name":"yutao","username":"yutao","email":"642231346@qq.com","commits":1,"url":"https://github.com/yutao"}],"changelog":[{"hash":"f5ab8c9d34991ec274f7f652439afe5b2afb6147","time":1681290319000,"email":"642231346@qq.com","author":"yutao","message":"modify"}]},"filePathRelative":"strong/61.3.devops-user.md"}');export{c as comp,p as data};
